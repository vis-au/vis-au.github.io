{"version":3,"file":"remodel.js","sources":["../dist/TemplateModel/Template.js","../node_modules/vega-util/src/accessor.js","../node_modules/vega-util/src/error.js","../node_modules/vega-util/src/splitAccessPath.js","../node_modules/vega-util/src/isArray.js","../node_modules/vega-util/src/isObject.js","../node_modules/vega-util/src/isString.js","../node_modules/vega-util/src/stringValue.js","../node_modules/vega-util/src/field.js","../node_modules/vega-util/src/accessors.js","../node_modules/vega-util/src/logger.js","../node_modules/vega-util/src/isBoolean.js","../node_modules/vega-util/src/isNumber.js","../node_modules/vega-util/src/toSet.js","../node_modules/clone/clone.js","../node_modules/fast-json-stable-stringify/index.js","../node_modules/vega-lite/src/util.ts","../node_modules/vega-lite/src/mark.ts","../dist/TemplateModel/PlotTemplate.js","../dist/TemplateModel/CompositionTemplate.js","../dist/TemplateModel/ConcatTemplate.js","../dist/TemplateModel/FacetTemplate.js","../dist/TemplateModel/LayerTemplate.js","../dist/TemplateModel/RepeatTemplate.js","../node_modules/vega-lite/src/data.ts","../node_modules/vega-lite/src/spec/concat.ts","../node_modules/vega-lite/src/spec/facet.ts","../node_modules/vega-lite/src/spec/layer.ts","../node_modules/vega-lite/src/spec/repeat.ts","../node_modules/vega-lite/src/spec/unit.ts","../node_modules/vega-lite/src/spec/index.ts","../dist/TemplateModel/MarkEncoding.js","../dist/TemplateModel/SpecUtils.js","../dist/DataModel/GraphNode.js","../dist/DataModel/Datasets/DatasetNode.js","../dist/DataModel/Transforms/TranformNode.js","../dist/DataModel/Transforms/TransformTypes.js","../dist/DataModel/Datasets/InlineDatasetNode.js","../dist/DataModel/Datasets/NamedDataSourceNode.js","../dist/DataModel/Datasets/URLDatasetNode.js","../node_modules/d3-dsv/src/dsv.js","../node_modules/d3-dsv/src/csv.js","../node_modules/d3-dsv/src/tsv.js","../node_modules/d3-dsv/src/autoType.js","../dist/DataModel/DataImporter.js","../dist/DataModel/index.js","../dist/TemplateModel/SpecCompiler.js","../node_modules/tslib/tslib.es6.js","../node_modules/vega-lite/src/aggregate.ts","../node_modules/vega-lite/src/channel.ts","../node_modules/vega-lite/src/bin.ts","../node_modules/vega-lite/src/log/message.ts","../node_modules/vega-lite/src/log/index.ts","../node_modules/vega-lite/src/datetime.ts","../node_modules/vega-lite/src/timeunit.ts","../node_modules/vega-lite/src/type.ts","../node_modules/vega-lite/src/channeldef.ts","../dist/TemplateModel/SpecParser.js","../dist/TemplateModel/LayoutType.js","../dist/TemplateModel/MarkType.js","../dist/TemplateModel/index.js","../dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Template {\n    constructor(visualElements, layout, parent) {\n        this.visualElements = visualElements;\n        this.layout = layout;\n        this.parent = parent;\n        this.id = `template${Math.round(Math.random() * 10000)}`;\n        this.hierarchyLevel = -1;\n        this.dataNode = null;\n        this.encodings = new Map();\n        this.overwrittenEncodings = new Map();\n    }\n    /**\n     * Returns the flattened hierarchy of templates succeeding this one.\n     */\n    getFlatHierarchy() {\n        const successors = [];\n        successors.push(this);\n        this.visualElements.forEach(successor => {\n            successors.push(...successor.getFlatHierarchy());\n        });\n        return successors;\n    }\n    /**\n     * Returns the hierarchy level of this template, starting at 0.\n     */\n    getHierarchyLevel() {\n        if (this.hierarchyLevel > -1) {\n            return this.hierarchyLevel;\n        }\n        // since the template may have visual elements from different leves, output the highest value\n        // between all sub-hierarchies\n        if (this.visualElements.length === 0) {\n            return 0;\n        }\n        const subHierarchies = this.visualElements.map(v => v.getHierarchyLevel());\n        this.hierarchyLevel = Math.max(...subHierarchies) + 1;\n        return this.hierarchyLevel;\n    }\n    setEncodedValue(encoding, value) {\n        this.encodings.set(encoding, value);\n    }\n    getEncodedValue(encoding) {\n        return this.encodings.get(encoding);\n    }\n    deleteEncodedValue(encoding) {\n        this.encodings.delete(encoding);\n    }\n    set dataTransformationNode(transformNode) {\n        this.dataNode = transformNode;\n    }\n    get dataTransformationNode() {\n        return this.dataNode;\n    }\n    get data() {\n        if (this.dataNode === null) {\n            return null;\n        }\n        const data = this.dataNode.getSchema();\n        return data;\n    }\n    get transform() {\n        if (this.dataNode === null) {\n            return [];\n        }\n        const transform = this.dataNode.getTransform();\n        return transform;\n    }\n}\nexports.Template = Template;\n","export default function(fn, fields, name) {\n  fn.fields = fields || [];\n  fn.fname = name;\n  return fn;\n}\n\nexport function accessorName(fn) {\n  return fn == null ? null : fn.fname;\n}\n\nexport function accessorFields(fn) {\n  return fn == null ? null : fn.fields;\n}\n","export default function(message) {\n  throw Error(message);\n}\n","import error from './error';\n\nexport default function(p) {\n  var path = [],\n      q = null,\n      b = 0,\n      n = p.length,\n      s = '',\n      i, j, c;\n\n  p = p + '';\n\n  function push() {\n    path.push(s + p.substring(i, j));\n    s = '';\n    i = j + 1;\n  }\n\n  for (i=j=0; j<n; ++j) {\n    c = p[j];\n    if (c === '\\\\') {\n      s += p.substring(i, j);\n      i = ++j;\n    } else if (c === q) {\n      push();\n      q = null;\n      b = -1;\n    } else if (q) {\n      continue;\n    } else if (i === b && c === '\"') {\n      i = j + 1;\n      q = c;\n    } else if (i === b && c === \"'\") {\n      i = j + 1;\n      q = c;\n    } else if (c === '.' && !b) {\n      if (j > i) {\n        push();\n      } else {\n        i = j + 1;\n      }\n    } else if (c === '[') {\n      if (j > i) push();\n      b = i = j + 1;\n    } else if (c === ']') {\n      if (!b) error('Access path missing open bracket: ' + p);\n      if (b > 0) push();\n      b = 0;\n      i = j + 1;\n    }\n  }\n\n  if (b) error('Access path missing closing bracket: ' + p);\n  if (q) error('Access path missing closing quote: ' + p);\n\n  if (j > i) {\n    j++;\n    push();\n  }\n\n  return path;\n}\n","export default Array.isArray;\n","export default function(_) {\n  return _ === Object(_);\n}\n","export default function(_) {\n  return typeof _ === 'string';\n}\n","import isArray from './isArray';\nimport isObject from './isObject';\nimport isString from './isString';\n\nexport default function $(x) {\n  return isArray(x) ? '[' + x.map($) + ']'\n    : isObject(x) || isString(x) ?\n      // Output valid JSON and JS source strings.\n      // See http://timelessrepo.com/json-isnt-a-javascript-subset\n      JSON.stringify(x).replace('\\u2028','\\\\u2028').replace('\\u2029', '\\\\u2029')\n    : x;\n}\n","import accessor from './accessor';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(field, name) {\n  var path = splitAccessPath(field),\n      code = 'return _[' + path.map(stringValue).join('][') + '];';\n\n  return accessor(\n    Function('_', code),\n    [(field = path.length===1 ? path[0] : field)],\n    name || field\n  );\n}\n","import accessor from './accessor';\nimport field from './field';\n\nvar empty = [];\n\nexport var id = field('id');\n\nexport var identity = accessor(function(_) { return _; }, empty, 'identity');\n\nexport var zero = accessor(function() { return 0; }, empty, 'zero');\n\nexport var one = accessor(function() { return 1; }, empty, 'one');\n\nexport var truthy = accessor(function() { return true; }, empty, 'true');\n\nexport var falsy = accessor(function() { return false; }, empty, 'false');\n","function log(method, level, input) {\n  var msg = [level].concat([].slice.call(input));\n  console[method](...msg); // eslint-disable-line no-console\n}\n\nexport var None  = 0;\nexport var Error = 1;\nexport var Warn  = 2;\nexport var Info  = 3;\nexport var Debug = 4;\n\nexport default function(_, method) {\n  var level = _ || None;\n  return {\n    level: function(_) {\n      if (arguments.length) {\n        level = +_;\n        return this;\n      } else {\n        return level;\n      }\n    },\n    error: function() {\n      if (level >= Error) log(method || 'error', 'ERROR', arguments);\n      return this;\n    },\n    warn: function() {\n      if (level >= Warn) log(method || 'warn', 'WARN', arguments);\n      return this;\n    },\n    info: function() {\n      if (level >= Info) log(method || 'log', 'INFO', arguments);\n      return this;\n    },\n    debug: function() {\n      if (level >= Debug) log(method || 'log', 'DEBUG', arguments);\n      return this;\n    }\n  }\n}\n","export default function(_) {\n  return typeof _ === 'boolean';\n}\n","export default function(_) {\n  return typeof _ === 'number';\n}\n","export default function(_) {\n  for (var s={}, i=0, n=_.length; i<n; ++i) s[_[i]] = true;\n  return s;\n}\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","import {default as clone_} from 'clone';\nimport deepEqual_ from 'fast-deep-equal';\nimport stableStringify from 'fast-json-stable-stringify';\nimport {isArray, isNumber, isString, splitAccessPath, stringValue} from 'vega-util';\nimport {isLogicalAnd, isLogicalNot, isLogicalOr, LogicalOperand} from './logical';\n\nexport const deepEqual = deepEqual_;\nexport const duplicate = clone_;\n\n/**\n * Creates an object composed of the picked object properties.\n *\n * var object = {'a': 1, 'b': '2', 'c': 3};\n * pick(object, ['a', 'c']);\n * // → {'a': 1, 'c': 3}\n *\n */\nexport function pick<T extends object, K extends keyof T>(obj: T, props: K[]): Pick<T, K> {\n  const copy: any = {};\n  for (const prop of props) {\n    if (obj.hasOwnProperty(prop)) {\n      copy[prop] = obj[prop];\n    }\n  }\n  return copy;\n}\n\n/**\n * The opposite of _.pick; this method creates an object composed of the own\n * and inherited enumerable string keyed properties of object that are not omitted.\n */\nexport function omit<T extends object, K extends keyof T>(obj: T, props: K[]): Omit<T, K> {\n  const copy = {...(obj as any)};\n  for (const prop of props) {\n    delete copy[prop];\n  }\n  return copy;\n}\n\n/**\n * Monkey patch Set so that `stringify` produces a string representation of sets.\n */\nSet.prototype['toJSON'] = function() {\n  return `Set(${[...this].map(x => stableStringify(x)).join(',')})`;\n};\n\n/**\n * Converts any object to a string representation that can be consumed by humans.\n */\nexport const stringify = stableStringify;\n\n/**\n * Converts any object to a string of limited size, or a number.\n */\nexport function hash(a: any): string | number {\n  if (isNumber(a)) {\n    return a;\n  }\n\n  const str = isString(a) ? a : stableStringify(a);\n\n  // short strings can be used as hash directly, longer strings are hashed to reduce memory usage\n  if (str.length < 250) {\n    return str;\n  }\n\n  // from http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\n  let h = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    h = (h << 5) - h + char;\n    h = h & h; // Convert to 32bit integer\n  }\n  return h;\n}\n\nexport function isNullOrFalse(x: any): x is false | null {\n  return x === false || x === null;\n}\n\nexport function contains<T>(array: T[], item: T) {\n  return array.indexOf(item) > -1;\n}\n\n/** Returns the array without the elements in item */\nexport function without<T>(array: T[], excludedItems: T[]) {\n  return array.filter(item => !contains(excludedItems, item));\n}\n\nexport function union<T>(array: T[], other: T[]) {\n  return array.concat(without(other, array));\n}\n\n/**\n * Returns true if any item returns true.\n */\nexport function some<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (const [k, a] of arr.entries()) {\n    if (f(a, k, i++)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if all items return true.\n */\nexport function every<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (const [k, a] of arr.entries()) {\n    if (!f(a, k, i++)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function flatten<T>(arrays: T[][]): T[] {\n  return ([] as T[]).concat(...arrays);\n}\n\nexport function fill<T>(val: T, len: number) {\n  const arr = new Array<T>(len);\n  for (let i = 0; i < len; ++i) {\n    arr[i] = val;\n  }\n  return arr;\n}\n\n/**\n * Like TS Partial but applies recursively to all properties.\n */\nexport type DeepPartial<T> = {[P in keyof T]?: DeepPartial<T[P]>};\n\n/**\n * recursively merges src into dest\n */\nexport function mergeDeep<T>(dest: T, ...src: DeepPartial<T>[]): T {\n  for (const s of src) {\n    dest = deepMerge_(dest, s);\n  }\n  return dest;\n}\n\n// recursively merges src into dest\nfunction deepMerge_(dest: any, src: any) {\n  if (typeof src !== 'object' || src === null) {\n    return dest;\n  }\n\n  for (const p in src) {\n    if (!src.hasOwnProperty(p)) {\n      continue;\n    }\n    if (src[p] === undefined) {\n      continue;\n    }\n    if (typeof src[p] !== 'object' || isArray(src[p]) || src[p] === null) {\n      dest[p] = src[p];\n    } else if (typeof dest[p] !== 'object' || dest[p] === null) {\n      dest[p] = mergeDeep(isArray(src[p].constructor) ? [] : {}, src[p]);\n    } else {\n      mergeDeep(dest[p], src[p]);\n    }\n  }\n  return dest;\n}\n\nexport function unique<T>(values: T[], f: (item: T) => string | number): T[] {\n  const results: T[] = [];\n  const u = {};\n  let v: string | number;\n  for (const val of values) {\n    v = f(val);\n    if (v in u) {\n      continue;\n    }\n    u[v] = 1;\n    results.push(val);\n  }\n  return results;\n}\n\nexport interface Dict<T> {\n  [key: string]: T;\n}\n\n/**\n * Returns true if the two dictionaries disagree. Applies only to defined values.\n */\nexport function isEqual<T>(dict: Dict<T>, other: Dict<T>) {\n  const dictKeys = keys(dict);\n  const otherKeys = keys(other);\n  if (dictKeys.length !== otherKeys.length) {\n    return false;\n  }\n  for (const key of dictKeys) {\n    if (dict[key] !== other[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function setEqual<T>(a: Set<T>, b: Set<T>) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const e of a) {\n    if (!b.has(e)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function hasIntersection<T>(a: Set<T>, b: Set<T>) {\n  for (const key of a) {\n    if (b.has(key)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function prefixGenerator(a: Set<string>): Set<string> {\n  const prefixes = new Set<string>();\n  for (const x of a) {\n    const splitField = splitAccessPath(x);\n    // Wrap every element other than the first in `[]`\n    const wrappedWithAccessors = splitField.map((y, i) => (i === 0 ? y : `[${y}]`));\n    const computedPrefixes = wrappedWithAccessors.map((_, i) => wrappedWithAccessors.slice(0, i + 1).join(''));\n    computedPrefixes.forEach(y => prefixes.add(y));\n  }\n  return prefixes;\n}\n\nexport function fieldIntersection(a: Set<string>, b: Set<string>): boolean {\n  return hasIntersection(prefixGenerator(a), prefixGenerator(b));\n}\n\nexport function isNumeric(num: string | number) {\n  return !isNaN(num as any);\n}\n\nexport function differArray<T>(array: T[], other: T[]) {\n  if (array.length !== other.length) {\n    return true;\n  }\n\n  array.sort();\n  other.sort();\n\n  for (let i = 0; i < array.length; i++) {\n    if (other[i] !== array[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// This is a stricter version of Object.keys but with better types. See https://github.com/Microsoft/TypeScript/pull/12253#issuecomment-263132208\nexport const keys = Object.keys as <T>(o: T) => (Extract<keyof T, string>)[];\n\nexport function vals<T>(x: {[key: string]: T}): T[] {\n  const _vals: T[] = [];\n  for (const k in x) {\n    if (x.hasOwnProperty(k)) {\n      _vals.push(x[k]);\n    }\n  }\n  return _vals;\n}\n\nexport function entries<T>(x: {[key: string]: T}): {key: string; value: T}[] {\n  const _entries: {key: string; value: T}[] = [];\n  for (const k in x) {\n    if (x.hasOwnProperty(k)) {\n      _entries.push({\n        key: k,\n        value: x[k]\n      });\n    }\n  }\n  return _entries;\n}\n\n// Using mapped type to declare a collect of flags for a string literal type S\n// https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\nexport type Flag<S extends string> = {[K in S]: 1};\n\nexport function flagKeys<S extends string>(f: Flag<S>): S[] {\n  return keys(f) as S[];\n}\n\nexport function isBoolean(b: any): b is boolean {\n  return b === true || b === false;\n}\n\n/**\n * Convert a string into a valid variable name\n */\nexport function varName(s: string): string {\n  // Replace non-alphanumeric characters (anything besides a-zA-Z0-9_) with _\n  const alphanumericS = s.replace(/\\W/g, '_');\n\n  // Add _ if the string has leading numbers.\n  return (s.match(/^\\d+/) ? '_' : '') + alphanumericS;\n}\n\nexport function logicalExpr<T>(op: LogicalOperand<T>, cb: (...args: any[]) => string): string {\n  if (isLogicalNot(op)) {\n    return '!(' + logicalExpr(op.not, cb) + ')';\n  } else if (isLogicalAnd(op)) {\n    return '(' + op.and.map((and: LogicalOperand<T>) => logicalExpr(and, cb)).join(') && (') + ')';\n  } else if (isLogicalOr(op)) {\n    return '(' + op.or.map((or: LogicalOperand<T>) => logicalExpr(or, cb)).join(') || (') + ')';\n  } else {\n    return cb(op);\n  }\n}\n\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\n/**\n * Delete nested property of an object, and delete the ancestors of the property if they become empty.\n */\nexport function deleteNestedProperty(obj: any, orderedProps: string[]) {\n  if (orderedProps.length === 0) {\n    return true;\n  }\n  const prop = orderedProps.shift();\n  if (deleteNestedProperty(obj[prop], orderedProps)) {\n    delete obj[prop];\n  }\n  return keys(obj).length === 0;\n}\n\nexport function titlecase(s: string) {\n  return s.charAt(0).toUpperCase() + s.substr(1);\n}\n\n/**\n * Converts a path to an access path with datum.\n * @param path The field name.\n * @param datum The string to use for `datum`.\n */\nexport function accessPathWithDatum(path: string, datum = 'datum') {\n  const pieces = splitAccessPath(path);\n  const prefixes = [];\n  for (let i = 1; i <= pieces.length; i++) {\n    const prefix = `[${pieces\n      .slice(0, i)\n      .map(stringValue)\n      .join('][')}]`;\n    prefixes.push(`${datum}${prefix}`);\n  }\n  return prefixes.join(' && ');\n}\n\n/**\n * Return access with datum to the flattened field.\n *\n * @param path The field name.\n * @param datum The string to use for `datum`.\n */\nexport function flatAccessWithDatum(path: string, datum: 'datum' | 'parent' | 'datum.datum' = 'datum') {\n  return `${datum}[${stringValue(splitAccessPath(path).join('.'))}]`;\n}\n\n/**\n * Replaces path accesses with access to non-nested field.\n * For example, `foo[\"bar\"].baz` becomes `foo\\\\.bar\\\\.baz`.\n */\nexport function replacePathInField(path: string) {\n  return `${splitAccessPath(path)\n    .map(p => p.replace('.', '\\\\.'))\n    .join('\\\\.')}`;\n}\n\n/**\n * Remove path accesses with access from field.\n * For example, `foo[\"bar\"].baz` becomes `foo.bar.baz`.\n */\nexport function removePathFromField(path: string) {\n  return `${splitAccessPath(path).join('.')}`;\n}\n\n/**\n * Count the depth of the path. Returns 1 for fields that are not nested.\n */\nexport function accessPathDepth(path: string) {\n  if (!path) {\n    return 0;\n  }\n  return splitAccessPath(path).length;\n}\n\n/**\n * This is a replacement for chained || for numeric properties or properties that respect null so that 0 will be included.\n */\nexport function getFirstDefined<T>(...args: T[]): T {\n  for (const arg of args) {\n    if (arg !== undefined) {\n      return arg;\n    }\n  }\n  return undefined;\n}\n\n// variable used to generate id\nlet idCounter = 42;\n\n/**\n * Returns a new random id every time it gets called.\n *\n * Has side effect!\n */\nexport function uniqueId(prefix?: string) {\n  const id = ++idCounter;\n  return prefix ? String(prefix) + id : id;\n}\n\n/**\n * Resets the id counter used in uniqueId. This can be useful for testing.\n */\nexport function resetIdCounter() {\n  idCounter = 42;\n}\n\nexport function internalField(name: string) {\n  return isInternalField(name) ? name : `__${name}`;\n}\n\nexport function isInternalField(name: string) {\n  return name.indexOf('__') === 0;\n}\n\n/**\n * Normalize angle to be within [0,360).\n */\nexport function normalizeAngle(angle: number) {\n  return ((angle % 360) + 360) % 360;\n}\n","import {toSet} from 'vega-util';\nimport {CompositeMark, CompositeMarkDef} from './compositemark/index';\nimport {contains, flagKeys} from './util';\nimport {BaseMarkConfig} from './vega.schema';\n\nexport const AREA: 'area' = 'area';\nexport const BAR: 'bar' = 'bar';\nexport const LINE: 'line' = 'line';\nexport const POINT: 'point' = 'point';\nexport const RECT: 'rect' = 'rect';\nexport const RULE: 'rule' = 'rule';\nexport const TEXT: 'text' = 'text';\nexport const TICK: 'tick' = 'tick';\nexport const TRAIL: 'trail' = 'trail';\nexport const CIRCLE: 'circle' = 'circle';\nexport const SQUARE: 'square' = 'square';\nexport const GEOSHAPE: 'geoshape' = 'geoshape';\n\n/**\n * All types of primitive marks.\n */\nexport type Mark =\n  | typeof AREA\n  | typeof BAR\n  | typeof LINE\n  | typeof TRAIL\n  | typeof POINT\n  | typeof TEXT\n  | typeof TICK\n  | typeof RECT\n  | typeof RULE\n  | typeof CIRCLE\n  | typeof SQUARE\n  | typeof GEOSHAPE;\n\n// Using mapped type to declare index, ensuring we always have all marks when we add more.\nconst MARK_INDEX: {[M in Mark]: 1} = {\n  area: 1,\n  bar: 1,\n  line: 1,\n  point: 1,\n  text: 1,\n  tick: 1,\n  trail: 1,\n  rect: 1,\n  geoshape: 1,\n  rule: 1,\n  circle: 1,\n  square: 1\n};\n\nexport function isMark(m: string): m is Mark {\n  return !!MARK_INDEX[m];\n}\n\nexport function isPathMark(m: Mark | CompositeMark): m is 'line' | 'area' | 'trail' {\n  return contains(['line', 'area', 'trail'], m);\n}\n\nexport const PRIMITIVE_MARKS = flagKeys(MARK_INDEX);\n\nexport interface ColorMixins {\n  /**\n   * Default color.  Note that `fill` and `stroke` have higher precedence than `color` and will override `color`.\n   *\n   * __Default value:__ <span style=\"color: #4682b4;\">&#9632;</span> `\"#4682b4\"`\n   *\n   * __Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n   */\n  color?: string;\n}\n\nexport interface TooltipContent {\n  content: 'encoding' | 'data';\n}\n\nexport interface MarkConfig extends ColorMixins, BaseMarkConfig {\n  // ========== VL-Specific ==========\n\n  /**\n   * Whether the mark's color should be used as fill color instead of stroke color.\n   *\n   * __Default value:__ `false` for `point`, `line` and `rule`; otherwise, `true`.\n   *\n   * __Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n   *\n   */\n  filled?: boolean;\n\n  // ========== Overriding Vega ==========\n\n  /**\n   * The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n   *\n   * - If `tooltip` is `{\"content\": \"encoding\"}`, then all fields from `encoding` will be used.\n   * - If `tooltip` is `{\"content\": \"data\"}`, then all fields that appear in the highlighted data point will be used.\n   * - If set to `null`, then no tooltip will be used.\n   */\n  tooltip?: string | TooltipContent | null;\n\n  /**\n   * Default size for marks.\n   * - For `point`/`circle`/`square`, this represents the pixel area of the marks. For example: in the case of circles, the radius is determined in part by the square root of the size value.\n   * - For `bar`, this represents the band size of the bar, in pixels.\n   * - For `text`, this represents the font size, in pixels.\n   *\n   * __Default value:__ `30` for point, circle, square marks; `rangeStep` - 1 for bar marks with discrete dimensions; `5` for bar marks with continuous dimensions; `11` for text marks.\n   *\n   * @minimum 0\n   */\n  size?: number;\n\n  /**\n   * For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.\n   */\n  order?: null | boolean;\n}\n\nexport interface BarBinSpacingMixins {\n  /**\n   * Offset between bars for binned field.  Ideal value for this is either 0 (Preferred by statisticians) or 1 (Vega-Lite Default, D3 example style).\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   */\n  binSpacing?: number;\n}\n\nexport type AnyMark = CompositeMark | CompositeMarkDef | Mark | MarkDef;\n\nexport function isMarkDef(mark: string | GenericMarkDef<any>): mark is GenericMarkDef<any> {\n  return mark['type'];\n}\n\nconst PRIMITIVE_MARK_INDEX = toSet(PRIMITIVE_MARKS);\n\nexport function isPrimitiveMark(mark: AnyMark): mark is Mark {\n  const markType = isMarkDef(mark) ? mark.type : mark;\n  return markType in PRIMITIVE_MARK_INDEX;\n}\n\nexport const STROKE_CONFIG = [\n  'stroke',\n  'strokeWidth',\n  'strokeDash',\n  'strokeDashOffset',\n  'strokeOpacity',\n  'strokeJoin',\n  'strokeMiterLimit'\n];\n\nexport const FILL_CONFIG = ['fill', 'fillOpacity'];\n\nexport const FILL_STROKE_CONFIG = [].concat(STROKE_CONFIG, FILL_CONFIG);\n\nexport const VL_ONLY_MARK_CONFIG_PROPERTIES: (keyof MarkConfig)[] = ['filled', 'color', 'tooltip'];\n\nexport const VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX: {\n  [k in typeof PRIMITIVE_MARKS[0]]?: (keyof MarkConfigMixins[k])[]\n} = {\n  area: ['line', 'point'],\n  bar: ['binSpacing', 'continuousBandSize', 'discreteBandSize'],\n  line: ['point'],\n  text: ['shortTimeLabels'],\n  tick: ['bandSize', 'thickness']\n};\n\nexport const defaultMarkConfig: MarkConfig = {\n  color: '#4c78a8',\n  tooltip: {content: 'encoding'}\n};\n\nexport interface MarkConfigMixins {\n  /** Mark Config */\n  mark?: MarkConfig;\n\n  // MARK-SPECIFIC CONFIGS\n  /** Area-Specific Config */\n  area?: AreaConfig;\n\n  /** Bar-Specific Config */\n  bar?: BarConfig;\n\n  /** Circle-Specific Config */\n  circle?: MarkConfig;\n\n  /** Line-Specific Config */\n  line?: LineConfig;\n\n  /** Point-Specific Config */\n  point?: MarkConfig;\n\n  /** Rect-Specific Config */\n  rect?: MarkConfig;\n\n  /** Rule-Specific Config */\n  rule?: MarkConfig;\n\n  /** Square-Specific Config */\n  square?: MarkConfig;\n\n  /** Text-Specific Config */\n  text?: TextConfig;\n\n  /** Tick-Specific Config */\n  tick?: TickConfig;\n\n  /** Trail-Specific Config */\n  trail?: LineConfig;\n\n  /** Geoshape-Specific Config */\n  geoshape?: MarkConfig;\n}\n\nexport interface BarConfig extends BarBinSpacingMixins, MarkConfig {\n  /**\n   * The default size of the bars on continuous scales.\n   *\n   * __Default value:__ `5`\n   *\n   * @minimum 0\n   */\n  continuousBandSize?: number;\n\n  /**\n   * The default size of the bars with discrete dimensions.  If unspecified, the default size is  `bandSize-1`,\n   * which provides 1 pixel offset between bars.\n   * @minimum 0\n   */\n  discreteBandSize?: number;\n}\n\nexport type OverlayMarkDef = MarkConfig & MarkDefMixins;\n\nexport interface PointOverlayMixins {\n  /**\n   * A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n   *\n   * - If this property is `\"transparent\"`, transparent points will be used (for enhancing tooltips and selections).\n   *\n   * - If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n   *\n   * - If this property is `false`, no points would be automatically added to line or area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  point?: boolean | OverlayMarkDef | 'transparent';\n}\n\nexport interface LineConfig extends MarkConfig, PointOverlayMixins {}\n\nexport interface LineOverlayMixins {\n  /**\n   * A flag for overlaying line on top of area marks, or an object defining the properties of the overlayed lines.\n   *\n   * - If this value is an empty object (`{}`) or `true`, lines with default properties will be used.\n   *\n   * - If this value is `false`, no lines would be automatically added to area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  line?: boolean | OverlayMarkDef;\n}\n\nexport interface AreaConfig extends MarkConfig, PointOverlayMixins, LineOverlayMixins {}\n\nexport interface TickThicknessMixins {\n  /**\n   * Thickness of the tick mark.\n   *\n   * __Default value:__  `1`\n   *\n   * @minimum 0\n   */\n  thickness?: number;\n}\n\nexport interface GenericMarkDef<M> {\n  /**\n   * The mark type. This could a primitive mark type\n   * (one of `\"bar\"`, `\"circle\"`, `\"square\"`, `\"tick\"`, `\"line\"`,\n   * `\"area\"`, `\"point\"`, `\"geoshape\"`, `\"rule\"`, and `\"text\"`)\n   * or a composite mark type (`\"boxplot\"`, `\"errorband\"`, `\"errorbar\"`).\n   */\n  type: M;\n}\n\nexport interface MarkDefMixins {\n  /**\n   * A string or array of strings indicating the name of custom styles to apply to the mark. A style is a named collection of mark property defaults defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles. Any [mark properties](https://vega.github.io/vega-lite/docs/encoding.html#mark-prop) explicitly defined within the `encoding` will override a style default.\n   *\n   * __Default value:__ The mark's name.  For example, a bar mark will have style `\"bar\"` by default.\n   * __Note:__ Any specified style will augment the default style. For example, a bar mark with `\"style\": \"foo\"` will receive from `config.style.bar` and `config.style.foo` (the specified style `\"foo\"` has higher precedence).\n   */\n  style?: string | string[];\n\n  /**\n   * Whether a mark be clipped to the enclosing group’s width and height.\n   */\n  clip?: boolean;\n\n  // Offset properties should not be a part of config\n\n  /**\n   * Offset for x-position.\n   */\n  xOffset?: number;\n\n  /**\n   * Offset for y-position.\n   */\n  yOffset?: number;\n\n  /**\n   * Offset for x2-position.\n   */\n  x2Offset?: number;\n\n  /**\n   * Offset for y2-position.\n   */\n  y2Offset?: number;\n}\n\n// Point/Line OverlayMixins are only for area, line, and trail but we don't want to declare multiple types of MarkDef\n\n// Point/Line OverlayMixins are only for area, line, and trail but we don't want to declare multiple types of MarkDef\nexport interface MarkDef<M extends string | Mark = Mark>\n  extends GenericMarkDef<M>,\n    BarBinSpacingMixins,\n    MarkConfig,\n    PointOverlayMixins,\n    LineOverlayMixins,\n    TickThicknessMixins,\n    MarkDefMixins {}\n\nexport const defaultBarConfig: BarConfig = {\n  binSpacing: 1,\n  continuousBandSize: 5\n};\n\nexport interface TextConfig extends MarkConfig {\n  /**\n   * Whether month names and weekday names should be abbreviated.\n   */\n  shortTimeLabels?: boolean;\n}\n\nexport interface TickConfig extends MarkConfig, TickThicknessMixins {\n  /**\n   * The width of the ticks.\n   *\n   * __Default value:__  3/4 of rangeStep.\n   * @minimum 0\n   */\n  bandSize?: number;\n}\n\nexport const defaultTickConfig: TickConfig = {\n  thickness: 1\n};\n\nexport function getMarkType(m: string | GenericMarkDef<any>) {\n  return isMarkDef(m) ? m.type : m;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mark_1 = require(\"vega-lite/build/src/mark\");\nconst Template_1 = require(\"./Template\");\nclass PlotTemplate extends Template_1.Template {\n    constructor(parent = null) {\n        super([], null, parent);\n        this.mark = null;\n    }\n    get type() {\n        if (mark_1.isPrimitiveMark(this.mark)) {\n            return this.mark;\n        }\n        else if (mark_1.isMarkDef(this.mark)) {\n            return this.mark.type;\n        }\n    }\n    set type(type) {\n        if (this.mark === null) {\n            this.mark = type;\n        }\n        else {\n            if (mark_1.isPrimitiveMark(this.mark)) {\n                this.mark = type;\n            }\n            else if (mark_1.isMarkDef(this.mark)) {\n                this.mark.type = type;\n            }\n        }\n    }\n}\nexports.PlotTemplate = PlotTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Template_1 = require(\"./Template\");\nclass CompositionTemplate extends Template_1.Template {\n    constructor(composition, visualElements, parent = null) {\n        super(visualElements, composition, parent);\n    }\n}\nexports.CompositionTemplate = CompositionTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nclass ConcatTemplate extends CompositionTemplate_1.CompositionTemplate {\n    constructor(visualElements, parent = null) {\n        super('concatenate', visualElements, parent);\n        this.isVertical = true;\n        this.isWrappable = false;\n    }\n}\nexports.ConcatTemplate = ConcatTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nclass FacetTemplate extends CompositionTemplate_1.CompositionTemplate {\n    constructor(visualElements, parent = null) {\n        super('facet', visualElements, parent);\n        this.isInlineFacetted = false;\n    }\n}\nexports.FacetTemplate = FacetTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nclass LayerTemplate extends CompositionTemplate_1.CompositionTemplate {\n    constructor(visualElements, parent = null) {\n        super('overlay', visualElements, parent);\n        this.groupEncodings = new Map();\n    }\n}\nexports.LayerTemplate = LayerTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nclass RepeatTemplate extends CompositionTemplate_1.CompositionTemplate {\n    constructor(visualElements, parent = null) {\n        super('repeat', visualElements, parent);\n        this.repeat = {};\n    }\n}\nexports.RepeatTemplate = RepeatTemplate;\n","/*\n * Constants and utilities for data.\n */\nimport {VgData} from './vega.schema';\nimport {FieldName} from './channeldef';\n\nexport type ParseValue = null | string | 'string' | 'boolean' | 'date' | 'number';\n\nexport interface Parse {\n  [field: string]: ParseValue;\n}\n\nexport interface DataFormatBase {\n  /**\n   * If set to `null`, disable type inference based on the spec and only use type inference based on the data.\n   * Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `\"number\"`, `\"boolean\"`, `\"date\"`, or null (do not parse the field)).\n   * For example, `\"parse\": {\"modified_on\": \"date\"}` parses the `modified_on` field in each input record a Date value.\n   *\n   * For `\"date\"`, we parse data based using Javascript's [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse).\n   * For Specific date formats can be provided (e.g., `{foo: \"date:'%m%d%Y'\"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: \"utc:'%m%d%Y'\"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)\n   */\n  parse?: Parse | null;\n\n  /**\n   * Type of input data: `\"json\"`, `\"csv\"`, `\"tsv\"`, `\"dsv\"`.\n   *\n   * __Default value:__  The default format type is determined by the extension of the file URL.\n   * If no extension is detected, `\"json\"` will be used by default.\n   */\n  type?: 'csv' | 'tsv' | 'dsv' | 'json' | 'topojson';\n}\n\nexport interface CsvDataFormat extends DataFormatBase {\n  type?: 'csv' | 'tsv';\n}\n\nexport interface DsvDataFormat extends DataFormatBase {\n  type?: 'dsv';\n\n  /**\n   * The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.\n   *\n   * @minLength 1\n   * @maxLength 1\n   */\n  delimiter: string;\n}\n\nexport interface JsonDataFormat extends DataFormatBase {\n  type?: 'json';\n  /**\n   * The JSON property containing the desired data.\n   * This parameter can be used when the loaded JSON file may have surrounding structure or meta-data.\n   * For example `\"property\": \"values.features\"` is equivalent to retrieving `json.values.features`\n   * from the loaded JSON object.\n   */\n  property?: string;\n}\n\nexport interface TopoDataFormat extends DataFormatBase {\n  type?: 'topojson';\n  /**\n   * The name of the TopoJSON object set to convert to a GeoJSON feature collection.\n   * For example, in a map of the world, there may be an object set named `\"countries\"`.\n   * Using the feature property, we can extract this set and generate a GeoJSON feature object for each country.\n   */\n  feature?: string;\n  /**\n   * The name of the TopoJSON object set to convert to mesh.\n   * Similar to the `feature` option, `mesh` extracts a named TopoJSON object set.\n   *  Unlike the `feature` option, the corresponding geo data is returned as a single, unified mesh instance, not as individual GeoJSON features.\n   * Extracting a mesh is useful for more efficiently drawing borders or other geographic elements that you do not need to associate with specific regions such as individual countries, states or counties.\n   */\n  mesh?: string;\n}\n\nexport type DataFormat = CsvDataFormat | DsvDataFormat | JsonDataFormat | TopoDataFormat;\n\nexport type DataFormatType = 'json' | 'csv' | 'tsv' | 'dsv' | 'topojson';\n\nexport type DataSource = UrlData | InlineData | NamedData;\n\nexport type Data = DataSource | Generator;\n\nexport type InlineDataset = number[] | string[] | boolean[] | object[] | string | object;\n\nexport interface DataBase {\n  /**\n   * An object that specifies the format for parsing the data.\n   */\n  format?: DataFormat;\n  /**\n   * Provide a placeholder name and bind data at runtime.\n   */\n  name?: string;\n}\n\nexport interface UrlData extends DataBase {\n  /**\n   * An URL from which to load the data set. Use the `format.type` property\n   * to ensure the loaded data is correctly parsed.\n   */\n  url: string;\n}\n\nexport interface InlineData extends DataBase {\n  /**\n   * The full data set, included inline. This can be an array of objects or primitive values, an object, or a string.\n   * Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type.\n   */\n  values: InlineDataset;\n}\n\nexport interface NamedData extends DataBase {\n  /**\n   * Provide a placeholder name and bind data at runtime.\n   */\n  name: string;\n}\n\nexport function isUrlData(data: Partial<Data> | Partial<VgData>): data is UrlData {\n  return !!data['url'];\n}\n\nexport function isInlineData(data: Partial<Data> | Partial<VgData>): data is InlineData {\n  return !!data['values'];\n}\n\nexport function isNamedData(data: Partial<Data> | Partial<VgData>): data is NamedData {\n  return !!data['name'] && !isUrlData(data) && !isInlineData(data) && !isGenerator(data);\n}\n\nexport function isGenerator(data: Partial<Data> | Partial<VgData>): data is Generator {\n  return data && (isSequenceGenerator(data) || isSphereGenerator(data) || isGraticuleGenerator(data));\n}\n\nexport function isSequenceGenerator(data: Partial<Data> | Partial<VgData>): data is SequenceGenerator {\n  return !!data['sequence'];\n}\n\nexport function isSphereGenerator(data: Partial<Data> | Partial<VgData>): data is SphereGenerator {\n  return !!data['sphere'];\n}\n\nexport function isGraticuleGenerator(data: Partial<Data> | Partial<VgData>): data is GraticuleGenerator {\n  return !!data['graticule'];\n}\n\nexport type DataSourceType = 'raw' | 'main' | 'row' | 'column' | 'lookup';\n\nexport const MAIN: 'main' = 'main';\nexport const RAW: 'raw' = 'raw';\n\nexport type Generator = SequenceGenerator | SphereGenerator | GraticuleGenerator;\n\nexport interface GeneratorBase {\n  /**\n   * Provide a placeholder name and bind data at runtime.\n   */\n  name?: string;\n}\n\nexport interface SequenceGenerator extends GeneratorBase {\n  /**\n   * Generate a sequence of numbers.\n   */\n  sequence: SequenceParams;\n}\n\nexport interface SequenceParams {\n  /**\n   * The starting value of the sequence (inclusive).\n   */\n  start: number;\n  /**\n   * The ending value of the sequence (exclusive).\n   */\n  stop: number;\n  /**\n   * The step value between sequence entries.\n   *\n   * __Default value:__ `1`\n   */\n  step?: number;\n\n  /**\n   * The name of the generated sequence field.\n   *\n   * __Default value:__ `\"data\"`\n   */\n  as?: FieldName;\n}\n\nexport interface SphereGenerator extends GeneratorBase {\n  /**\n   * Generate sphere GeoJSON data for the full globe.\n   */\n  sphere: true | {};\n}\n\nexport interface GraticuleGenerator extends GeneratorBase {\n  /**\n   * Generate graticule GeoJSON data for geographic reference lines.\n   */\n  graticule: true | GraticuleParams;\n}\n\nexport interface GraticuleParams {\n  /**\n   * The major extent of the graticule as a two-element array of coordinates.\n   */\n  extentMajor?: number[][];\n\n  /**\n   * The minor extent of the graticule as a two-element array of coordinates.\n   */\n  extentMinor?: number[][];\n\n  /**\n   * Sets both the major and minor extents to the same values.\n   */\n  extent?: number[][];\n\n  /**\n   * The major step angles of the graticule.\n   *\n   *\n   * __Default value:__ `[90, 360]`\n   */\n  stepMajor?: number[];\n\n  /**\n   * The minor step angles of the graticule.\n   *\n   * __Default value:__ `[10, 10]`\n   */\n  stepMinor?: number[];\n\n  /**\n   * Sets both the major and minor step angles to the same values.\n   */\n  step?: number[];\n\n  /**\n   * The precision of the graticule in degrees.\n   *\n   * __Default value:__ `2.5`\n   */\n  precision?: number;\n}\n","import {BaseSpec, BoundsMixins, GenericCompositionLayoutWithColumns, ResolveMixins} from './base';\nimport {GenericSpec} from './index';\nimport {GenericLayerSpec, NormalizedLayerSpec} from './layer';\nimport {GenericUnitSpec, NormalizedUnitSpec} from './unit';\n\n/**\n * Base layout mixins for V/HConcatSpec, which should not have RowCol<T> generic fo its property.\n */\nexport interface OneDirectionalConcatLayout extends BoundsMixins, ResolveMixins {\n  /**\n   * Boolean flag indicating if subviews should be centered relative to their respective rows or columns.\n   *\n   * __Default value:__ `false`\n   */\n  center?: boolean;\n\n  /**\n   * The spacing in pixels between sub-views of the concat operator.\n   *\n   * __Default value__: `10`\n   */\n  spacing?: number;\n}\n\n/**\n * Base interface for a generalized concatenation specification.\n */\nexport interface GenericConcatSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>>\n  extends BaseSpec,\n    GenericCompositionLayoutWithColumns,\n    ResolveMixins {\n  /**\n   * A list of views to be concatenated.\n   */\n  concat: (GenericSpec<U, L>)[];\n}\n\n/**\n * Base interface for a vertical concatenation specification.\n */\nexport interface GenericVConcatSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>>\n  extends BaseSpec,\n    OneDirectionalConcatLayout {\n  /**\n   * A list of views to be concatenated and put into a column.\n   */\n  vconcat: (GenericSpec<U, L>)[];\n}\n\n/**\n * Base interface for a horizontal concatenation specification.\n */\nexport interface GenericHConcatSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>>\n  extends BaseSpec,\n    OneDirectionalConcatLayout {\n  /**\n   * A list of views to be concatenated and put into a row.\n   */\n  hconcat: (GenericSpec<U, L>)[];\n}\n\n/** A concat spec without any shortcut/expansion syntax */\nexport type NormalizedConcatSpec =\n  | GenericConcatSpec<NormalizedUnitSpec, NormalizedLayerSpec>\n  | GenericVConcatSpec<NormalizedUnitSpec, NormalizedLayerSpec>\n  | GenericHConcatSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport function isAnyConcatSpec(spec: BaseSpec): spec is GenericVConcatSpec<any, any> | GenericHConcatSpec<any, any> {\n  return isVConcatSpec(spec) || isHConcatSpec(spec) || isConcatSpec(spec);\n}\n\nexport function isConcatSpec(spec: BaseSpec): spec is GenericConcatSpec<any, any> {\n  return spec['concat'] !== undefined;\n}\n\nexport function isVConcatSpec(spec: BaseSpec): spec is GenericVConcatSpec<any, any> {\n  return spec['vconcat'] !== undefined;\n}\n\nexport function isHConcatSpec(spec: BaseSpec): spec is GenericHConcatSpec<any, any> {\n  return spec['hconcat'] !== undefined;\n}\n","import {BinParams} from '../bin';\nimport {ChannelDef, Field, FieldDef, TypedFieldDef} from '../channeldef';\nimport {Header} from '../header';\nimport {EncodingSortField, SortArray, SortOrder} from '../sort';\nimport {StandardType} from '../type';\nimport {BaseSpec, GenericCompositionLayoutWithColumns, ResolveMixins} from './base';\nimport {FacetMapping} from './facet';\nimport {GenericLayerSpec, NormalizedLayerSpec} from './layer';\nimport {GenericUnitSpec, NormalizedUnitSpec} from './unit';\n\nexport interface FacetFieldDef<F extends Field> extends TypedFieldDef<F, StandardType, boolean | BinParams | null> {\n  /**\n   * An object defining properties of a facet's header.\n   */\n  header?: Header;\n\n  // Note: `\"sort\"` for facet field def is different from encoding field def as it does not support `SortByEncoding`\n\n  /**\n   * Sort order for the encoded field.\n   *\n   * For continuous fields (quantitative or temporal), `sort` can be either `\"ascending\"` or `\"descending\"`.\n   *\n   * For discrete fields, `sort` can be one of the following:\n   * - `\"ascending\"` or `\"descending\"` -- for sorting by the values' natural order in Javascript.\n   * - [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n   * - [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order.  For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `\"month\"` and `\"day\"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `\"Mon\"`, `\"Tue\"`).\n   * - `null` indicating no sort.\n   *\n   * __Default value:__ `\"ascending\"`\n   *\n   * __Note:__ `null` is not supported for `row` and `column`.\n   */\n  sort?: SortArray | SortOrder | EncodingSortField<F> | null;\n}\n\nexport interface FacetMapping<F extends Field> {\n  /**\n   * A field definition for the vertical facet of trellis plots.\n   */\n  row?: FacetFieldDef<F>;\n\n  /**\n   * A field definition for the horizontal facet of trellis plots.\n   */\n  column?: FacetFieldDef<F>;\n}\n\nexport function isFacetMapping<F extends Field>(f: FacetFieldDef<F> | FacetMapping<F>): f is FacetMapping<F> {\n  return !!f['row'] || !!f['column'];\n}\n\n/**\n * Facet mapping for encoding macro\n */\nexport interface EncodingFacetMapping<F extends Field> extends FacetMapping<F> {\n  /**\n   * A field definition for the (flexible) facet of trellis plots.\n   *\n   * If either `row` or `column` is specified, this channel will be ignored.\n   */\n  facet?: FacetFieldDef<F>;\n}\n\nexport function isFacetFieldDef<F extends Field>(channelDef: ChannelDef<FieldDef<F>>): channelDef is FacetFieldDef<F> {\n  return !!channelDef && !!channelDef['header'];\n}\n\n/**\n * Base interface for a facet specification.\n */\nexport interface GenericFacetSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>>\n  extends BaseSpec,\n    GenericCompositionLayoutWithColumns,\n    ResolveMixins {\n  /**\n   * Definition for how to facet the data.  One of:\n   * 1) [a field definition for faceting the plot by one field](https://vega.github.io/vega-lite/docs/facet.html#field-def)\n   * 2) [An object that maps `row` and `column` channels to their field definitions](https://vega.github.io/vega-lite/docs/facet.html#mapping)\n   */\n  facet: FacetFieldDef<Field> | FacetMapping<Field>;\n\n  /**\n   * A specification of the view that gets faceted.\n   */\n  spec: L | U;\n  // TODO: replace this with GenericSpec<U> once we support all cases;\n}\n\n/**\n * A facet specification without any shortcut / expansion syntax\n */\nexport type NormalizedFacetSpec = GenericFacetSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport function isFacetSpec(spec: BaseSpec): spec is GenericFacetSpec<any, any> {\n  return spec['facet'] !== undefined;\n}\n","import {CompositeEncoding} from '../compositemark/index';\nimport {Projection} from '../projection';\nimport {BaseSpec, LayerUnitMixins, ResolveMixins} from './base';\nimport {GenericUnitSpec, NormalizedUnitSpec, UnitSpec} from './unit';\n\n/**\n * Base interface for a layer specification.\n */\nexport interface GenericLayerSpec<U extends GenericUnitSpec<any, any>>\n  extends BaseSpec,\n    LayerUnitMixins,\n    ResolveMixins {\n  /**\n   * Layer or single view specifications to be layered.\n   *\n   * __Note__: Specifications inside `layer` cannot use `row` and `column` channels as layering facet specifications is not allowed. Instead, use the [facet operator](https://vega.github.io/vega-lite/docs/facet.html) and place a layer inside a facet.\n   */\n  layer: (GenericLayerSpec<U> | U)[];\n}\n\n/**\n * A full layered plot specification, which may contains `encoding` and `projection` properties that will be applied to underlying unit (single-view) specifications.\n */\nexport interface LayerSpec extends GenericLayerSpec<UnitSpec> {\n  /**\n   * A shared key-value mapping between encoding channels and definition of fields in the underlying layers.\n   */\n  encoding?: CompositeEncoding;\n\n  /**\n   * An object defining properties of the geographic projection shared by underlying layers.\n   */\n  projection?: Projection;\n}\n\n/**\n * A layered specification without any shortcut/expansion syntax.\n */\nexport type NormalizedLayerSpec = GenericLayerSpec<NormalizedUnitSpec>;\n\nexport function isLayerSpec(spec: BaseSpec): spec is GenericLayerSpec<any> {\n  return spec['layer'] !== undefined;\n}\n","import {BaseSpec, GenericCompositionLayoutWithColumns, ResolveMixins} from './base';\nimport {GenericSpec} from './index';\nimport {GenericLayerSpec, NormalizedLayerSpec} from './layer';\nimport {RepeatMapping} from './repeat';\nimport {GenericUnitSpec, NormalizedUnitSpec} from './unit';\n\nexport interface RepeatMapping {\n  /**\n   * An array of fields to be repeated vertically.\n   */\n  row?: string[];\n\n  /**\n   * An array of fields to be repeated horizontally.\n   */\n  column?: string[];\n}\n\n/**\n * Base interface for a repeat specification.\n */\nexport interface GenericRepeatSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>>\n  extends BaseSpec,\n    GenericCompositionLayoutWithColumns,\n    ResolveMixins {\n  /**\n   * Definition for fields to be repeated.  One of:\n   * 1) An array of fields to be repeated.  If `\"repeat\"` is an array, the field can be referred using `{\"repeat\": \"repeat\"}`\n   * 2) An object that mapped `\"row\"` and/or `\"column\"` to the listed of fields to be repeated along the particular orientations. The objects `{\"repeat\": \"row\"}` and `{\"repeat\": \"column\"}` can be used to refer to the repeated field respectively.\n   */\n  repeat: string[] | RepeatMapping;\n\n  /**\n   * A specification of the view that gets repeated.\n   */\n  spec: GenericSpec<U, L>;\n}\n\n/**\n * A repeat specification without any shortcut/expansion syntax.\n */\nexport type NormalizedRepeatSpec = GenericRepeatSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport function isRepeatSpec(spec: BaseSpec): spec is GenericRepeatSpec<any, any> {\n  return spec['repeat'] !== undefined;\n}\n","import {Field} from '../channeldef';\nimport {CompositeEncoding, FacetedCompositeEncoding} from '../compositemark/index';\nimport {Encoding} from '../encoding';\nimport {AnyMark, Mark, MarkDef} from '../mark';\nimport {Projection} from '../projection';\nimport {SelectionDef} from '../selection';\nimport {BaseSpec, DataMixins, GenericCompositionLayoutWithColumns, LayerUnitMixins, ResolveMixins} from './base';\nimport {TopLevel} from './toplevel';\n\n/**\n * Base interface for a unit (single-view) specification.\n */\nexport interface GenericUnitSpec<E extends Encoding<any>, M> extends BaseSpec, LayerUnitMixins {\n  /**\n   * A string describing the mark type (one of `\"bar\"`, `\"circle\"`, `\"square\"`, `\"tick\"`, `\"line\"`,\n   * `\"area\"`, `\"point\"`, `\"rule\"`, `\"geoshape\"`, and `\"text\"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).\n   */\n  mark: M;\n\n  /**\n   * A key-value mapping between encoding channels and definition of fields.\n   */\n  encoding?: E;\n\n  /**\n   * An object defining properties of geographic projection, which will be applied to `shape` path for `\"geoshape\"` marks\n   * and to `latitude` and `\"longitude\"` channels for other marks.\n   */\n  projection?: Projection;\n\n  /**\n   * A key-value mapping between selection names and definitions.\n   */\n  selection?: {[name: string]: SelectionDef};\n}\n\n/**\n * A unit specification without any shortcut/expansion syntax.\n */\nexport type NormalizedUnitSpec = GenericUnitSpec<Encoding<Field>, Mark | MarkDef>;\n\n/**\n * A unit specification, which can contain either [primitive marks or composite marks](https://vega.github.io/vega-lite/docs/mark.html#types).\n */\nexport type UnitSpec = GenericUnitSpec<CompositeEncoding, AnyMark>;\n\n/**\n * Unit spec that can have a composite mark and row or column channels (shorthand for a facet spec).\n */\nexport type FacetedUnitSpec = GenericUnitSpec<FacetedCompositeEncoding, AnyMark> &\n  GenericCompositionLayoutWithColumns &\n  ResolveMixins;\n\nexport type TopLevelUnitSpec = TopLevel<FacetedUnitSpec> & DataMixins;\n\nexport function isUnitSpec(spec: BaseSpec): spec is FacetedUnitSpec | NormalizedUnitSpec {\n  return !!spec['mark'];\n}\n","/**\n * Definition for specifications in Vega-Lite.  In general, there are 3 variants of specs for each type of specs:\n * - Generic specs are generic versions of specs and they are parameterized differently for internal and external specs.\n * - The external specs (no prefix) would allow composite marks, row/column encodings, and mark macros like point/line overlay.\n * - The internal specs (with `Normalized` prefix) would only support primitive marks and support no macros/shortcuts.\n */\n\nimport {DataMixins} from './base';\nimport {GenericConcatSpec, GenericHConcatSpec, GenericVConcatSpec} from './concat';\nimport {GenericFacetSpec} from './facet';\nimport {GenericLayerSpec, LayerSpec, NormalizedLayerSpec} from './layer';\nimport {GenericRepeatSpec} from './repeat';\nimport {TopLevel} from './toplevel';\nimport {FacetedUnitSpec, GenericUnitSpec, NormalizedUnitSpec, TopLevelUnitSpec} from './unit';\n\nexport {BaseSpec, DataMixins, LayoutSizeMixins} from './base';\nexport {\n  GenericHConcatSpec,\n  GenericVConcatSpec,\n  isAnyConcatSpec,\n  isHConcatSpec,\n  isVConcatSpec,\n  NormalizedConcatSpec\n} from './concat';\nexport {GenericFacetSpec, isFacetSpec, NormalizedFacetSpec} from './facet';\nexport {GenericLayerSpec, isLayerSpec, LayerSpec as ExtendedLayerSpec, NormalizedLayerSpec} from './layer';\nexport {GenericRepeatSpec, isRepeatSpec, NormalizedRepeatSpec} from './repeat';\nexport {TopLevel} from './toplevel';\nexport {FacetedUnitSpec, GenericUnitSpec, isUnitSpec, NormalizedUnitSpec, UnitSpec} from './unit';\n\n/**\n * Any specification in Vega-Lite.\n */\nexport type GenericSpec<U extends GenericUnitSpec<any, any>, L extends GenericLayerSpec<any>> =\n  | U\n  | L\n  | GenericFacetSpec<U, L>\n  | GenericRepeatSpec<U, L>\n  | GenericConcatSpec<U, L>\n  | GenericVConcatSpec<U, L>\n  | GenericHConcatSpec<U, L>;\n\n/**\n * Specs with only primitive marks and without other macros.\n */\nexport type NormalizedSpec = GenericSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport type TopLevelFacetSpec = TopLevel<GenericFacetSpec<FacetedUnitSpec, LayerSpec>> & DataMixins;\n\n/**\n * A Vega-Lite top-level specification.\n * This is the root class for all Vega-Lite specifications.\n * (The json schema is generated from this type.)\n */\nexport type TopLevelSpec =\n  | TopLevelUnitSpec\n  | TopLevelFacetSpec\n  | TopLevel<LayerSpec>\n  | TopLevel<GenericRepeatSpec<FacetedUnitSpec, LayerSpec>>\n  | TopLevel<GenericConcatSpec<FacetedUnitSpec, LayerSpec>>\n  | TopLevel<GenericVConcatSpec<FacetedUnitSpec, LayerSpec>>\n  | TopLevel<GenericHConcatSpec<FacetedUnitSpec, LayerSpec>>;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.positionEncodings = ['x', 'y', 'x2', 'y2'];\nexports.geographicPositionEncodings = ['longitude', 'latitude'];\nexports.markPropertiesChannelEncodings = [\n    'filled', 'color', 'fill', 'stroke', 'opacity', 'fillOpacity', 'strokeOpacity', 'size', 'shape',\n    'strokeCap', 'strokeDash', 'strokeDashOffset', 'strokeJoin', 'strokeMiterLimit', 'strokeWidth'\n];\nexports.textTooltipChannelEncodings = ['text', 'tooltip'];\nexports.hyperLinkChannelEncodings = ['href', 'cursor'];\nexports.keyChannelEncodings = ['key'];\nexports.orderChannelEncodings = ['order'];\nexports.loDChannelEncodings = ['detail'];\nexports.facetChannelEncodings = ['facet', 'row', 'column'];\nexports.markEncodings = exports.positionEncodings\n    .concat(exports.geographicPositionEncodings)\n    .concat(exports.markPropertiesChannelEncodings)\n    .concat(exports.textTooltipChannelEncodings)\n    .concat(exports.hyperLinkChannelEncodings)\n    .concat(exports.orderChannelEncodings)\n    .concat(exports.loDChannelEncodings)\n    .concat(exports.facetChannelEncodings);\nexports.markEncodingGroups = [\n    'position', 'geographic', 'mark property', 'text tooltip', 'hyperlink', 'key channel',\n    'order channel', 'lod channel', 'facet channel'\n];\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst spec_1 = require(\"vega-lite/build/src/spec\");\nconst concat_1 = require(\"vega-lite/build/src/spec/concat\");\nconst MarkEncoding_1 = require(\"./MarkEncoding\");\nfunction isAtomicSchema(schema) {\n    return spec_1.isUnitSpec(schema) && !isFacetSchema(schema);\n}\nexports.isAtomicSchema = isAtomicSchema;\n;\nfunction isOverlaySchema(schema) {\n    return spec_1.isLayerSpec(schema);\n}\nexports.isOverlaySchema = isOverlaySchema;\n;\nfunction isRepeatSchema(schema) {\n    return spec_1.isRepeatSpec(schema);\n}\nexports.isRepeatSchema = isRepeatSchema;\n;\nfunction isConcatenateSchema(schema) {\n    return spec_1.isAnyConcatSpec(schema) || concat_1.isConcatSpec(schema);\n}\nexports.isConcatenateSchema = isConcatenateSchema;\n;\nfunction isInlineFacetSchema(schema) {\n    return (schema.encoding !== undefined && schema.encoding.facet !== undefined);\n}\nexports.isInlineFacetSchema = isInlineFacetSchema;\nfunction isFacetSchema(schema) {\n    return spec_1.isFacetSpec(schema) || isInlineFacetSchema(schema);\n}\nexports.isFacetSchema = isFacetSchema;\n;\nfunction isCompositionSchema(schema) {\n    return isOverlaySchema(schema)\n        || isRepeatSchema(schema)\n        || isConcatenateSchema(schema)\n        || isFacetSchema(schema);\n}\nexports.isCompositionSchema = isCompositionSchema;\n;\nfunction isPlotSchema(schema) {\n    return isAtomicSchema(schema);\n}\nexports.isPlotSchema = isPlotSchema;\n;\nfunction getCompositionType(schema) {\n    if (isOverlaySchema(schema)) {\n        return 'overlay';\n    }\n    else if (isRepeatSchema(schema)) {\n        return 'repeat';\n    }\n    else if (isConcatenateSchema(schema)) {\n        return 'concatenate';\n    }\n    else if (isFacetSchema(schema)) {\n        return 'facet';\n    }\n    return null;\n}\nexports.getCompositionType = getCompositionType;\n;\nfunction getLayerAbstraction(schema) {\n    const currentLayers = JSON.parse(JSON.stringify(schema.layer));\n    let currentEncoding;\n    if (schema.encoding !== undefined) {\n        currentEncoding = JSON.parse(JSON.stringify(schema.encoding));\n    }\n    delete schema.layer;\n    delete schema.encoding;\n    const abstraction = {\n        layer: currentLayers\n    };\n    if (currentEncoding !== undefined) {\n        abstraction.encoding = currentEncoding;\n    }\n    return abstraction;\n}\nexports.getLayerAbstraction = getLayerAbstraction;\n;\nfunction getRepeatAbstraction(schema) {\n    const currentSpec = JSON.parse(JSON.stringify(schema.spec));\n    const currentRepeat = JSON.parse(JSON.stringify(schema.repeat));\n    const abstraction = {\n        spec: currentSpec,\n        repeat: currentRepeat\n    };\n    delete schema.spec;\n    delete schema.repeat;\n    return abstraction;\n}\nexports.getRepeatAbstraction = getRepeatAbstraction;\n;\nfunction getFacetAbstraction(schema) {\n    const currentSpec = JSON.parse(JSON.stringify(schema.spec));\n    const currentFacet = JSON.parse(JSON.stringify(schema.facet));\n    const abstraction = {\n        spec: currentSpec,\n        facet: currentFacet\n    };\n    delete schema.spec;\n    delete schema.facet;\n    return abstraction;\n}\nexports.getFacetAbstraction = getFacetAbstraction;\n;\nfunction getConcatAbstraction(schema) {\n    let currentConcat = null;\n    let concatProp = null;\n    if (concat_1.isConcatSpec(schema)) {\n        concatProp = 'concat';\n    }\n    else if (concat_1.isHConcatSpec(schema)) {\n        concatProp = 'hconcat';\n    }\n    else if (concat_1.isVConcatSpec(schema)) {\n        concatProp = 'vconcat';\n    }\n    currentConcat = JSON.parse(JSON.stringify(schema[concatProp]));\n    delete schema[concatProp];\n    const abstraction = {};\n    abstraction[concatProp] = currentConcat;\n    return abstraction;\n}\nexports.getConcatAbstraction = getConcatAbstraction;\n;\nfunction getMarkPropertiesAsMap(mark) {\n    const properties = new Map();\n    // since every mark encoding could potentially be statically set for a mark, just go through\n    // all of them and find the ones that are configured\n    MarkEncoding_1.markEncodings.forEach(encoding => {\n        if (mark[encoding] !== undefined) {\n            properties.set(encoding, JSON.parse(JSON.stringify(mark[encoding])));\n        }\n    });\n    return properties;\n}\nexports.getMarkPropertiesAsMap = getMarkPropertiesAsMap;\n;\nfunction getAtomicAbstraction(schema) {\n    const abstraction = {\n        mark: JSON.parse(JSON.stringify(schema.mark)),\n    };\n    if (schema.encoding !== undefined) {\n        abstraction.encoding = JSON.parse(JSON.stringify(schema.encoding));\n    }\n    if (schema.selection !== undefined) {\n        abstraction.selection = JSON.parse(JSON.stringify(schema.selection));\n    }\n    const staticProperties = getMarkPropertiesAsMap(schema.mark);\n    staticProperties.forEach((property, key) => {\n        abstraction[key] = property;\n        delete schema[key];\n    });\n    delete schema.mark;\n    delete schema.encoding;\n    delete schema.selection;\n    if (isRepeatSchema(schema) && abstraction.encoding !== undefined) {\n        if (abstraction.encoding.x !== undefined) {\n            abstraction.encoding.x = {\n                field: { repeat: 'column' },\n                type: abstraction.encoding.x.type\n            };\n        }\n        if (abstraction.encoding.y !== undefined) {\n            abstraction.encoding.y = {\n                field: { repeat: 'row' },\n                type: abstraction.encoding.y.type\n            };\n        }\n    }\n    else if (isFacetSchema(schema)) {\n        if (abstraction.encoding.facet !== undefined) {\n            delete abstraction.encoding.facet;\n        }\n    }\n    return abstraction;\n}\nexports.getAtomicAbstraction = getAtomicAbstraction;\n;\nfunction setSingleViewProperties(schema, abstraction) {\n    if (schema.bounds !== undefined) {\n        abstraction.bounds = JSON.parse(JSON.stringify(schema.bounds));\n    }\n    if (schema.spacing !== undefined) {\n        abstraction.spacing = JSON.parse(JSON.stringify(schema.spacing));\n    }\n    if (schema.columns !== undefined) {\n        abstraction.columns = JSON.parse(JSON.stringify(schema.columns));\n    }\n    if (schema.width !== undefined) {\n        abstraction.width = JSON.parse(JSON.stringify(schema.width));\n    }\n    if (schema.height !== undefined) {\n        abstraction.height = JSON.parse(JSON.stringify(schema.height));\n    }\n    if (schema.data !== undefined) {\n        abstraction.data = JSON.parse(JSON.stringify(schema.data));\n    }\n    if (schema.datasets !== undefined) {\n        abstraction.datasets = JSON.parse(JSON.stringify(schema.datasets));\n    }\n    if (schema.transform !== undefined) {\n        abstraction.transform = JSON.parse(JSON.stringify(schema.transform));\n    }\n    if (schema.config !== undefined) {\n        abstraction.config = JSON.parse(JSON.stringify(schema.config));\n    }\n    if (schema.resolve !== undefined) {\n        abstraction.resolve = JSON.parse(JSON.stringify(schema.resolve));\n    }\n    return abstraction;\n}\nexports.setSingleViewProperties = setSingleViewProperties;\n;\nfunction getJoinedDatasetsOfChildNodes(template) {\n    const joinedDatasets = {};\n    const visualElements = template.getFlatHierarchy();\n    const childDatasets = visualElements\n        .map(d => d.datasets)\n        .filter(d => d !== undefined && d !== null);\n    childDatasets.forEach(datasets => {\n        const datasetKeys = Object.keys(datasets);\n        datasetKeys.forEach(datasetKey => {\n            joinedDatasets[datasetKey] = datasets[datasetKey];\n        });\n    });\n    return joinedDatasets;\n}\nexports.getJoinedDatasetsOfChildNodes = getJoinedDatasetsOfChildNodes;\n;\nfunction getAllDatasetsInHierarchy(template) {\n    const allDatasetsInHierarchy = getJoinedDatasetsOfChildNodes(template);\n    let rootTemplate = template;\n    // only get datasets that are direct ancestors of the template, as siblings are not relevant\n    while (rootTemplate.parent !== null) {\n        rootTemplate = rootTemplate.parent;\n        if (rootTemplate.datasets) {\n            Object.keys(rootTemplate.datasets).forEach(key => {\n                allDatasetsInHierarchy[key] = rootTemplate.datasets[key];\n            });\n        }\n    }\n    return allDatasetsInHierarchy;\n}\nexports.getAllDatasetsInHierarchy = getAllDatasetsInHierarchy;\nfunction getAbstraction(schema) {\n    let abstraction = null;\n    if (isAtomicSchema(schema)) {\n        // atomic can either be content of a plot or repeat, indicated by the compositionpropety being\n        // set to 'spec'\n        abstraction = getAtomicAbstraction(schema);\n    }\n    else if (isOverlaySchema(schema)) {\n        abstraction = getLayerAbstraction(schema);\n    }\n    else if (isRepeatSchema(schema)) {\n        abstraction = getRepeatAbstraction(schema);\n    }\n    else if (isConcatenateSchema(schema)) {\n        abstraction = getConcatAbstraction(schema);\n    }\n    else if (isFacetSchema(schema)) {\n        if (isInlineFacetSchema(schema)) {\n            abstraction = getAtomicAbstraction(schema);\n        }\n        else {\n            abstraction = getFacetAbstraction(schema);\n        }\n    }\n    abstraction = setSingleViewProperties(schema, abstraction);\n    return abstraction;\n}\nexports.getAbstraction = getAbstraction;\n;\nfunction setSchemaSize(schema, width, height) {\n    if (isPlotSchema(schema)) {\n        schema.width = width;\n        schema.height = height;\n    }\n    else if (isConcatenateSchema(schema)) {\n        schema.width = width;\n        schema.height = height;\n    }\n    else if (isRepeatSchema(schema)) {\n        schema.spec.width = width;\n        schema.spec.height = height;\n    }\n    else if (isFacetSchema(schema)) {\n        if (isInlineFacetSchema(schema)) {\n            schema.width = width;\n            schema.height = height;\n        }\n        else {\n            schema.spec.width = width;\n            schema.spec.height = height;\n        }\n    }\n    return schema;\n}\nexports.setSchemaSize = setSchemaSize;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass GraphNode {\n    constructor() {\n        this.id = `node${Math.floor(Math.random() * 1000000)}`;\n        this.myName = '';\n        this.parent = null;\n        this.children = [];\n    }\n    getAllChildNodes() {\n        const allChildNodes = this.children.map(n => n);\n        this.children.forEach(childNode => {\n            allChildNodes.push(...childNode.getAllChildNodes());\n        });\n        return allChildNodes;\n    }\n    getFullAncestry() {\n        const allParentNodes = [this];\n        let workingNode = this.parent;\n        if (this.parent === null) {\n            return allParentNodes;\n        }\n        // go up in the node's hierarchy as far as possible\n        while (workingNode !== null) {\n            allParentNodes.push(workingNode);\n            workingNode = workingNode.parent;\n        }\n        return allParentNodes.reverse();\n    }\n    get name() {\n        if (this.myName.length === 0) {\n            return this.id;\n        }\n        return this.myName;\n    }\n    set name(name) {\n        if (name === undefined) {\n            return;\n        }\n        this.myName = name;\n    }\n}\nexports.GraphNode = GraphNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GraphNode_1 = require(\"../GraphNode\");\nclass DatasetNode extends GraphNode_1.GraphNode {\n    constructor() {\n        super();\n        this.fields = [];\n        this.values = [];\n    }\n    getTransform() {\n        // datasets are roots in a data graph and therefore do not have parent or child transforms\n        return [];\n    }\n}\nexports.DatasetNode = DatasetNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DatasetNode_1 = require(\"../Datasets/DatasetNode\");\nconst GraphNode_1 = require(\"../GraphNode\");\nclass TransformNode extends GraphNode_1.GraphNode {\n    getRootDatasetNode() {\n        if (this.parent === null) {\n            return null;\n        }\n        let workingNode = this.parent;\n        // go up in the node's hierarchy as far as possible\n        while (workingNode.parent !== null) {\n            workingNode = workingNode.parent;\n        }\n        if (!(workingNode instanceof DatasetNode_1.DatasetNode)) {\n            return null;\n        }\n        return workingNode;\n    }\n    getSchema() {\n        const rootDataset = this.getRootDatasetNode();\n        return rootDataset.getSchema();\n    }\n    setSchema(data) {\n        return;\n    }\n    getTransform() {\n        const transformNodesOnPathToRoot = this.getFullAncestry();\n        const transforms = transformNodesOnPathToRoot\n            .filter(n => n instanceof TransformNode)\n            .map((n) => n.transform);\n        return transforms;\n    }\n}\nexports.TransformNode = TransformNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transformNames = ['aggregate', 'bin', 'calculate', 'filter', 'flatten',\n    'fold', 'impute', 'join aggregate', 'lookup', 'sample', 'stack', 'time unit'];\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DatasetNode_1 = require(\"./DatasetNode\");\nclass InlineDatasetNode extends DatasetNode_1.DatasetNode {\n    getSchema() {\n        return {\n            name: this.name,\n            values: this.values,\n            format: this.format\n        };\n    }\n    setSchema(data) {\n        this.name = data.name;\n        this.values = data.values;\n        this.format = data.format;\n    }\n}\nexports.InlineDatasetNode = InlineDatasetNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DatasetNode_1 = require(\"./DatasetNode\");\nclass NamedDataSourceNode extends DatasetNode_1.DatasetNode {\n    getSchema() {\n        return {\n            name: this.name,\n            format: this.format\n        };\n    }\n    setSchema(data) {\n        this.name = data.name;\n        this.format = data.format;\n    }\n}\nexports.NamedDataSourceNode = NamedDataSourceNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DatasetNode_1 = require(\"./DatasetNode\");\nclass URLDatasetNode extends DatasetNode_1.DatasetNode {\n    getSchema() {\n        return {\n            name: this.name,\n            url: this.url,\n            format: this.format\n        };\n    }\n    setSchema(data) {\n        this.name = data.name;\n        this.url = data.url;\n        this.format = data.format;\n    }\n}\nexports.URLDatasetNode = URLDatasetNode;\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\n","export default function autoType(object) {\n  for (var key in object) {\n    var value = object[key].trim(), number;\n    if (!value) value = null;\n    else if (value === \"true\") value = true;\n    else if (value === \"false\") value = false;\n    else if (value === \"NaN\") value = NaN;\n    else if (!isNaN(number = +value)) value = number;\n    else if (/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/.test(value)) value = new Date(value);\n    else continue;\n    object[key] = value;\n  }\n  return object;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst d3_dsv_1 = require(\"d3-dsv\");\nconst URLDatasetNode_1 = require(\"./Datasets/URLDatasetNode\");\nconst TranformNode_1 = require(\"./Transforms/TranformNode\");\nconst InlineDatasetNode_1 = require(\"./Datasets/InlineDatasetNode\");\nclass DataImporter {\n    constructor() {\n        this.onNewDataset = null;\n        this.datasets = new Map();\n    }\n    getFileNameFromURL(url) {\n        let name = url;\n        // trim off the file type and use the string before it in the url\n        if (url.includes('.json')) {\n            name = url.match(/\\/(\\w+)\\.json/)[1];\n        }\n        else if (url.includes('.csv')) {\n            name = url.match(/(\\w+)\\.csv/)[1];\n        }\n        return name;\n    }\n    // adapted from https://stackoverflow.com/a/26298948\n    readFileFromDisk(e) {\n        const file = e.target.files[0];\n        if (!file) {\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (onloadEvent) => {\n            const contents = onloadEvent.target;\n            this.convertCSVToDatasetNode(contents.result);\n        };\n        reader.readAsText(file);\n    }\n    convertCSVToDatasetNode(contents) {\n        const csvContent = d3_dsv_1.csvParse(contents);\n        const datasetNode = new InlineDatasetNode_1.InlineDatasetNode();\n        datasetNode.fields = csvContent.columns;\n        datasetNode.name = 'new Dataset';\n        datasetNode.values = csvContent;\n        if (this.onNewDataset !== null) {\n            this.onNewDataset(datasetNode);\n        }\n    }\n    fetchCSV(preset, urlNode = new URLDatasetNode_1.URLDatasetNode()) {\n        const reader = new FileReader();\n        const node = new InlineDatasetNode_1.InlineDatasetNode();\n        reader.onloadend = (e) => {\n            const dataArray = d3_dsv_1.csvParse(e.srcElement.result);\n            node.fields = Object.keys(dataArray[0]);\n            node.values = dataArray;\n            node.name = this.getFileNameFromURL(preset.url);\n            this.datasets.set(urlNode.url, node);\n            if (this.onNewDataset !== null) {\n                this.onNewDataset(node);\n            }\n        };\n        fetch(preset.url)\n            .then(res => res.blob())\n            .then(blob => reader.readAsText(blob));\n    }\n    fetchJSON(preset, urlNode = new URLDatasetNode_1.URLDatasetNode()) {\n        const node = new InlineDatasetNode_1.InlineDatasetNode();\n        fetch(preset.url)\n            .then(response => response.json())\n            .then(dataArray => {\n            node.fields = Object.keys(dataArray[0]);\n            node.values = dataArray;\n            node.name = this.getFileNameFromURL(preset.url);\n            node.format = preset.format;\n            this.datasets.set(urlNode.url, node);\n            if (this.onNewDataset !== null) {\n                this.onNewDataset(node);\n            }\n        });\n    }\n    importPreset(preset, node) {\n        if (this.datasets.get(preset.url) !== undefined) {\n            return;\n        }\n        if (preset.url.includes('.json')) {\n            this.fetchJSON(preset, node);\n        }\n        else if (preset.url.includes('.csv')) {\n            this.fetchCSV(preset, node);\n        }\n    }\n    loadFieldsAndValuesToNode(node) {\n        if (node instanceof URLDatasetNode_1.URLDatasetNode) {\n            this.importPreset(node.getSchema(), node);\n        }\n        else if (node instanceof InlineDatasetNode_1.InlineDatasetNode) {\n            const values = node.values;\n            if (values === undefined || values.length === 0) {\n                return;\n            }\n            node.fields = Object.keys(values[0]);\n        }\n        else if (node instanceof TranformNode_1.TransformNode) {\n            const rootDatasetNode = node.getRootDatasetNode();\n            if (rootDatasetNode !== null) {\n                this.loadFieldsAndValuesToNode(rootDatasetNode);\n            }\n        }\n    }\n}\nexports.DataImporter = DataImporter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GraphNode_1 = require(\"./GraphNode\");\nexports.GraphNode = GraphNode_1.GraphNode;\nvar TranformNode_1 = require(\"./Transforms/TranformNode\");\nexports.TransformNode = TranformNode_1.TransformNode;\nvar TransformTypes_1 = require(\"./Transforms/TransformTypes\");\nexports.transformNames = TransformTypes_1.transformNames;\nvar DatasetNode_1 = require(\"./Datasets/DatasetNode\");\nexports.DatasetNode = DatasetNode_1.DatasetNode;\nvar InlineDatasetNode_1 = require(\"./Datasets/InlineDatasetNode\");\nexports.InlineDatasetNode = InlineDatasetNode_1.InlineDatasetNode;\nvar NamedDataSourceNode_1 = require(\"./Datasets/NamedDataSourceNode\");\nexports.NamedDataSourceNode = NamedDataSourceNode_1.NamedDataSourceNode;\nvar URLDatasetNode_1 = require(\"./Datasets/URLDatasetNode\");\nexports.URLDatasetNode = URLDatasetNode_1.URLDatasetNode;\nvar DataImporter_1 = require(\"./DataImporter\");\nexports.DataImporter = DataImporter_1.DataImporter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst data_1 = require(\"vega-lite/build/src/data\");\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nconst ConcatTemplate_1 = require(\"./ConcatTemplate\");\nconst FacetTemplate_1 = require(\"./FacetTemplate\");\nconst LayerTemplate_1 = require(\"./LayerTemplate\");\nconst PlotTemplate_1 = require(\"./PlotTemplate\");\nconst RepeatTemplate_1 = require(\"./RepeatTemplate\");\nconst SpecUtils_1 = require(\"./SpecUtils\");\nconst DataModel_1 = require(\"../DataModel\");\nclass SpecCompiler {\n    getBasicSchema(template) {\n        // check for empty templates, which should also generate valid specs\n        if (template && template.visualElements.length === 0 && template.parent === null) {\n            return {\n                $schema: 'https://vega.github.io/schema/vega-lite/v3.json',\n                mark: 'area',\n                encoding: {}\n            };\n        }\n        return {\n            $schema: 'https://vega.github.io/schema/vega-lite/v3.json'\n        };\n    }\n    setCompositionProperties(schema, template) {\n        if (template.columns !== undefined) {\n            schema.columns = template.columns;\n        }\n        if (template.spacing !== undefined) {\n            schema.spacing = template.spacing;\n        }\n        return schema;\n    }\n    setToplevelProperties(schema, template, includeData = true) {\n        if (includeData && !!template.data) {\n            schema.data = template.data;\n            const dataNode = template.dataTransformationNode;\n            if (dataNode instanceof DataModel_1.TransformNode) {\n                schema.transform = dataNode.getTransform();\n            }\n            else if (dataNode instanceof DataModel_1.DatasetNode) {\n                schema.transform = dataNode.getAllChildNodes().map(node => node.transform);\n            }\n        }\n        if (includeData && !!template.datasets) {\n            schema.datasets = template.datasets;\n        }\n        if (template.bounds !== undefined) {\n            schema.bounds = template.bounds;\n        }\n        if (template.height !== undefined) {\n            schema.height = template.height;\n        }\n        if (template.width !== undefined) {\n            schema.width = template.width;\n        }\n        if (template.config !== undefined) {\n            schema.config = template.config;\n        }\n        if (template instanceof CompositionTemplate_1.CompositionTemplate) {\n            schema = this.setCompositionProperties(schema, template);\n        }\n        return schema;\n    }\n    getRootTemplate(template) {\n        let workingNode = template;\n        while (workingNode.parent !== null) {\n            workingNode = workingNode.parent;\n        }\n        return workingNode;\n    }\n    abstractCompositions(schema, compositionProperty) {\n        const abstraction = SpecUtils_1.getAbstraction(schema);\n        if (compositionProperty === 'spec' || compositionProperty === 'facet') {\n            schema[compositionProperty] = abstraction;\n        }\n        else {\n            schema[compositionProperty] = [abstraction];\n        }\n        return schema;\n    }\n    applyRepeatLayout(template, schema) {\n        schema = this.abstractCompositions(schema, 'spec');\n        // parent must be repeat template to reach this branch\n        schema.repeat = template.parent.repeat;\n        return schema;\n    }\n    applyFacetLayout(template, schema) {\n        const parentTemplate = template.parent;\n        if (parentTemplate.isInlineFacetted) {\n            if (schema.encoding === undefined) {\n                schema.encoding = {};\n            }\n            schema.encoding.facet = parentTemplate.facet;\n        }\n        else {\n            schema = this.abstractCompositions(schema, 'spec');\n            schema.facet = parentTemplate.facet;\n        }\n        return schema;\n    }\n    applyConcatLayout(schema) {\n        return this.abstractCompositions(schema, 'hconcat');\n    }\n    applyOverlayLayout(schema) {\n        return this.abstractCompositions(schema, 'layer');\n    }\n    applyCompositionLayout(template, schema, composition) {\n        if (composition === 'repeat') {\n            this.applyRepeatLayout(template, schema);\n        }\n        else if (composition === 'facet') {\n            this.applyFacetLayout(template, schema);\n        }\n        else if (composition === 'concatenate') {\n            this.applyConcatLayout(schema);\n        }\n        else if (composition === 'overlay') {\n            this.applyOverlayLayout(schema);\n        }\n        return schema;\n    }\n    getDataInHierarchy(template) {\n        // data can be stored either in a child node or on the top level template, therefore find the\n        // top level, get its flat hierarchy and find a template with a dataset bound to it\n        let topLevelTemplate = template;\n        let data = null;\n        while (topLevelTemplate.parent !== null) {\n            if (topLevelTemplate.data !== undefined && topLevelTemplate.data !== null) {\n                data = topLevelTemplate.data;\n                return data;\n            }\n            topLevelTemplate = topLevelTemplate.parent;\n        }\n        const flatHierarchy = topLevelTemplate.getFlatHierarchy();\n        const dataTemplate = flatHierarchy.find(t => {\n            return t.data !== null && t.data !== undefined;\n        });\n        // could occur when template has no parent, no visualelements and no data (i.e. is \"empty\")\n        if (dataTemplate === undefined) {\n            return {\n                values: [],\n            };\n        }\n        data = dataTemplate.data;\n        return data;\n    }\n    getDatasetsInAncestry(template) {\n        // if the template references a namedDataset, also include that dataset.\n        if (template.data !== null && !data_1.isNamedData(template.data)) {\n            return null;\n        }\n        let workingNode = template;\n        while (workingNode !== null && (workingNode.datasets === null || workingNode.datasets === undefined)) {\n            workingNode = workingNode.parent;\n        }\n        if (workingNode === null) {\n            return null;\n        }\n        return workingNode.datasets;\n    }\n    getRepeatSpec(parentTemplate) {\n        const template = parentTemplate.visualElements[0];\n        const layout = parentTemplate.layout;\n        let schema = null;\n        schema = this.getVegaSpecification(template, false);\n        if (schema !== null) {\n            schema = this.applyCompositionLayout(template, schema, layout);\n        }\n        return schema;\n    }\n    getFacetSpec(parentTemplate) {\n        const encodingTemplate = parentTemplate.visualElements[0];\n        let schema = null;\n        // use the encodings from the child template, then apply facetting properties\n        schema = this.getVegaSpecification(encodingTemplate, false);\n        schema = this.applyCompositionLayout(encodingTemplate, schema, 'facet');\n        return schema;\n    }\n    getMultiViewSpec(template, useOverwrittenEncodings) {\n        const templates = template.visualElements;\n        const schema = this.getBasicSchema();\n        const overwriteChildEncodings = !(template instanceof RepeatTemplate_1.RepeatTemplate) && useOverwrittenEncodings;\n        const individualSchemas = templates\n            .map(t => this.getVegaSpecification(t, false, overwriteChildEncodings));\n        const individualViewAbstractions = individualSchemas\n            .map(s => SpecUtils_1.getAbstraction(s));\n        if (template instanceof ConcatTemplate_1.ConcatTemplate) {\n            if (template.isVertical) {\n                schema.vconcat = individualViewAbstractions;\n            }\n            else {\n                schema.hconcat = individualViewAbstractions;\n            }\n        }\n        else if (template instanceof LayerTemplate_1.LayerTemplate) {\n            if (template.groupEncodings.size > 0) {\n                schema.encoding = {};\n                template.groupEncodings.forEach((value, key) => schema.encoding[key] = value);\n                individualViewAbstractions.forEach(abstraction => {\n                    delete abstraction.data;\n                    delete abstraction.datasets;\n                });\n            }\n            schema.layer = individualViewAbstractions;\n        }\n        return schema;\n    }\n    getPlotSchema(template, inferData, useOverwrittenEncodings) {\n        const schema = this.getBasicSchema();\n        let data = template.data;\n        let datasets = template.datasets;\n        if (inferData) {\n            data = this.getDataInHierarchy(template);\n            datasets = this.getDatasetsInAncestry(template);\n        }\n        if (data !== undefined && data !== null) {\n            schema.data = data;\n        }\n        if (datasets !== undefined && datasets !== null) {\n            schema.datasets = datasets;\n        }\n        schema.mark = template.mark;\n        if (template.selection !== undefined) {\n            schema.selection = template.selection;\n        }\n        schema.encoding = {};\n        template.encodings.forEach((value, key) => {\n            schema.encoding[key] = value;\n        });\n        // do not overwrite encodings of repeated plots, as this would in turn use a mapping to a field\n        // instead of the repeated column/row\n        if (useOverwrittenEncodings) {\n            template.overwrittenEncodings.forEach((value, key) => {\n                schema.encoding[key] = value;\n            });\n        }\n        return schema;\n    }\n    getCompositionSchema(template, inferData, useOverwrittenEncodings) {\n        let schema = null;\n        let data = null;\n        let datasets = null;\n        if (template.visualElements.length === 0) {\n            schema = this.getBasicSchema(template);\n        }\n        else if (template instanceof RepeatTemplate_1.RepeatTemplate) {\n            schema = this.getRepeatSpec(template);\n        }\n        else if (template instanceof FacetTemplate_1.FacetTemplate) {\n            schema = this.getFacetSpec(template);\n        }\n        else {\n            schema = this.getMultiViewSpec(template, useOverwrittenEncodings);\n        }\n        if (inferData) {\n            data = this.getDataInHierarchy(template);\n            datasets = SpecUtils_1.getAllDatasetsInHierarchy(template);\n        }\n        else {\n            data = template.data;\n            datasets = template.datasets;\n        }\n        if (data !== undefined && data !== null) {\n            schema.data = data;\n        }\n        if (datasets !== undefined && datasets !== null) {\n            schema.datasets = datasets;\n        }\n        if (template.resolve !== undefined) {\n            schema.resolve = template.resolve;\n        }\n        return schema;\n    }\n    getVegaSpecification(template, inferProperties = false, useOverwrittenEncodings = false) {\n        let schema = null;\n        if (template instanceof PlotTemplate_1.PlotTemplate) {\n            schema = this.getPlotSchema(template, inferProperties, useOverwrittenEncodings);\n        }\n        else if (template instanceof CompositionTemplate_1.CompositionTemplate) {\n            schema = this.getCompositionSchema(template, inferProperties, useOverwrittenEncodings);\n        }\n        schema = this.setToplevelProperties(schema, template);\n        if (inferProperties) {\n            const rootTemplate = this.getRootTemplate(template);\n            schema = this.setToplevelProperties(schema, rootTemplate, false);\n        }\n        return schema;\n    }\n}\nexports.SpecCompiler = SpecCompiler;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {AggregateOp} from 'vega';\nimport {isString, toSet} from 'vega-util';\nimport {contains, Flag, flagKeys} from './util';\n\nconst AGGREGATE_OP_INDEX: Flag<AggregateOp> = {\n  argmax: 1,\n  argmin: 1,\n  average: 1,\n  count: 1,\n  distinct: 1,\n  max: 1,\n  mean: 1,\n  median: 1,\n  min: 1,\n  missing: 1,\n  q1: 1,\n  q3: 1,\n  ci0: 1,\n  ci1: 1,\n  stderr: 1,\n  stdev: 1,\n  stdevp: 1,\n  sum: 1,\n  valid: 1,\n  values: 1,\n  variance: 1,\n  variancep: 1\n};\n\nexport interface ArgminDef {\n  argmin: string;\n}\n\nexport interface ArgmaxDef {\n  argmax: string;\n}\n\nexport type Aggregate = AggregateOp | ArgmaxDef | ArgminDef;\n\nexport function isArgminDef(a: Aggregate | string): a is ArgminDef {\n  return !!a && !!a['argmin'];\n}\n\nexport function isArgmaxDef(a: Aggregate | string): a is ArgmaxDef {\n  return !!a && !!a['argmax'];\n}\n\nexport const AGGREGATE_OPS = flagKeys(AGGREGATE_OP_INDEX);\n\nexport function isAggregateOp(a: string | ArgminDef | ArgmaxDef): a is AggregateOp {\n  return isString(a) && !!AGGREGATE_OP_INDEX[a];\n}\n\nexport const COUNTING_OPS: AggregateOp[] = ['count', 'valid', 'missing', 'distinct'];\n\nexport function isCountingAggregateOp(aggregate: string | Aggregate): boolean {\n  return aggregate && isString(aggregate) && contains(COUNTING_OPS, aggregate);\n}\n\nexport function isMinMaxOp(aggregate: Aggregate | string): boolean {\n  return aggregate && isString(aggregate) && contains(['min', 'max'], aggregate);\n}\n\n/** Additive-based aggregation operations.  These can be applied to stack. */\nexport const SUM_OPS: AggregateOp[] = ['count', 'sum', 'distinct', 'valid', 'missing'];\n\n/**\n * Aggregation operators that always produce values within the range [domainMin, domainMax].\n */\nexport const SHARED_DOMAIN_OPS: AggregateOp[] = ['mean', 'average', 'median', 'q1', 'q3', 'min', 'max'];\n\nexport const SHARED_DOMAIN_OP_INDEX = toSet(SHARED_DOMAIN_OPS);\n","/*\n * Constants and utilities for encoding channels (Visual variables)\n * such as 'x', 'y', 'color'.\n */\n\nimport {RangeType} from './compile/scale/type';\nimport {Encoding} from './encoding';\nimport {Mark} from './mark';\nimport {EncodingFacetMapping, EncodingFacetMapping as ExtendedFacetMapping} from './spec/facet';\nimport {Flag, flagKeys} from './util';\n\nexport type Channel = keyof Encoding<any> | keyof ExtendedFacetMapping<any>;\n\n// Facet\nexport const ROW: 'row' = 'row';\nexport const COLUMN: 'column' = 'column';\n\nexport const FACET: 'facet' = 'facet';\n\n// Position\nexport const X: 'x' = 'x';\nexport const Y: 'y' = 'y';\nexport const X2: 'x2' = 'x2';\nexport const Y2: 'y2' = 'y2';\n// Geo Position\nexport const LATITUDE: 'latitude' = 'latitude';\nexport const LONGITUDE: 'longitude' = 'longitude';\nexport const LATITUDE2: 'latitude2' = 'latitude2';\nexport const LONGITUDE2: 'longitude2' = 'longitude2';\n\n// Mark property with scale\nexport const COLOR: 'color' = 'color';\n\nexport const FILL: 'fill' = 'fill';\n\nexport const STROKE: 'stroke' = 'stroke';\n\nexport const SHAPE: 'shape' = 'shape';\nexport const SIZE: 'size' = 'size';\nexport const OPACITY: 'opacity' = 'opacity';\nexport const FILLOPACITY: 'fillOpacity' = 'fillOpacity';\n\nexport const STROKEOPACITY: 'strokeOpacity' = 'strokeOpacity';\n\nexport const STROKEWIDTH: 'strokeWidth' = 'strokeWidth';\n\n// Non-scale channel\nexport const TEXT: 'text' = 'text';\nexport const ORDER: 'order' = 'order';\nexport const DETAIL: 'detail' = 'detail';\nexport const KEY: 'key' = 'key';\n\nexport const TOOLTIP: 'tooltip' = 'tooltip';\nexport const HREF: 'href' = 'href';\n\nexport type PositionChannel = 'x' | 'y' | 'x2' | 'y2';\n\nexport type GeoPositionChannel = 'longitude' | 'latitude' | 'longitude2' | 'latitude2';\n\nexport function isGeoPositionChannel(c: Channel): c is GeoPositionChannel {\n  switch (c) {\n    case LATITUDE:\n    case LATITUDE2:\n    case LONGITUDE:\n    case LONGITUDE2:\n      return true;\n  }\n  return false;\n}\n\nexport function getPositionChannelFromLatLong(channel: GeoPositionChannel): PositionChannel {\n  switch (channel) {\n    case LATITUDE:\n      return 'y';\n    case LATITUDE2:\n      return 'y2';\n    case LONGITUDE:\n      return 'x';\n    case LONGITUDE2:\n      return 'x2';\n  }\n}\n\nexport const GEOPOSITION_CHANNEL_INDEX: Flag<GeoPositionChannel> = {\n  longitude: 1,\n  longitude2: 1,\n  latitude: 1,\n  latitude2: 1\n};\n\nexport const GEOPOSITION_CHANNELS = flagKeys(GEOPOSITION_CHANNEL_INDEX);\n\nconst UNIT_CHANNEL_INDEX: Flag<keyof Encoding<any>> = {\n  // position\n  x: 1,\n  y: 1,\n  x2: 1,\n  y2: 1,\n\n  ...GEOPOSITION_CHANNEL_INDEX,\n\n  // color\n  color: 1,\n  fill: 1,\n  stroke: 1,\n\n  // other non-position with scale\n  opacity: 1,\n  fillOpacity: 1,\n  strokeOpacity: 1,\n\n  strokeWidth: 1,\n  size: 1,\n  shape: 1,\n\n  // channels without scales\n  order: 1,\n  text: 1,\n  detail: 1,\n  key: 1,\n  tooltip: 1,\n  href: 1\n};\n\nexport type ColorChannel = 'color' | 'fill' | 'stroke';\n\nexport function isColorChannel(channel: Channel): channel is ColorChannel {\n  return channel === 'color' || channel === 'fill' || channel === 'stroke';\n}\n\nexport type FacetChannel = keyof EncodingFacetMapping<any>;\n\nconst FACET_CHANNEL_INDEX: Flag<keyof EncodingFacetMapping<any>> = {\n  row: 1,\n  column: 1,\n  facet: 1\n};\n\nexport const FACET_CHANNELS = flagKeys(FACET_CHANNEL_INDEX);\n\nconst CHANNEL_INDEX = {\n  ...UNIT_CHANNEL_INDEX,\n  ...FACET_CHANNEL_INDEX\n};\n\nexport const CHANNELS = flagKeys(CHANNEL_INDEX);\n\nconst {order: _o, detail: _d, ...SINGLE_DEF_CHANNEL_INDEX} = CHANNEL_INDEX;\nconst {order: _o1, detail: _d1, row: _r, column: _c, facet: _f, ...SINGLE_DEF_UNIT_CHANNEL_INDEX} = CHANNEL_INDEX;\n/**\n * Channels that cannot have an array of channelDef.\n * model.fieldDef, getFieldDef only work for these channels.\n *\n * (The only two channels that can have an array of channelDefs are \"detail\" and \"order\".\n * Since there can be multiple fieldDefs for detail and order, getFieldDef/model.fieldDef\n * are not applicable for them.  Similarly, selection projection won't work with \"detail\" and \"order\".)\n */\n\nexport const SINGLE_DEF_CHANNELS: SingleDefChannel[] = flagKeys(SINGLE_DEF_CHANNEL_INDEX);\n\nexport const SINGLE_DEF_UNIT_CHANNELS: SingleDefUnitChannel[] = flagKeys(SINGLE_DEF_UNIT_CHANNEL_INDEX);\n\n// Using the following line leads to TypeError: Cannot read property 'elementTypes' of undefined\n// when running the schema generator\n// export type SingleDefChannel = typeof SINGLE_DEF_CHANNELS[0];\n\nexport type SingleDefUnitChannel =\n  | 'x'\n  | 'y'\n  | 'x2'\n  | 'y2'\n  | 'longitude'\n  | 'latitude'\n  | 'longitude2'\n  | 'latitude2'\n  | 'color'\n  | 'fill'\n  | 'stroke'\n  | 'strokeWidth'\n  | 'size'\n  | 'shape'\n  | 'fillOpacity'\n  | 'strokeOpacity'\n  | 'opacity'\n  | 'text'\n  | 'tooltip'\n  | 'href'\n  | 'key';\n\nexport type SingleDefChannel = SingleDefUnitChannel | 'row' | 'column' | 'facet';\n\nexport function isSingleDefUnitChannel(str: string): str is SingleDefUnitChannel {\n  return !!SINGLE_DEF_UNIT_CHANNEL_INDEX[str];\n}\n\nexport function isChannel(str: string): str is Channel {\n  return !!CHANNEL_INDEX[str];\n}\n\nexport type SecondaryRangeChannel = 'x2' | 'y2' | 'latitude2' | 'longitude2';\n\nexport const SECONDARY_RANGE_CHANNEL: SecondaryRangeChannel[] = ['x2', 'y2', 'latitude2', 'longitude2'];\n\nexport function isSecondaryRangeChannel(c: Channel): c is SecondaryRangeChannel {\n  const main = getMainRangeChannel(c);\n  return main !== c;\n}\n\nexport function getMainRangeChannel(channel: Channel): Channel {\n  switch (channel) {\n    case 'x2':\n      return 'x';\n    case 'y2':\n      return 'y';\n    case 'latitude2':\n      return 'latitude';\n    case 'longitude2':\n      return 'longitude';\n  }\n  return channel;\n}\n\n// CHANNELS without COLUMN, ROW\nexport const UNIT_CHANNELS = flagKeys(UNIT_CHANNEL_INDEX);\n\n// NONPOSITION_CHANNELS = UNIT_CHANNELS without X, Y, X2, Y2;\nconst {\n  x: _x,\n  y: _y,\n  // x2 and y2 share the same scale as x and y\n  x2: _x2,\n  y2: _y2,\n  latitude: _latitude,\n  longitude: _longitude,\n  latitude2: _latitude2,\n  longitude2: _longitude2,\n  // The rest of unit channels then have scale\n  ...NONPOSITION_CHANNEL_INDEX\n} = UNIT_CHANNEL_INDEX;\n\nexport const NONPOSITION_CHANNELS = flagKeys(NONPOSITION_CHANNEL_INDEX);\nexport type NonPositionChannel = typeof NONPOSITION_CHANNELS[0];\n\n// POSITION_SCALE_CHANNELS = X and Y;\nconst POSITION_SCALE_CHANNEL_INDEX: {x: 1; y: 1} = {x: 1, y: 1};\nexport const POSITION_SCALE_CHANNELS = flagKeys(POSITION_SCALE_CHANNEL_INDEX);\nexport type PositionScaleChannel = typeof POSITION_SCALE_CHANNELS[0];\n\n// NON_POSITION_SCALE_CHANNEL = SCALE_CHANNELS without X, Y\nconst {\n  // x2 and y2 share the same scale as x and y\n  // text and tooltip have format instead of scale,\n  // href has neither format, nor scale\n  text: _t,\n  tooltip: _tt,\n  href: _hr,\n  // detail and order have no scale\n  detail: _dd,\n  key: _k,\n  order: _oo,\n  ...NONPOSITION_SCALE_CHANNEL_INDEX\n} = NONPOSITION_CHANNEL_INDEX;\nexport const NONPOSITION_SCALE_CHANNELS = flagKeys(NONPOSITION_SCALE_CHANNEL_INDEX);\nexport type NonPositionScaleChannel = typeof NONPOSITION_SCALE_CHANNELS[0];\n\nexport function isNonPositionScaleChannel(channel: Channel): channel is NonPositionScaleChannel {\n  return !!NONPOSITION_CHANNEL_INDEX[channel];\n}\n\n/**\n * @returns whether Vega supports legends for a particular channel\n */\nexport function supportLegend(channel: NonPositionScaleChannel) {\n  switch (channel) {\n    case COLOR:\n    case FILL:\n    case STROKE:\n    case SIZE:\n    case SHAPE:\n    case OPACITY:\n      return true;\n\n    case FILLOPACITY:\n    case STROKEOPACITY:\n    case STROKEWIDTH:\n      return false;\n  }\n}\n\n// Declare SCALE_CHANNEL_INDEX\nconst SCALE_CHANNEL_INDEX = {\n  ...POSITION_SCALE_CHANNEL_INDEX,\n  ...NONPOSITION_SCALE_CHANNEL_INDEX\n};\n\n/** List of channels with scales */\nexport const SCALE_CHANNELS = flagKeys(SCALE_CHANNEL_INDEX);\nexport type ScaleChannel = typeof SCALE_CHANNELS[0];\n\nexport function isScaleChannel(channel: Channel): channel is ScaleChannel {\n  return !!SCALE_CHANNEL_INDEX[channel];\n}\n\nexport type SupportedMark = {[mark in Mark]?: 'always' | 'binned'};\n\n/**\n * Return whether a channel supports a particular mark type.\n * @param channel  channel name\n * @param mark the mark type\n * @return whether the mark supports the channel\n */\nexport function supportMark(channel: Channel, mark: Mark) {\n  return getSupportedMark(channel)[mark];\n}\n\n/**\n * Return a dictionary showing whether a channel supports mark type.\n * @param channel\n * @return A dictionary mapping mark types to 'always', 'binned', or undefined\n */\nfunction getSupportedMark(channel: Channel): SupportedMark {\n  switch (channel) {\n    case COLOR:\n    case FILL:\n    case STROKE:\n    // falls through\n\n    case DETAIL:\n    case KEY:\n    case TOOLTIP:\n    case HREF:\n    case ORDER: // TODO: revise (order might not support rect, which is not stackable?)\n    case OPACITY:\n    case FILLOPACITY:\n    case STROKEOPACITY:\n    case STROKEWIDTH:\n    // falls through\n\n    case FACET:\n    case ROW: // falls through\n    case COLUMN:\n      return {\n        // all marks\n        point: 'always',\n        tick: 'always',\n        rule: 'always',\n        circle: 'always',\n        square: 'always',\n        bar: 'always',\n        rect: 'always',\n        line: 'always',\n        trail: 'always',\n        area: 'always',\n        text: 'always',\n        geoshape: 'always'\n      };\n    case X:\n    case Y:\n    case LATITUDE:\n    case LONGITUDE:\n      return {\n        // all marks except geoshape. geoshape does not use X, Y -- it uses a projection\n        point: 'always',\n        tick: 'always',\n        rule: 'always',\n        circle: 'always',\n        square: 'always',\n        bar: 'always',\n        rect: 'always',\n        line: 'always',\n        trail: 'always',\n        area: 'always',\n        text: 'always'\n      };\n    case X2:\n    case Y2:\n    case LATITUDE2:\n    case LONGITUDE2:\n      return {\n        rule: 'always',\n        bar: 'always',\n        rect: 'always',\n        area: 'always',\n        circle: 'binned',\n        point: 'binned',\n        square: 'binned',\n        tick: 'binned'\n      };\n    case SIZE:\n      return {\n        point: 'always',\n        tick: 'always',\n        rule: 'always',\n        circle: 'always',\n        square: 'always',\n        bar: 'always',\n        text: 'always',\n        line: 'always',\n        trail: 'always'\n      };\n    case SHAPE:\n      return {point: 'always', geoshape: 'always'};\n    case TEXT:\n      return {text: 'always'};\n  }\n}\n\nexport function rangeType(channel: Channel): RangeType {\n  switch (channel) {\n    case X:\n    case Y:\n    case SIZE:\n    case STROKEWIDTH:\n    case OPACITY:\n    case FILLOPACITY:\n    case STROKEOPACITY:\n\n    // X2 and Y2 use X and Y scales, so they similarly have continuous range. [falls through]\n    case X2:\n    case Y2:\n      return undefined;\n\n    case FACET:\n    case ROW:\n    case COLUMN:\n    case SHAPE:\n    // TEXT, TOOLTIP, and HREF have no scale but have discrete output [falls through]\n    case TEXT:\n    case TOOLTIP:\n    case HREF:\n      return 'discrete';\n\n    // Color can be either continuous or discrete, depending on scale type.\n    case COLOR:\n    case FILL:\n    case STROKE:\n      return 'flexible';\n\n    // No scale, no range type.\n\n    case LATITUDE:\n    case LONGITUDE:\n    case LATITUDE2:\n    case LONGITUDE2:\n    case DETAIL:\n    case KEY:\n    case ORDER:\n      return undefined;\n  }\n  /* istanbul ignore next: should never reach here. */\n  throw new Error('rangeType not implemented for ' + channel);\n}\n","import {isBoolean, isObject} from 'vega-util';\nimport {BinParams} from './bin';\nimport {\n  Channel,\n  COLOR,\n  COLUMN,\n  FILL,\n  FILLOPACITY,\n  OPACITY,\n  ROW,\n  SHAPE,\n  SIZE,\n  STROKE,\n  STROKEOPACITY,\n  STROKEWIDTH\n} from './channel';\nimport {normalizeBin} from './channeldef';\nimport {keys, varName} from './util';\n\nexport interface BaseBin {\n  /**\n   * The number base to use for automatic bin determination (default is base 10).\n   *\n   * __Default value:__ `10`\n   *\n   */\n  base?: number;\n  /**\n   * An exact step size to use between bins.\n   *\n   * __Note:__ If provided, options such as maxbins will be ignored.\n   */\n  step?: number;\n  /**\n   * An array of allowable step sizes to choose from.\n   * @minItems 1\n   */\n  steps?: number[];\n  /**\n   * A minimum allowable step size (particularly useful for integer values).\n   */\n  minstep?: number;\n  /**\n   * Scale factors indicating allowable subdivisions. The default value is [5, 2], which indicates that for base 10 numbers (the default base), the method may consider dividing bin sizes by 5 and/or 2. For example, for an initial step size of 10, the method can check if bin sizes of 2 (= 10/5), 5 (= 10/2), or 1 (= 10/(5*2)) might also satisfy the given constraints.\n   *\n   * __Default value:__ `[5, 2]`\n   *\n   * @minItems 1\n   */\n  divide?: number[];\n  /**\n   * Maximum number of bins.\n   *\n   * __Default value:__ `6` for `row`, `column` and `shape` channels; `10` for other channels\n   *\n   * @minimum 2\n   */\n  maxbins?: number;\n  /**\n   * A value in the binned domain at which to anchor the bins, shifting the bin boundaries if necessary to ensure that a boundary aligns with the anchor value.\n   *\n   * __Default Value:__ the minimum bin extent value\n   */\n  anchor?: number;\n  /**\n   * If true (the default), attempts to make the bin boundaries use human-friendly boundaries, such as multiples of ten.\n   */\n  nice?: boolean;\n}\n\n/**\n * Binning properties or boolean flag for determining whether to bin data or not.\n */\nexport interface BinParams extends BaseBin {\n  /**\n   * A two-element (`[min, max]`) array indicating the range of desired bin values.\n   * @minItems 2\n   * @maxItems 2\n   */\n  extent?: number[]; // VgBinTransform uses a different extent so we need to pull this out.\n\n  /**\n   * When set to true, Vega-Lite treats the input data as already binned.\n   */\n  binned?: boolean;\n}\n\nexport type Bin = boolean | BinParams | 'binned' | null;\n\n/**\n * Create a key for the bin configuration. Not for prebinned bin.\n */\nexport function binToString(bin: BinParams | true) {\n  if (isBoolean(bin)) {\n    bin = normalizeBin(bin, undefined);\n  }\n  return (\n    'bin' +\n    keys(bin)\n      .map(p => varName(`_${p}_${bin[p]}`))\n      .join('')\n  );\n}\n\n/**\n * Vega-Lite should bin the data.\n */\nexport function isBinning(bin: BinParams | boolean | 'binned'): bin is BinParams | true {\n  return bin === true || (isBinParams(bin) && !bin.binned);\n}\n\n/**\n * The data is already binned and so Vega-Lite should not bin it again.\n */\nexport function isBinned(bin: BinParams | boolean | 'binned'): bin is 'binned' {\n  return bin === 'binned' || (isBinParams(bin) && bin.binned);\n}\n\nexport function isBinParams(bin: BinParams | boolean | 'binned'): bin is BinParams {\n  return isObject(bin);\n}\n\nexport function autoMaxBins(channel: Channel): number {\n  switch (channel) {\n    case ROW:\n    case COLUMN:\n    case SIZE:\n    case COLOR:\n    case FILL:\n    case STROKE:\n    case STROKEWIDTH:\n    case OPACITY:\n    case FILLOPACITY:\n    case STROKEOPACITY:\n    // Facets and Size shouldn't have too many bins\n    // We choose 6 like shape to simplify the rule [falls through]\n    case SHAPE:\n      return 6; // Vega's \"shape\" has 6 distinct values\n    default:\n      return 10;\n  }\n}\n","import {AggregateOp} from 'vega';\nimport {CompositeMark} from '../compositemark';\nimport {Aggregate} from '../aggregate';\nimport {Channel, FacetChannel, GeoPositionChannel} from '../channel';\nimport {TypedFieldDef} from '../channeldef';\nimport {ErrorBarCenter, ErrorBarExtent} from '../compositemark/errorbar';\nimport {DateTime, DateTimeExpr} from '../datetime';\nimport {Mark} from '../mark';\nimport {Projection} from '../projection';\nimport {ScaleType} from '../scale';\nimport {Type} from '../type';\nimport {stringify} from '../util';\nimport {VgSortField} from '../vega.schema';\n\n/**\n * Collection of all Vega-Lite Error Messages\n */\n\nexport const INVALID_SPEC = 'Invalid spec';\n\n// FIT\nexport const FIT_NON_SINGLE = 'Autosize \"fit\" only works for single views and layered views.';\n\nexport const CANNOT_FIX_RANGE_STEP_WITH_FIT = 'Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".';\n\n// SELECTION\nexport function cannotProjectOnChannelWithoutField(channel: Channel) {\n  return `Cannot project a selection on encoding channel \"${channel}\", which has no field.`;\n}\n\nexport function nearestNotSupportForContinuous(mark: string) {\n  return `The \"nearest\" transform is not supported for ${mark} marks.`;\n}\n\nexport function selectionNotSupported(mark: CompositeMark) {\n  return `Selection not supported for ${mark} yet`;\n}\n\nexport function selectionNotFound(name: string) {\n  return `Cannot find a selection named \"${name}\"`;\n}\n\nexport const SCALE_BINDINGS_CONTINUOUS =\n  'Scale bindings are currently only supported for scales with unbinned, continuous domains.';\n\nexport const NO_INIT_SCALE_BINDINGS = 'Selections bound to scales cannot be separately initialized.';\n\n// REPEAT\nexport function noSuchRepeatedValue(field: string) {\n  return `Unknown repeated value \"${field}\".`;\n}\n\nexport function columnsNotSupportByRowCol(type: 'facet' | 'repeat') {\n  return `The \"columns\" property cannot be used when \"${type}\" has nested row/column.`;\n}\n\n// CONCAT\nexport const CONCAT_CANNOT_SHARE_AXIS =\n  'Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).';\n\n// REPEAT\nexport const REPEAT_CANNOT_SHARE_AXIS =\n  'Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).';\n\n// DATA\nexport function unrecognizedParse(p: string) {\n  return `Unrecognized parse \"${p}\".`;\n}\n\nexport function differentParse(field: string, local: string, ancestor: string) {\n  return `An ancestor parsed field \"${field}\" as ${ancestor} but a child wants to parse the field as ${local}.`;\n}\n\n// TRANSFORMS\nexport function invalidTransformIgnored(transform: any) {\n  return `Ignoring an invalid transform: ${stringify(transform)}.`;\n}\n\nexport const NO_FIELDS_NEEDS_AS =\n  'If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the data from the secondary source.';\n\n// ENCODING & FACET\n\nexport function encodingOverridden(channels: Channel[]) {\n  return `Layer's shared ${channels.join(',')} channel ${channels.length === 1 ? 'is' : 'are'} overriden`;\n}\nexport function projectionOverridden(opt: {parentProjection: Projection; projection: Projection}) {\n  const {parentProjection, projection} = opt;\n  return `Layer's shared projection ${stringify(parentProjection)} is overridden by a child projection ${stringify(\n    projection\n  )}.`;\n}\n\nexport function primitiveChannelDef(\n  channel: Channel,\n  type: 'string' | 'number' | 'boolean',\n  value: string | number | boolean\n) {\n  return `Channel ${channel} is a ${type}. Converted to {value: ${stringify(value)}}.`;\n}\n\nexport function invalidFieldType(type: Type) {\n  return `Invalid field type \"${type}\"`;\n}\n\nexport function nonZeroScaleUsedWithLengthMark(\n  mark: 'bar' | 'area',\n  channel: Channel,\n  opt: {scaleType?: ScaleType; zeroFalse?: boolean}\n) {\n  const scaleText = opt.scaleType\n    ? `${opt.scaleType} scale`\n    : opt.zeroFalse\n    ? 'scale with zero=false'\n    : 'scale with custom domain that excludes zero';\n\n  return `A ${scaleText} is used to encode ${mark}'s ${channel}. This can be misleading as the ${\n    channel === 'x' ? 'width' : 'height'\n  } of the ${mark} can be arbitrary based on the scale domain. You may want to use point mark instead.`;\n}\n\nexport function invalidFieldTypeForCountAggregate(type: Type, aggregate: Aggregate | string) {\n  return `Invalid field type \"${type}\" for aggregate: \"${aggregate}\", using \"quantitative\" instead.`;\n}\n\nexport function invalidAggregate(aggregate: AggregateOp | string) {\n  return `Invalid aggregation operator \"${aggregate}\"`;\n}\n\nexport function missingFieldType(channel: Channel, newType: Type) {\n  return `Missing type for channel \"${channel}\", using \"${newType}\" instead.`;\n}\nexport function droppingColor(type: 'encoding' | 'property', opt: {fill?: boolean; stroke?: boolean}) {\n  const {fill, stroke} = opt;\n  return (\n    `Dropping color ${type} as the plot also has ` + (fill && stroke ? 'fill and stroke' : fill ? 'fill' : 'stroke')\n  );\n}\n\nexport function emptyFieldDef(fieldDef: TypedFieldDef<string>, channel: Channel) {\n  return `Dropping ${stringify(fieldDef)} from channel \"${channel}\" since it does not contain data field or value.`;\n}\nexport function latLongDeprecated(channel: Channel, type: Type, newChannel: GeoPositionChannel) {\n  return `${channel}-encoding with type ${type} is deprecated. Replacing with ${newChannel}-encoding.`;\n}\n\nexport const LINE_WITH_VARYING_SIZE =\n  'Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.';\n\nexport function incompatibleChannel(channel: Channel, markOrFacet: Mark | 'facet' | CompositeMark, when?: string) {\n  return `${channel} dropped as it is incompatible with \"${markOrFacet}\"${when ? ` when ${when}` : ''}.`;\n}\n\nexport function invalidEncodingChannel(channel: string) {\n  return `${channel}-encoding is dropped as ${channel} is not a valid encoding channel.`;\n}\n\nexport function facetChannelShouldBeDiscrete(channel: string) {\n  return `${channel} encoding should be discrete (ordinal / nominal / binned).`;\n}\n\nexport function facetChannelDropped(channels: FacetChannel[]) {\n  return `Facet encoding dropped as ${channels.join(' and ')} ${channels.length > 1 ? 'are' : 'is'} also specified.`;\n}\n\nexport function discreteChannelCannotEncode(channel: Channel, type: Type) {\n  return `Using discrete channel \"${channel}\" to encode \"${type}\" field can be misleading as it does not encode ${\n    type === 'ordinal' ? 'order' : 'magnitude'\n  }.`;\n}\n\n// Mark\nexport const BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL =\n  'Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.';\n\nexport function lineWithRange(hasX2: boolean, hasY2: boolean) {\n  const channels = hasX2 && hasY2 ? 'x2 and y2' : hasX2 ? 'x2' : 'y2';\n  return `Line mark is for continuous lines and thus cannot be used with ${channels}. We will use the rule mark (line segments) instead.`;\n}\n\nexport function orientOverridden(original: string, actual: string) {\n  return `Specified orient \"${original}\" overridden with \"${actual}\"`;\n}\n\n// SCALE\nexport const CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN =\n  'custom domain scale cannot be unioned with default field-based domain';\n\nexport function cannotUseScalePropertyWithNonColor(prop: string) {\n  return `Cannot use the scale property \"${prop}\" with non-color channel.`;\n}\n\nexport function unaggregateDomainHasNoEffectForRawField(fieldDef: TypedFieldDef<string>) {\n  return `Using unaggregated domain with raw field has no effect (${stringify(fieldDef)}).`;\n}\n\nexport function unaggregateDomainWithNonSharedDomainOp(aggregate: Aggregate | string) {\n  return `Unaggregated domain not applicable for \"${aggregate}\" since it produces values outside the origin domain of the source data.`;\n}\n\nexport function unaggregatedDomainWithLogScale(fieldDef: TypedFieldDef<string>) {\n  return `Unaggregated domain is currently unsupported for log scale (${stringify(fieldDef)}).`;\n}\n\nexport function cannotApplySizeToNonOrientedMark(mark: Mark) {\n  return `Cannot apply size to non-oriented mark \"${mark}\".`;\n}\n\nexport function rangeStepDropped(channel: Channel) {\n  return `rangeStep for \"${channel}\" is dropped as top-level ${channel === 'x' ? 'width' : 'height'} is provided.`;\n}\n\nexport function scaleTypeNotWorkWithChannel(channel: Channel, scaleType: ScaleType, defaultScaleType: ScaleType) {\n  return `Channel \"${channel}\" does not work with \"${scaleType}\" scale. We are using \"${defaultScaleType}\" scale instead.`;\n}\n\nexport function scaleTypeNotWorkWithFieldDef(scaleType: ScaleType, defaultScaleType: ScaleType) {\n  return `FieldDef does not work with \"${scaleType}\" scale. We are using \"${defaultScaleType}\" scale instead.`;\n}\n\nexport function scalePropertyNotWorkWithScaleType(scaleType: ScaleType, propName: string, channel: Channel) {\n  return `${channel}-scale's \"${propName}\" is dropped as it does not work with ${scaleType} scale.`;\n}\n\nexport function scaleTypeNotWorkWithMark(mark: Mark, scaleType: ScaleType) {\n  return `Scale type \"${scaleType}\" does not work with mark \"${mark}\".`;\n}\n\nexport function mergeConflictingProperty<T>(\n  property: string | number | symbol,\n  propertyOf: string | number | symbol,\n  v1: T,\n  v2: T\n) {\n  return `Conflicting ${propertyOf.toString()} property \"${property.toString()}\" (${stringify(v1)} and ${stringify(\n    v2\n  )}).  Using ${stringify(v1)}.`;\n}\n\nexport function independentScaleMeansIndependentGuide(channel: Channel) {\n  return `Setting the scale to be independent for \"${channel}\" means we also have to set the guide (axis or legend) to be independent.`;\n}\n\nexport function domainSortDropped(sort: VgSortField) {\n  return `Dropping sort property ${stringify(sort)} as unioned domains only support boolean or op 'count'.`;\n}\n\nexport const UNABLE_TO_MERGE_DOMAINS = 'Unable to merge domains';\n\nexport const MORE_THAN_ONE_SORT =\n  'Domains that should be unioned has conflicting sort properties. Sort will be set to true.';\n\n// AXIS\nexport const INVALID_CHANNEL_FOR_AXIS = 'Invalid channel for axis.';\n\n// STACK\nexport function cannotStackRangedMark(channel: Channel) {\n  return `Cannot stack \"${channel}\" if there is already \"${channel}2\"`;\n}\n\nexport function cannotStackNonLinearScale(scaleType: ScaleType) {\n  return `Cannot stack non-linear scale (${scaleType})`;\n}\n\nexport function stackNonSummativeAggregate(aggregate: Aggregate | string) {\n  return `Stacking is applied even though the aggregate function is non-summative (\"${aggregate}\")`;\n}\n\n// TIMEUNIT\nexport function invalidTimeUnit(unitName: string, value: string | number) {\n  return `Invalid ${unitName}: ${stringify(value)}`;\n}\n\nexport function dayReplacedWithDate(fullTimeUnit: string) {\n  return `Time unit \"${fullTimeUnit}\" is not supported. We are replacing it with ${fullTimeUnit.replace(\n    'day',\n    'date'\n  )}.`;\n}\n\nexport function droppedDay(d: DateTime | DateTimeExpr) {\n  return `Dropping day from datetime ${stringify(d)} as day cannot be combined with other units.`;\n}\n\nexport function errorBarCenterAndExtentAreNotNeeded(center: ErrorBarCenter, extent: ErrorBarExtent) {\n  return `${extent ? 'extent ' : ''}${extent && center ? 'and ' : ''}${center ? 'center ' : ''}${\n    extent && center ? 'are ' : 'is '\n  }not needed when data are aggregated.`;\n}\n\nexport function errorBarCenterIsUsedWithWrongExtent(\n  center: ErrorBarCenter,\n  extent: ErrorBarExtent,\n  mark: 'errorbar' | 'errorband'\n) {\n  return `${center} is not usually used with ${extent} for ${mark}.`;\n}\n\nexport function errorBarContinuousAxisHasCustomizedAggregate(\n  aggregate: Aggregate | string,\n  compositeMark: CompositeMark\n) {\n  return `Continuous axis should not have customized aggregation function ${aggregate}; ${compositeMark} already agregates the axis.`;\n}\n\nexport function errorBarCenterIsNotNeeded(extent: ErrorBarExtent, mark: 'errorbar' | 'errorband') {\n  return `Center is not needed to be specified in ${mark} when extent is ${extent}.`;\n}\n\nexport function errorBand1DNotSupport(property: 'interpolate' | 'tension') {\n  return `1D error band does not support ${property}`;\n}\n\n// CHANNEL\nexport function channelRequiredForBinned(channel: Channel) {\n  return `Channel ${channel} is required for \"binned\" bin`;\n}\n\nexport function domainRequiredForThresholdScale(channel: Channel) {\n  return `Domain for ${channel} is required for threshold scale`;\n}\n","/**\n * Vega-Lite's singleton logger utility.\n */\n\nimport {logger, LoggerInterface, Warn} from 'vega-util';\nimport * as message_ from './message';\n\nexport const message = message_;\n\n/**\n * Main (default) Vega Logger instance for Vega-Lite\n */\nconst main = logger(Warn);\nlet current: LoggerInterface = main;\n\n/**\n * Logger tool for checking if the code throws correct warning\n */\nexport class LocalLogger implements LoggerInterface {\n  public warns: any[] = [];\n  public infos: any[] = [];\n  public debugs: any[] = [];\n\n  public level() {\n    return this;\n  }\n\n  public warn(...args: any[]) {\n    this.warns.push(...args);\n    return this;\n  }\n\n  public info(...args: any[]) {\n    this.infos.push(...args);\n    return this;\n  }\n\n  public debug(...args: any[]) {\n    this.debugs.push(...args);\n    return this;\n  }\n\n  public error(...args: any[]) {\n    throw Error(...args);\n    return this; // @ts-ignore\n  }\n}\n\nexport function wrap(f: (logger: LocalLogger) => void) {\n  return () => {\n    current = new LocalLogger();\n    f(current as LocalLogger);\n    reset();\n  };\n}\n\n/**\n * Set the singleton logger to be a custom logger\n */\nexport function set(newLogger: LoggerInterface) {\n  current = newLogger;\n  return current;\n}\n\n/**\n * Reset the main logger to use the default Vega Logger\n */\nexport function reset() {\n  current = main;\n  return current;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function warn(..._: any[]) {\n  current.warn.apply(current, arguments);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function info(..._: any[]) {\n  current.info.apply(current, arguments);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function debug(..._: any[]) {\n  current.debug.apply(current, arguments);\n}\n","// DateTime definition object\n\nimport {isNumber} from 'vega-util';\nimport * as log from './log';\nimport {duplicate, keys} from './util';\n\n/*\n * A designated year that starts on Sunday.\n */\nconst SUNDAY_YEAR = 2006;\n\n/**\n * @minimum 1\n * @maximum 12\n * @TJS-type integer\n */\nexport type Month = number;\n\n/**\n * @minimum 1\n * @maximum 7\n */\nexport type Day = number;\n\n/**\n * Object for defining datetime in Vega-Lite Filter.\n * If both month and quarter are provided, month has higher precedence.\n * `day` cannot be combined with other date.\n * We accept string for month and day names.\n */\nexport interface DateTime {\n  /**\n   * Integer value representing the year.\n   * @TJS-type integer\n   */\n  year?: number;\n\n  /**\n   * Integer value representing the quarter of the year (from 1-4).\n   * @minimum 1\n   * @maximum 4\n   * @TJS-type integer\n   */\n  quarter?: number;\n\n  /** One of: (1) integer value representing the month from `1`-`12`. `1` represents January;  (2) case-insensitive month name (e.g., `\"January\"`);  (3) case-insensitive, 3-character short month name (e.g., `\"Jan\"`). */\n  month?: Month | string;\n\n  /**\n   * Integer value representing the date from 1-31.\n   * @minimum 1\n   * @maximum 31\n   * @TJS-type integer\n   */\n  date?: number;\n\n  /**\n   * Value representing the day of a week.  This can be one of: (1) integer value -- `1` represents Monday; (2) case-insensitive day name (e.g., `\"Monday\"`);  (3) case-insensitive, 3-character short day name (e.g., `\"Mon\"`).   <br/> **Warning:** A DateTime definition object with `day`** should not be combined with `year`, `quarter`, `month`, or `date`.\n   */\n  day?: Day | string;\n\n  /**\n   * Integer value representing the hour of a day from 0-23.\n   * @minimum 0\n   * @maximum 23\n   * @TJS-type integer\n   */\n  hours?: number;\n\n  /**\n   * Integer value representing the minute segment of time from 0-59.\n   * @minimum 0\n   * @maximum 59\n   * @TJS-type integer\n   */\n  minutes?: number;\n\n  /**\n   * Integer value representing the second segment (0-59) of a time value\n   * @minimum 0\n   * @maximum 59\n   * @TJS-type integer\n   */\n  seconds?: number;\n\n  /**\n   * Integer value representing the millisecond segment of time.\n   * @minimum 0\n   * @maximum 999\n   * @TJS-type integer\n   */\n  milliseconds?: number;\n\n  /**\n   * A boolean flag indicating if date time is in utc time. If false, the date time is in local time\n   */\n  utc?: boolean;\n}\n\n/**\n * Internal Object for defining datetime expressions.\n * This is an expression version of DateTime.\n * If both month and quarter are provided, month has higher precedence.\n * `day` cannot be combined with other date.\n */\nexport interface DateTimeExpr {\n  year?: string;\n  quarter?: string;\n  month?: string;\n  date?: string;\n  day?: string;\n  hours?: string;\n  minutes?: string;\n  seconds?: string;\n  milliseconds?: string;\n  utc?: boolean;\n}\n\nexport function isDateTime(o: any): o is DateTime {\n  return (\n    !!o &&\n    (!!o.year ||\n      !!o.quarter ||\n      !!o.month ||\n      !!o.date ||\n      !!o.day ||\n      !!o.hours ||\n      !!o.minutes ||\n      !!o.seconds ||\n      !!o.milliseconds)\n  );\n}\n\nexport const MONTHS = [\n  'january',\n  'february',\n  'march',\n  'april',\n  'may',\n  'june',\n  'july',\n  'august',\n  'september',\n  'october',\n  'november',\n  'december'\n];\nexport const SHORT_MONTHS = MONTHS.map(m => m.substr(0, 3));\n\nexport const DAYS = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\nexport const SHORT_DAYS = DAYS.map(d => d.substr(0, 3));\n\nfunction normalizeQuarter(q: number | string) {\n  if (isNumber(q)) {\n    if (q > 4) {\n      log.warn(log.message.invalidTimeUnit('quarter', q));\n    }\n    // We accept 1-based quarter, so need to readjust to 0-based quarter\n    return (q - 1).toString();\n  } else {\n    // Invalid quarter\n    throw new Error(log.message.invalidTimeUnit('quarter', q));\n  }\n}\n\nfunction normalizeMonth(m: string | number) {\n  if (isNumber(m)) {\n    // We accept 1-based month, so need to readjust to 0-based month\n    return (m - 1).toString();\n  } else {\n    const lowerM = m.toLowerCase();\n    const monthIndex = MONTHS.indexOf(lowerM);\n    if (monthIndex !== -1) {\n      return monthIndex + ''; // 0 for january, ...\n    }\n    const shortM = lowerM.substr(0, 3);\n    const shortMonthIndex = SHORT_MONTHS.indexOf(shortM);\n    if (shortMonthIndex !== -1) {\n      return shortMonthIndex + '';\n    }\n    // Invalid month\n    throw new Error(log.message.invalidTimeUnit('month', m));\n  }\n}\n\nfunction normalizeDay(d: string | number) {\n  if (isNumber(d)) {\n    // mod so that this can be both 0-based where 0 = sunday\n    // and 1-based where 7=sunday\n    return (d % 7) + '';\n  } else {\n    const lowerD = d.toLowerCase();\n    const dayIndex = DAYS.indexOf(lowerD);\n    if (dayIndex !== -1) {\n      return dayIndex + ''; // 0 for january, ...\n    }\n    const shortD = lowerD.substr(0, 3);\n    const shortDayIndex = SHORT_DAYS.indexOf(shortD);\n    if (shortDayIndex !== -1) {\n      return shortDayIndex + '';\n    }\n    // Invalid day\n    throw new Error(log.message.invalidTimeUnit('day', d));\n  }\n}\n\n/**\n * Return Vega Expression for a particular date time.\n * @param d\n * @param normalize whether to normalize quarter, month, day.\n */\nexport function dateTimeExpr(d: DateTime | DateTimeExpr, normalize = false) {\n  const units: (string | number)[] = [];\n\n  if (normalize && d.day !== undefined) {\n    if (keys(d).length > 1) {\n      log.warn(log.message.droppedDay(d));\n      d = duplicate(d);\n      delete d.day;\n    }\n  }\n\n  if (d.year !== undefined) {\n    units.push(d.year);\n  } else if (d.day !== undefined) {\n    // Set year to 2006 for working with day since January 1 2006 is a Sunday\n    units.push(SUNDAY_YEAR);\n  } else {\n    units.push(0);\n  }\n\n  if (d.month !== undefined) {\n    const month = normalize ? normalizeMonth(d.month) : d.month;\n    units.push(month);\n  } else if (d.quarter !== undefined) {\n    const quarter = normalize ? normalizeQuarter(d.quarter) : d.quarter;\n    units.push(quarter + '*3');\n  } else {\n    units.push(0); // months start at zero in JS\n  }\n\n  if (d.date !== undefined) {\n    units.push(d.date);\n  } else if (d.day !== undefined) {\n    // HACK: Day only works as a standalone unit\n    // This is only correct because we always set year to 2006 for day\n    const day = normalize ? normalizeDay(d.day) : d.day;\n    units.push(day + '+1');\n  } else {\n    units.push(1); // Date starts at 1 in JS\n  }\n\n  // Note: can't use TimeUnit enum here as importing it will create\n  // circular dependency problem!\n  for (const timeUnit of ['hours', 'minutes', 'seconds', 'milliseconds']) {\n    if (d[timeUnit] !== undefined) {\n      units.push(d[timeUnit]);\n    } else {\n      units.push(0);\n    }\n  }\n\n  if (d.utc) {\n    return `utc(${units.join(', ')})`;\n  } else {\n    return `datetime(${units.join(', ')})`;\n  }\n}\n","import {DateTimeExpr, dateTimeExpr} from './datetime';\nimport * as log from './log';\nimport {accessPathWithDatum, Flag, flagKeys} from './util';\n\nexport namespace TimeUnit {\n  export const YEAR: 'year' = 'year';\n  export const MONTH: 'month' = 'month';\n  export const DAY: 'day' = 'day';\n  export const DATE: 'date' = 'date';\n  export const HOURS: 'hours' = 'hours';\n  export const MINUTES: 'minutes' = 'minutes';\n  export const SECONDS: 'seconds' = 'seconds';\n  export const MILLISECONDS: 'milliseconds' = 'milliseconds';\n  export const YEARMONTH: 'yearmonth' = 'yearmonth';\n  export const YEARMONTHDATE: 'yearmonthdate' = 'yearmonthdate';\n  export const YEARMONTHDATEHOURS: 'yearmonthdatehours' = 'yearmonthdatehours';\n  export const YEARMONTHDATEHOURSMINUTES: 'yearmonthdatehoursminutes' = 'yearmonthdatehoursminutes';\n  export const YEARMONTHDATEHOURSMINUTESSECONDS: 'yearmonthdatehoursminutesseconds' =\n    'yearmonthdatehoursminutesseconds';\n\n  // MONTHDATE and MONTHDATEHOURS always include 29 February since we use year 0th (which is a leap year);\n  export const MONTHDATE: 'monthdate' = 'monthdate';\n  export const MONTHDATEHOURS: 'monthdatehours' = 'monthdatehours';\n  export const HOURSMINUTES: 'hoursminutes' = 'hoursminutes';\n  export const HOURSMINUTESSECONDS: 'hoursminutesseconds' = 'hoursminutesseconds';\n  export const MINUTESSECONDS: 'minutesseconds' = 'minutesseconds';\n  export const SECONDSMILLISECONDS: 'secondsmilliseconds' = 'secondsmilliseconds';\n  export const QUARTER: 'quarter' = 'quarter';\n  export const YEARQUARTER: 'yearquarter' = 'yearquarter';\n  export const QUARTERMONTH: 'quartermonth' = 'quartermonth';\n  export const YEARQUARTERMONTH: 'yearquartermonth' = 'yearquartermonth';\n  export const UTCYEAR: 'utcyear' = 'utcyear';\n  export const UTCMONTH: 'utcmonth' = 'utcmonth';\n  export const UTCDAY: 'utcday' = 'utcday';\n  export const UTCDATE: 'utcdate' = 'utcdate';\n  export const UTCHOURS: 'utchours' = 'utchours';\n  export const UTCMINUTES: 'utcminutes' = 'utcminutes';\n  export const UTCSECONDS: 'utcseconds' = 'utcseconds';\n  export const UTCMILLISECONDS: 'utcmilliseconds' = 'utcmilliseconds';\n  export const UTCYEARMONTH: 'utcyearmonth' = 'utcyearmonth';\n  export const UTCYEARMONTHDATE: 'utcyearmonthdate' = 'utcyearmonthdate';\n  export const UTCYEARMONTHDATEHOURS: 'utcyearmonthdatehours' = 'utcyearmonthdatehours';\n  export const UTCYEARMONTHDATEHOURSMINUTES: 'utcyearmonthdatehoursminutes' = 'utcyearmonthdatehoursminutes';\n  export const UTCYEARMONTHDATEHOURSMINUTESSECONDS: 'utcyearmonthdatehoursminutesseconds' =\n    'utcyearmonthdatehoursminutesseconds';\n\n  // UTCMONTHDATE and UTCMONTHDATEHOURS always include 29 February since we use year 0th (which is a leap year);\n  export const UTCMONTHDATE: 'utcmonthdate' = 'utcmonthdate';\n  export const UTCMONTHDATEHOURS: 'utcmonthdatehours' = 'utcmonthdatehours';\n  export const UTCHOURSMINUTES: 'utchoursminutes' = 'utchoursminutes';\n  export const UTCHOURSMINUTESSECONDS: 'utchoursminutesseconds' = 'utchoursminutesseconds';\n  export const UTCMINUTESSECONDS: 'utcminutesseconds' = 'utcminutesseconds';\n  export const UTCSECONDSMILLISECONDS: 'utcsecondsmilliseconds' = 'utcsecondsmilliseconds';\n  export const UTCQUARTER: 'utcquarter' = 'utcquarter';\n  export const UTCYEARQUARTER: 'utcyearquarter' = 'utcyearquarter';\n  export const UTCQUARTERMONTH: 'utcquartermonth' = 'utcquartermonth';\n  export const UTCYEARQUARTERMONTH: 'utcyearquartermonth' = 'utcyearquartermonth';\n}\n\nexport type LocalSingleTimeUnit =\n  | typeof TimeUnit.YEAR\n  | typeof TimeUnit.QUARTER\n  | typeof TimeUnit.MONTH\n  | typeof TimeUnit.DAY\n  | typeof TimeUnit.DATE\n  | typeof TimeUnit.HOURS\n  | typeof TimeUnit.MINUTES\n  | typeof TimeUnit.SECONDS\n  | typeof TimeUnit.MILLISECONDS;\n\n/** Time Unit that only corresponds to only one part of Date objects. */\nconst LOCAL_SINGLE_TIMEUNIT_INDEX: Flag<LocalSingleTimeUnit> = {\n  year: 1,\n  quarter: 1,\n  month: 1,\n  day: 1,\n  date: 1,\n  hours: 1,\n  minutes: 1,\n  seconds: 1,\n  milliseconds: 1\n};\n\nexport const TIMEUNIT_PARTS = flagKeys(LOCAL_SINGLE_TIMEUNIT_INDEX);\n\nexport function isLocalSingleTimeUnit(timeUnit: string): timeUnit is LocalSingleTimeUnit {\n  return !!LOCAL_SINGLE_TIMEUNIT_INDEX[timeUnit];\n}\n\nexport type UtcSingleTimeUnit =\n  | typeof TimeUnit.UTCYEAR\n  | typeof TimeUnit.UTCQUARTER\n  | typeof TimeUnit.UTCMONTH\n  | typeof TimeUnit.UTCDAY\n  | typeof TimeUnit.UTCDATE\n  | typeof TimeUnit.UTCHOURS\n  | typeof TimeUnit.UTCMINUTES\n  | typeof TimeUnit.UTCSECONDS\n  | typeof TimeUnit.UTCMILLISECONDS;\n\nconst UTC_SINGLE_TIMEUNIT_INDEX: Flag<UtcSingleTimeUnit> = {\n  utcyear: 1,\n  utcquarter: 1,\n  utcmonth: 1,\n  utcday: 1,\n  utcdate: 1,\n  utchours: 1,\n  utcminutes: 1,\n  utcseconds: 1,\n  utcmilliseconds: 1\n};\n\nexport function isUtcSingleTimeUnit(timeUnit: string): timeUnit is UtcSingleTimeUnit {\n  return !!UTC_SINGLE_TIMEUNIT_INDEX[timeUnit];\n}\n\nexport type SingleTimeUnit = LocalSingleTimeUnit | UtcSingleTimeUnit;\n\nexport type LocalMultiTimeUnit =\n  // Local Time\n  | typeof TimeUnit.YEARQUARTER\n  | typeof TimeUnit.YEARQUARTERMONTH\n  | typeof TimeUnit.YEARMONTH\n  | typeof TimeUnit.YEARMONTHDATE\n  | typeof TimeUnit.YEARMONTHDATEHOURS\n  | typeof TimeUnit.YEARMONTHDATEHOURSMINUTES\n  | typeof TimeUnit.YEARMONTHDATEHOURSMINUTESSECONDS\n  | typeof TimeUnit.QUARTERMONTH\n  | typeof TimeUnit.MONTHDATE\n  | typeof TimeUnit.MONTHDATEHOURS\n  | typeof TimeUnit.HOURSMINUTES\n  | typeof TimeUnit.HOURSMINUTESSECONDS\n  | typeof TimeUnit.MINUTESSECONDS\n  | typeof TimeUnit.SECONDSMILLISECONDS;\n\nconst LOCAL_MULTI_TIMEUNIT_INDEX: Flag<LocalMultiTimeUnit> = {\n  yearquarter: 1,\n  yearquartermonth: 1,\n\n  yearmonth: 1,\n  yearmonthdate: 1,\n  yearmonthdatehours: 1,\n  yearmonthdatehoursminutes: 1,\n  yearmonthdatehoursminutesseconds: 1,\n\n  quartermonth: 1,\n\n  monthdate: 1,\n  monthdatehours: 1,\n\n  hoursminutes: 1,\n  hoursminutesseconds: 1,\n\n  minutesseconds: 1,\n\n  secondsmilliseconds: 1\n};\n\nexport type UtcMultiTimeUnit =\n  | typeof TimeUnit.UTCYEARQUARTER\n  | typeof TimeUnit.UTCYEARQUARTERMONTH\n  | typeof TimeUnit.UTCYEARMONTH\n  | typeof TimeUnit.UTCYEARMONTHDATE\n  | typeof TimeUnit.UTCYEARMONTHDATEHOURS\n  | typeof TimeUnit.UTCYEARMONTHDATEHOURSMINUTES\n  | typeof TimeUnit.UTCYEARMONTHDATEHOURSMINUTESSECONDS\n  | typeof TimeUnit.UTCQUARTERMONTH\n  | typeof TimeUnit.UTCMONTHDATE\n  | typeof TimeUnit.UTCMONTHDATEHOURS\n  | typeof TimeUnit.UTCHOURSMINUTES\n  | typeof TimeUnit.UTCHOURSMINUTESSECONDS\n  | typeof TimeUnit.UTCMINUTESSECONDS\n  | typeof TimeUnit.UTCSECONDSMILLISECONDS;\n\nconst UTC_MULTI_TIMEUNIT_INDEX: Flag<UtcMultiTimeUnit> = {\n  utcyearquarter: 1,\n  utcyearquartermonth: 1,\n\n  utcyearmonth: 1,\n  utcyearmonthdate: 1,\n  utcyearmonthdatehours: 1,\n  utcyearmonthdatehoursminutes: 1,\n  utcyearmonthdatehoursminutesseconds: 1,\n\n  utcquartermonth: 1,\n\n  utcmonthdate: 1,\n  utcmonthdatehours: 1,\n\n  utchoursminutes: 1,\n  utchoursminutesseconds: 1,\n\n  utcminutesseconds: 1,\n\n  utcsecondsmilliseconds: 1\n};\n\nexport type MultiTimeUnit = LocalMultiTimeUnit | UtcMultiTimeUnit;\n\nexport type LocalTimeUnit = LocalSingleTimeUnit | LocalMultiTimeUnit;\nexport type UtcTimeUnit = UtcSingleTimeUnit | UtcMultiTimeUnit;\n\nconst UTC_TIMEUNIT_INDEX: Flag<UtcTimeUnit> = {\n  ...UTC_SINGLE_TIMEUNIT_INDEX,\n  ...UTC_MULTI_TIMEUNIT_INDEX\n};\n\nexport function isUTCTimeUnit(t: string): t is UtcTimeUnit {\n  return !!UTC_TIMEUNIT_INDEX[t];\n}\n\nexport function getLocalTimeUnit(t: UtcTimeUnit): LocalTimeUnit {\n  return t.substr(3) as LocalTimeUnit;\n}\n\nexport type TimeUnit = SingleTimeUnit | MultiTimeUnit;\n\nconst TIMEUNIT_INDEX: Flag<TimeUnit> = {\n  ...LOCAL_SINGLE_TIMEUNIT_INDEX,\n  ...UTC_SINGLE_TIMEUNIT_INDEX,\n  ...LOCAL_MULTI_TIMEUNIT_INDEX,\n  ...UTC_MULTI_TIMEUNIT_INDEX\n};\n\nexport const TIMEUNITS = flagKeys(TIMEUNIT_INDEX);\n\nexport function isTimeUnit(t: string): t is TimeUnit {\n  return !!TIMEUNIT_INDEX[t];\n}\n\ntype DateMethodName = keyof Date;\n\nconst SET_DATE_METHOD: Record<LocalSingleTimeUnit, DateMethodName> = {\n  year: 'setFullYear',\n  month: 'setMonth',\n  date: 'setDate',\n  hours: 'setHours',\n  minutes: 'setMinutes',\n  seconds: 'setSeconds',\n  milliseconds: 'setMilliseconds',\n  // Day and quarter have their own special cases\n  quarter: null,\n  day: null\n};\n\n/**\n * Converts a date to only have the measurements relevant to the specified unit\n * i.e. ('yearmonth', '2000-12-04 07:58:14') -> '2000-12-01 00:00:00'\n * Note: the base date is Jan 01 1900 00:00:00\n */\nexport function convert(unit: TimeUnit, date: Date): Date {\n  const isUTC = isUTCTimeUnit(unit);\n  const result: Date = isUTC\n    ? // start with uniform date\n      new Date(Date.UTC(1972, 0, 1, 0, 0, 0, 0)) // 1972 is the first leap year after 1970, the start of unix time\n    : new Date(1972, 0, 1, 0, 0, 0, 0);\n  for (const timeUnitPart of TIMEUNIT_PARTS) {\n    if (containsTimeUnit(unit, timeUnitPart)) {\n      switch (timeUnitPart) {\n        case TimeUnit.DAY:\n          throw new Error(\"Cannot convert to TimeUnits containing 'day'\");\n        case TimeUnit.QUARTER: {\n          const {getDateMethod, setDateMethod} = dateMethods('month', isUTC);\n          // indicate quarter by setting month to be the first of the quarter i.e. may (4) -> april (3)\n          result[setDateMethod](Math.floor(date[getDateMethod]() / 3) * 3);\n          break;\n        }\n        default: {\n          const {getDateMethod, setDateMethod} = dateMethods(timeUnitPart, isUTC);\n          result[setDateMethod](date[getDateMethod]());\n        }\n      }\n    }\n  }\n  return result;\n}\n\nfunction dateMethods(singleUnit: SingleTimeUnit, isUtc: boolean) {\n  const rawSetDateMethod = SET_DATE_METHOD[singleUnit];\n  const setDateMethod = isUtc ? 'setUTC' + rawSetDateMethod.substr(3) : rawSetDateMethod;\n  const getDateMethod = 'get' + (isUtc ? 'UTC' : '') + rawSetDateMethod.substr(3);\n  return {setDateMethod, getDateMethod};\n}\n\nexport function getTimeUnitParts(timeUnit: TimeUnit) {\n  return TIMEUNIT_PARTS.reduce((parts, part) => {\n    if (containsTimeUnit(timeUnit, part)) {\n      return [...parts, part];\n    }\n    return parts;\n  }, []);\n}\n\n/** Returns true if fullTimeUnit contains the timeUnit, false otherwise. */\nexport function containsTimeUnit(fullTimeUnit: TimeUnit, timeUnit: TimeUnit) {\n  const index = fullTimeUnit.indexOf(timeUnit);\n  return (\n    index > -1 && (timeUnit !== TimeUnit.SECONDS || index === 0 || fullTimeUnit.charAt(index - 1) !== 'i') // exclude milliseconds\n  );\n}\n\n/**\n * Returns Vega expresssion for a given timeUnit and fieldRef\n */\nexport function fieldExpr(fullTimeUnit: TimeUnit, field: string): string {\n  const fieldRef = accessPathWithDatum(field);\n\n  const utc = isUTCTimeUnit(fullTimeUnit) ? 'utc' : '';\n  function func(timeUnit: TimeUnit) {\n    if (timeUnit === TimeUnit.QUARTER) {\n      // quarter starting at 0 (0,3,6,9).\n      return `(${utc}quarter(${fieldRef})-1)`;\n    } else {\n      return `${utc}${timeUnit}(${fieldRef})`;\n    }\n  }\n\n  const d = TIMEUNIT_PARTS.reduce(\n    (dateExpr: DateTimeExpr, tu: TimeUnit) => {\n      if (containsTimeUnit(fullTimeUnit, tu)) {\n        dateExpr[tu] = func(tu);\n      }\n      return dateExpr;\n    },\n    {} as {[key in SingleTimeUnit]: string}\n  );\n\n  return dateTimeExpr(d);\n}\n\nexport function getDateTimeComponents(timeUnit: TimeUnit, shortTimeLabels: boolean) {\n  if (!timeUnit) {\n    return undefined;\n  }\n\n  const dateComponents: string[] = [];\n  const hasYear = containsTimeUnit(timeUnit, TimeUnit.YEAR);\n\n  if (containsTimeUnit(timeUnit, TimeUnit.MONTH)) {\n    // By default use short month name\n    dateComponents.push(shortTimeLabels !== false ? '%b' : '%B');\n  }\n\n  if (containsTimeUnit(timeUnit, TimeUnit.DAY)) {\n    dateComponents.push(shortTimeLabels ? '%a' : '%A');\n  } else if (containsTimeUnit(timeUnit, TimeUnit.DATE)) {\n    dateComponents.push('%d' + (hasYear ? ',' : '')); // add comma if there is year\n  }\n\n  if (hasYear) {\n    dateComponents.push(shortTimeLabels ? '%y' : '%Y');\n  }\n\n  const timeComponents: string[] = [];\n\n  if (containsTimeUnit(timeUnit, TimeUnit.HOURS)) {\n    timeComponents.push('%H');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.MINUTES)) {\n    timeComponents.push('%M');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.SECONDS)) {\n    timeComponents.push('%S');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.MILLISECONDS)) {\n    timeComponents.push('%L');\n  }\n\n  const dateTimeComponents: string[] = [];\n  if (dateComponents.length > 0) {\n    dateTimeComponents.push(dateComponents.join(' '));\n  }\n  if (timeComponents.length > 0) {\n    dateTimeComponents.push(timeComponents.join(':'));\n  }\n\n  return dateTimeComponents;\n}\n\n/**\n * returns the signal expression used for axis labels for a time unit\n */\nexport function formatExpression(\n  timeUnit: TimeUnit,\n  field: string,\n  shortTimeLabels: boolean,\n  isUTCScale: boolean\n): string {\n  if (!timeUnit) {\n    return undefined;\n  }\n\n  const dateTimeComponents: string[] = getDateTimeComponents(timeUnit, shortTimeLabels);\n  let expression = '';\n\n  if (containsTimeUnit(timeUnit, TimeUnit.QUARTER)) {\n    // special expression for quarter as prefix\n    expression = `'Q' + quarter(${field})`;\n  }\n\n  if (dateTimeComponents.length > 0) {\n    if (expression) {\n      // Add space between quarter and main time format\n      expression += ` + ' ' + `;\n    }\n\n    // We only use utcFormat for utc scale\n    // For utc time units, the data is already converted as a part of timeUnit transform.\n    // Thus, utc time units should use timeFormat to avoid shifting the time twice.\n    if (isUTCScale) {\n      expression += `utcFormat(${field}, '${dateTimeComponents.join(' ')}')`;\n    } else {\n      expression += `timeFormat(${field}, '${dateTimeComponents.join(' ')}')`;\n    }\n  }\n\n  // If expression is still an empty string, return undefined instead.\n  return expression || undefined;\n}\n\nexport function normalizeTimeUnit(timeUnit: TimeUnit): TimeUnit {\n  if (timeUnit !== 'day' && timeUnit.indexOf('day') >= 0) {\n    log.warn(log.message.dayReplacedWithDate(timeUnit));\n    return timeUnit.replace('day', 'date') as TimeUnit;\n  }\n  return timeUnit;\n}\n","import {Flag} from './util';\n/** Constants and utilities for data type */\n/** Data type based on level of measurement */\n\nexport const TYPE_INDEX: Flag<Type> = {\n  quantitative: 1,\n  ordinal: 1,\n  temporal: 1,\n  nominal: 1,\n  geojson: 1\n};\n\nexport function isType(t: any): t is Type {\n  return !!TYPE_INDEX[t];\n}\n\nexport const QUANTITATIVE: 'quantitative' = 'quantitative';\nexport const ORDINAL: 'ordinal' = 'ordinal';\nexport const TEMPORAL: 'temporal' = 'temporal';\nexport const NOMINAL: 'nominal' = 'nominal';\n\nexport const GEOJSON: 'geojson' = 'geojson';\n\nexport type StandardType = typeof QUANTITATIVE | typeof ORDINAL | typeof TEMPORAL | typeof NOMINAL;\n\nexport type Type = StandardType | typeof GEOJSON;\n\n/**\n * Get full, lowercase type name for a given type.\n * @param  type\n * @return Full type name.\n */\nexport function getFullName(type: Type | string): Type {\n  if (type) {\n    type = type.toLowerCase();\n    switch (type) {\n      case 'q':\n      case QUANTITATIVE:\n        return 'quantitative';\n      case 't':\n      case TEMPORAL:\n        return 'temporal';\n      case 'o':\n      case ORDINAL:\n        return 'ordinal';\n      case 'n':\n      case NOMINAL:\n        return 'nominal';\n      case GEOJSON:\n        return 'geojson';\n    }\n  }\n  // If we get invalid input, return undefined type.\n  return undefined;\n}\n","// Declaration and utility for variants of a field definition object\nimport {isArray, isBoolean, isNumber, isString} from 'vega-util';\nimport {Aggregate, isAggregateOp, isArgmaxDef, isArgminDef, isCountingAggregateOp} from './aggregate';\nimport {Axis} from './axis';\nimport {autoMaxBins, Bin, BinParams, binToString, isBinned, isBinning} from './bin';\nimport {Channel, isScaleChannel, isSecondaryRangeChannel, POSITION_SCALE_CHANNELS, rangeType} from './channel';\nimport {CompositeAggregate} from './compositemark';\nimport {Config} from './config';\nimport {DateTime, dateTimeExpr, isDateTime} from './datetime';\nimport {FormatMixins, Guide, TitleMixins} from './guide';\nimport {ImputeParams} from './impute';\nimport {Legend} from './legend';\nimport * as log from './log';\nimport {LogicalOperand} from './logical';\nimport {Predicate} from './predicate';\nimport {Scale} from './scale';\nimport {Sort, SortOrder} from './sort';\nimport {isFacetFieldDef} from './spec/facet';\nimport {StackOffset} from './stack';\nimport {\n  getLocalTimeUnit,\n  getTimeUnitParts,\n  isLocalSingleTimeUnit,\n  isUtcSingleTimeUnit,\n  normalizeTimeUnit,\n  TimeUnit\n} from './timeunit';\nimport {AggregatedFieldDef, WindowFieldDef} from './transform';\nimport {getFullName, QUANTITATIVE, StandardType, Type} from './type';\nimport {contains, flatAccessWithDatum, getFirstDefined, internalField, replacePathInField, titlecase} from './util';\n\nexport type Value = number | string | boolean | null;\n\n/**\n * Definition object for a constant value of an encoding channel.\n */\nexport interface ValueDef<V extends Value = Value> {\n  /**\n   * A constant value in visual domain (e.g., `\"red\"` / \"#0099ff\" for color, values between `0` to `1` for opacity).\n   */\n  value: V;\n}\n\n/**\n * Generic type for conditional channelDef.\n * F defines the underlying FieldDef type.\n */\n\nexport type ChannelDefWithCondition<F extends FieldDef<any>, V extends Value> =\n  | FieldDefWithCondition<F, V>\n  | ValueDefWithCondition<F, V>;\n\n/**\n * A ValueDef with Condition<ValueDef | FieldDef> where either the conition or the value are optional.\n * {\n *   condition: {field: ...} | {value: ...},\n *   value: ...,\n * }\n */\n\nexport type ValueDefWithCondition<F extends FieldDef<any>, V extends Value = Value> =\n  | ValueDefWithOptionalCondition<F, V>\n  | ConditionOnlyDef<F>;\n\nexport type StringValueDefWithCondition<F extends Field, T extends Type = StandardType> = ValueDefWithCondition<\n  MarkPropFieldDef<F, T>,\n  string | null\n>;\n\nexport type NumericValueDefWithCondition<F extends Field> = ValueDefWithCondition<\n  MarkPropFieldDef<F, StandardType>,\n  number\n>;\n\nexport type TypeForShape = 'nominal' | 'ordinal' | 'geojson';\n\nexport type ShapeValueDefWithCondition<F extends Field> = StringValueDefWithCondition<F, TypeForShape>;\n\nexport type TextValueDefWithCondition<F extends Field> = ValueDefWithCondition<TextFieldDef<F>, Value>;\n\nexport type Conditional<CD extends FieldDef<any> | ValueDef<any>> = ConditionalPredicate<CD> | ConditionalSelection<CD>;\n\nexport type ConditionalPredicate<CD extends FieldDef<any> | ValueDef<any>> = {\n  /**\n   * Predicate for triggering the condition\n   */\n  test: LogicalOperand<Predicate>;\n} & CD;\n\nexport type ConditionalSelection<CD extends FieldDef<any> | ValueDef<any>> = {\n  /**\n   * A [selection name](https://vega.github.io/vega-lite/docs/selection.html), or a series of [composed selections](https://vega.github.io/vega-lite/docs/selection.html#compose).\n   */\n  selection: LogicalOperand<string>;\n} & CD;\n\nexport function isConditionalSelection<T>(c: Conditional<T>): c is ConditionalSelection<T> {\n  return c['selection'];\n}\n\nexport interface ConditionValueDefMixins<V extends Value = Value> {\n  /**\n   * One or more value definition(s) with [a selection or a test predicate](https://vega.github.io/vega-lite/docs/condition.html).\n   *\n   * __Note:__ A field definition's `condition` property can only contain [conditional value definitions](https://vega.github.io/vega-lite/docs/condition.html#value)\n   * since Vega-Lite only allows at most one encoded field per encoding channel.\n   */\n  condition?: Conditional<ValueDef<V>> | Conditional<ValueDef<V>>[];\n}\n\n/**\n * A FieldDef with Condition<ValueDef>\n * {\n *   condition: {value: ...},\n *   field: ...,\n *   ...\n * }\n */\n\nexport type FieldDefWithCondition<F extends FieldDef<any>, V extends Value = Value> = F & ConditionValueDefMixins<V>;\n\nexport type StringFieldDefWithCondition<F extends Field, T extends Type = StandardType> = FieldDefWithCondition<\n  MarkPropFieldDef<F, T>,\n  string | null\n>;\n\nexport type NumericFieldDefWithCondition<F extends Field> = FieldDefWithCondition<\n  MarkPropFieldDef<F, StandardType>,\n  number\n>;\n\nexport type ShapeFieldDefWithCondition<F extends Field> = StringFieldDefWithCondition<F, TypeForShape>;\n\nexport type TextFieldDefWithCondition<F extends Field> = FieldDefWithCondition<TextFieldDef<F>, Value>;\n\n/**\n * A ValueDef with optional Condition<ValueDef | FieldDef>\n * {\n *   condition: {field: ...} | {value: ...},\n *   value: ...,\n * }\n */\n\nexport interface ValueDefWithOptionalCondition<FD extends FieldDef<any>, V extends Value> extends ValueDef<V> {\n  /**\n   * A field definition or one or more value definition(s) with a selection predicate.\n   */\n  condition?: Conditional<FD> | Conditional<ValueDef<V>> | Conditional<ValueDef<V>>[];\n}\n\n/**\n * A Condition<ValueDef | FieldDef> only definition.\n * {\n *   condition: {field: ...} | {value: ...}\n * }\n */\nexport interface ConditionOnlyDef<F extends FieldDef<any>, V extends Value = Value> {\n  /**\n   * A field definition or one or more value definition(s) with a selection predicate.\n   */\n  condition: Conditional<F> | Conditional<ValueDef<V>> | Conditional<ValueDef<V>>[];\n}\n\n/**\n * Reference to a repeated value.\n */\nexport interface RepeatRef {\n  repeat: 'row' | 'column' | 'repeat';\n}\n\nexport type FieldName = string;\nexport type Field = FieldName | RepeatRef;\n\nexport function isRepeatRef(field: Field): field is RepeatRef {\n  return field && !isString(field) && 'repeat' in field;\n}\n\n/** @hide */\nexport type HiddenCompositeAggregate = CompositeAggregate;\n\nexport interface FieldDefBase<F, B extends Bin = Bin> {\n  /**\n   * __Required.__ A string defining the name of the field from which to pull a data value\n   * or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n   *\n   * __Note:__ Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `\"field\": \"foo.bar\"` and `\"field\": \"foo['bar']\"`).\n   * If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `\"a\\\\.b\"` and `\"a\\\\[0\\\\]\"`).\n   * See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html).\n   *\n   * __Note:__ `field` is not required if `aggregate` is `count`.\n   */\n  field?: F;\n\n  // function\n\n  /**\n   * Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field.\n   * or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n   *\n   * __Default value:__ `undefined` (None)\n   */\n  timeUnit?: TimeUnit;\n\n  /**\n   * Aggregation function for the field\n   * (e.g., `mean`, `sum`, `median`, `min`, `max`, `count`).\n   *\n   * __Default value:__ `undefined` (None)\n   */\n  aggregate?: Aggregate | HiddenCompositeAggregate;\n\n  /**\n   * A flag for binning a `quantitative` field, [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#params), or indicating that the data for `x` or `y` channel are binned before they are imported into Vega-Lite (`\"binned\"`).\n   *\n   * - If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html) will be applied.\n   *\n   * - If `\"binned\"`, this indicates that the data for the `x` (or `y`) channel are already binned. You can map the bin-start field to `x` (or `y`) and the bin-end field to `x2` (or `y2`). The scale and axis will be formatted similar to binning in Vega-lite.  To adjust the axis ticks based on the bin step, you can also set the axis's [`tickMinStep`](https://vega.github.io/vega-lite/docs/axis.html#ticks) property.\n   *\n   * __Default value:__ `false`\n   */\n  bin?: B;\n}\n\nexport function toFieldDefBase(fieldDef: TypedFieldDef<string>): FieldDefBase<string> {\n  const {field, timeUnit, bin, aggregate} = fieldDef;\n  return {\n    ...(timeUnit ? {timeUnit} : {}),\n    ...(bin ? {bin} : {}),\n    ...(aggregate ? {aggregate} : {}),\n    field\n  };\n}\n\nexport interface TypeMixins<T extends Type> {\n  /**\n   * The encoded field's type of measurement (`\"quantitative\"`, `\"temporal\"`, `\"ordinal\"`, or `\"nominal\"`).\n   * It can also be a `\"geojson\"` type for encoding ['geoshape'](https://vega.github.io/vega-lite/docs/geoshape.html).\n   *\n   *\n   * __Note:__\n   *\n   * - Data values for a temporal field can be either a date-time string (e.g., `\"2015-03-07 12:32:17\"`, `\"17:01\"`, `\"2015-03-16\"`. `\"2015\"`) or a timestamp number (e.g., `1552199579097`).\n   * - Data `type` describes the semantics of the data rather than the primitive data types (`number`, `string`, etc.). The same primitive data type can have different types of measurement. For example, numeric data can represent quantitative, ordinal, or nominal data.\n   * - When using with [`bin`](https://vega.github.io/vega-lite/docs/bin.html), the `type` property can be either `\"quantitative\"` (for using a linear bin scale) or [`\"ordinal\"` (for using an ordinal bin scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n   * - When using with [`timeUnit`](https://vega.github.io/vega-lite/docs/timeunit.html), the `type` property can be either `\"temporal\"` (for using a temporal scale) or [`\"ordinal\"` (for using an ordinal scale)](https://vega.github.io/vega-lite/docs/type.html#cast-bin).\n   * - When using with [`aggregate`](https://vega.github.io/vega-lite/docs/aggregate.html), the `type` property refers to the post-aggregation data type. For example, we can calculate count `distinct` of a categorical field `\"cat\"` using `{\"aggregate\": \"distinct\", \"field\": \"cat\", \"type\": \"quantitative\"}`. The `\"type\"` of the aggregate output is `\"quantitative\"`.\n   * - Secondary channels (e.g., `x2`, `y2`, `xError`, `yError`) do not have `type` as they have exactly the same type as their primary channels (e.g., `x`, `y`).\n   */\n  type: T;\n}\n\n/**\n *  Definition object for a data field, its type and transformation of an encoding channel.\n */\nexport type TypedFieldDef<\n  F extends Field,\n  T extends Type = Type,\n  B extends Bin = boolean | BinParams | 'binned' | null // This is equivalent to Bin but we use the full form so the docs has detailed types\n> = FieldDefBase<F, B> & TitleMixins & TypeMixins<T>;\n\nexport interface SortableFieldDef<\n  F extends Field,\n  T extends Type = StandardType,\n  B extends Bin = boolean | BinParams | null\n> extends TypedFieldDef<F, T, B> {\n  /**\n   * Sort order for the encoded field.\n   *\n   * For continuous fields (quantitative or temporal), `sort` can be either `\"ascending\"` or `\"descending\"`.\n   *\n   * For discrete fields, `sort` can be one of the following:\n   * - `\"ascending\"` or `\"descending\"` -- for sorting by the values' natural order in Javascript.\n   * - [A sort-by-encoding definition](https://vega.github.io/vega-lite/docs/sort.html#sort-by-encoding) for sorting by another encoding channel. (This type of sort definition is not available for `row` and `column` channels.)\n   * - [A sort field definition](https://vega.github.io/vega-lite/docs/sort.html#sort-field) for sorting by another field.\n   * - [An array specifying the field values in preferred order](https://vega.github.io/vega-lite/docs/sort.html#sort-array). In this case, the sort order will obey the values in the array, followed by any unspecified values in their original order.  For discrete time field, values in the sort array can be [date-time definition objects](types#datetime). In addition, for time units `\"month\"` and `\"day\"`, the values can be the month or day names (case insensitive) or their 3-letter initials (e.g., `\"Mon\"`, `\"Tue\"`).\n   * - `null` indicating no sort.\n   *\n   * __Default value:__ `\"ascending\"`\n   *\n   * __Note:__ `null` is not supported for `row` and `column`.\n   */\n  sort?: Sort<F>;\n}\n\nexport function isSortableFieldDef<F extends Field>(fieldDef: FieldDef<F>): fieldDef is SortableFieldDef<F> {\n  return isTypedFieldDef(fieldDef) && !!fieldDef['sort'];\n}\n\nexport interface ScaleFieldDef<\n  F extends Field,\n  T extends Type = StandardType,\n  B extends Bin = boolean | BinParams | null\n> extends SortableFieldDef<F, T, B> {\n  /**\n   * An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.\n   *\n   * If `null`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).\n   *\n   * __Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.\n   */\n  scale?: Scale | null;\n}\n\n/**\n * A field definition of a secondary channel that shares a scale with another primary channel.  For example, `x2`, `xError` and `xError2` share the same scale with `x`.\n */\nexport type SecondaryFieldDef<F extends Field> = FieldDefBase<F, null> & TitleMixins; // x2/y2 shouldn't have bin, but we keep bin property for simplicity of the codebase.\n\n/**\n * Field Def without scale (and without bin: \"binned\" support).\n */\nexport type FieldDefWithoutScale<F extends Field, T extends Type = StandardType> = TypedFieldDef<F, T>;\n\nexport type LatLongFieldDef<F extends Field> = FieldDefBase<F, null> &\n  TitleMixins &\n  Partial<TypeMixins<'quantitative'>>; // Lat long shouldn't have bin, but we keep bin property for simplicity of the codebase.\n\nexport interface PositionFieldDef<F extends Field>\n  extends ScaleFieldDef<\n    F,\n    StandardType,\n    boolean | BinParams | 'binned' | null // This is equivalent to Bin but we use the full form so the docs has detailed types\n  > {\n  /**\n   * An object defining properties of axis's gridlines, ticks and labels.\n   * If `null`, the axis for the encoding channel will be removed.\n   *\n   * __Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n   */\n  axis?: Axis | null;\n\n  /**\n   * Type of stacking offset if the field should be stacked.\n   * `stack` is only applicable for `x` and `y` channels with continuous domains.\n   * For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n   *\n   * `stack` can be one of the following values:\n   * - `\"zero\"` or `true`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n   * - `\"normalize\"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized). <br/>\n   * -`\"center\"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n   * - `null` or `false` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n   *\n   * __Default value:__ `zero` for plots with all of the following conditions are true:\n   * (1) the mark is `bar` or `area`;\n   * (2) the stacked measure channel (x or y) has a linear scale;\n   * (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y.  Otherwise, `null` by default.\n   */\n  stack?: StackOffset | null | boolean;\n\n  /**\n   * An object defining the properties of the Impute Operation to be applied.\n   * The field value of the other positional channel is taken as `key` of the `Impute` Operation.\n   * The field of the `color` channel if specified is used as `groupby` of the `Impute` Operation.\n   */\n  impute?: ImputeParams;\n}\n\n/**\n * Field definition of a mark property, which can contain a legend.\n */\nexport type MarkPropFieldDef<F extends Field, T extends Type = Type> = ScaleFieldDef<\n  F,\n  T,\n  boolean | BinParams | null\n> & {\n  /**\n   * An object defining properties of the legend.\n   * If `null`, the legend for the encoding channel will be removed.\n   *\n   * __Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n   */\n  legend?: Legend | null;\n};\n\n// Detail\n\n// Order Path have no scale\n\nexport interface OrderFieldDef<F extends Field> extends FieldDefWithoutScale<F> {\n  /**\n   * The sort order. One of `\"ascending\"` (default) or `\"descending\"`.\n   */\n  sort?: SortOrder;\n}\n\nexport interface TextFieldDef<F extends Field> extends FieldDefWithoutScale<F, StandardType>, FormatMixins {}\n\nexport type FieldDef<F extends Field> = SecondaryFieldDef<F> | TypedFieldDef<F>;\nexport type ChannelDef<FD extends FieldDef<any> = FieldDef<string>, V extends Value = Value> = ChannelDefWithCondition<\n  FD,\n  V\n>;\n\nexport function isConditionalDef<F extends Field, V extends Value>(\n  channelDef: ChannelDef<FieldDef<F>, V>\n): channelDef is ChannelDefWithCondition<FieldDef<F>, V> {\n  return !!channelDef && !!channelDef.condition;\n}\n\n/**\n * Return if a channelDef is a ConditionalValueDef with ConditionFieldDef\n */\n\nexport function hasConditionalFieldDef<F extends Field, V extends Value>(\n  channelDef: ChannelDef<FieldDef<F>, V>\n): channelDef is ValueDef<V> & {condition: Conditional<TypedFieldDef<F>>} {\n  return !!channelDef && !!channelDef.condition && !isArray(channelDef.condition) && isFieldDef(channelDef.condition);\n}\n\nexport function hasConditionalValueDef<F extends Field, V extends Value>(\n  channelDef: ChannelDef<FieldDef<F>, V>\n): channelDef is ValueDef<V> & {condition: Conditional<ValueDef<V>> | Conditional<ValueDef<V>>[]} {\n  return !!channelDef && !!channelDef.condition && (isArray(channelDef.condition) || isValueDef(channelDef.condition));\n}\n\nexport function isFieldDef<F extends Field>(\n  channelDef: ChannelDef<FieldDef<F>>\n): channelDef is\n  | TypedFieldDef<F>\n  | SecondaryFieldDef<F>\n  | PositionFieldDef<F>\n  | ScaleFieldDef<F>\n  | MarkPropFieldDef<F>\n  | OrderFieldDef<F>\n  | TextFieldDef<F> {\n  return !!channelDef && (!!channelDef['field'] || channelDef['aggregate'] === 'count');\n}\n\nexport function isTypedFieldDef<F extends Field>(channelDef: ChannelDef<FieldDef<F>>): channelDef is TypedFieldDef<F> {\n  return !!channelDef && ((!!channelDef['field'] && !!channelDef['type']) || channelDef['aggregate'] === 'count');\n}\n\nexport function isStringFieldDef(channelDef: ChannelDef<FieldDef<Field>>): channelDef is TypedFieldDef<string> {\n  return isFieldDef(channelDef) && isString(channelDef.field);\n}\n\nexport function isValueDef<F extends Field, V extends Value>(\n  channelDef: ChannelDef<FieldDef<F>, V>\n): channelDef is ValueDef<V> {\n  return channelDef && 'value' in channelDef && channelDef['value'] !== undefined;\n}\n\nexport function isScaleFieldDef<F extends Field>(channelDef: ChannelDef<FieldDef<F>>): channelDef is ScaleFieldDef<F> {\n  return !!channelDef && (!!channelDef['scale'] || !!channelDef['sort']);\n}\n\nexport function isPositionFieldDef<F extends Field>(\n  channelDef: ChannelDef<FieldDef<F>>\n): channelDef is PositionFieldDef<F> {\n  return !!channelDef && (!!channelDef['axis'] || !!channelDef['stack'] || !!channelDef['impute']);\n}\n\nexport function isMarkPropFieldDef<F extends Field>(\n  channelDef: ChannelDef<FieldDef<F>>\n): channelDef is MarkPropFieldDef<F> {\n  return !!channelDef && !!channelDef['legend'];\n}\n\nexport function isTextFieldDef<F extends Field>(channelDef: ChannelDef<FieldDef<F>>): channelDef is TextFieldDef<F> {\n  return !!channelDef && !!channelDef['format'];\n}\n\nexport interface FieldRefOption {\n  /** Exclude bin, aggregate, timeUnit */\n  nofn?: boolean;\n  /** Wrap the field with datum, parent, or datum.datum (e.g., datum['...'] for Vega Expression */\n  expr?: 'datum' | 'parent' | 'datum.datum';\n  /** Prepend fn with custom function prefix */\n  prefix?: string;\n  /** Append suffix to the field ref for bin (default='start') */\n  binSuffix?: 'end' | 'range' | 'mid';\n  /** Append suffix to the field ref (general) */\n  suffix?: string;\n  /**\n   * Use the field name for `as` in a transform.\n   * We will not escape nested accesses because Vega transform outputs cannot be nested.\n   */\n  forAs?: boolean;\n}\n\nfunction isOpFieldDef(\n  fieldDef: FieldDefBase<string> | WindowFieldDef | AggregatedFieldDef\n): fieldDef is WindowFieldDef | AggregatedFieldDef {\n  return !!fieldDef['op'];\n}\n\n/**\n * Get a Vega field reference from a Vega-Lite field def.\n */\nexport function vgField(\n  fieldDef: FieldDefBase<string> | WindowFieldDef | AggregatedFieldDef,\n  opt: FieldRefOption = {}\n): string {\n  let field = fieldDef.field;\n  const prefix = opt.prefix;\n  let suffix = opt.suffix;\n\n  let argAccessor = ''; // for accessing argmin/argmax field at the end without getting escaped\n\n  if (isCount(fieldDef)) {\n    field = internalField('count');\n  } else {\n    let fn: string;\n\n    if (!opt.nofn) {\n      if (isOpFieldDef(fieldDef)) {\n        fn = fieldDef.op;\n      } else {\n        const {bin, aggregate, timeUnit} = fieldDef;\n        if (isBinning(bin)) {\n          fn = binToString(bin);\n          suffix = (opt.binSuffix || '') + (opt.suffix || '');\n        } else if (aggregate) {\n          if (isArgmaxDef(aggregate)) {\n            argAccessor = `.${field}`;\n            field = `argmax_${aggregate.argmax}`;\n          } else if (isArgminDef(aggregate)) {\n            argAccessor = `.${field}`;\n            field = `argmin_${aggregate.argmin}`;\n          } else {\n            fn = String(aggregate);\n          }\n        } else if (timeUnit) {\n          fn = String(timeUnit);\n        }\n      }\n    }\n\n    if (fn) {\n      field = field ? `${fn}_${field}` : fn;\n    }\n  }\n\n  if (suffix) {\n    field = `${field}_${suffix}`;\n  }\n\n  if (prefix) {\n    field = `${prefix}_${field}`;\n  }\n\n  if (opt.forAs) {\n    return field;\n  } else if (opt.expr) {\n    // Expression to access flattened field. No need to escape dots.\n    return flatAccessWithDatum(field, opt.expr) + argAccessor;\n  } else {\n    // We flattened all fields so paths should have become dot.\n    return replacePathInField(field) + argAccessor;\n  }\n}\n\nexport function isDiscrete(fieldDef: TypedFieldDef<Field>) {\n  switch (fieldDef.type) {\n    case 'nominal':\n    case 'ordinal':\n    case 'geojson':\n      return true;\n    case 'quantitative':\n      return !!fieldDef.bin;\n    case 'temporal':\n      return false;\n  }\n  throw new Error(log.message.invalidFieldType(fieldDef.type));\n}\n\nexport function isContinuous(fieldDef: TypedFieldDef<Field>) {\n  return !isDiscrete(fieldDef);\n}\n\nexport function isCount(fieldDef: FieldDefBase<Field>) {\n  return fieldDef.aggregate === 'count';\n}\n\nexport type FieldTitleFormatter = (fieldDef: FieldDefBase<string>, config: Config) => string;\n\nexport function verbalTitleFormatter(fieldDef: FieldDefBase<string>, config: Config) {\n  const {field, bin, timeUnit, aggregate} = fieldDef;\n  if (aggregate === 'count') {\n    return config.countTitle;\n  } else if (isBinning(bin)) {\n    return `${field} (binned)`;\n  } else if (timeUnit) {\n    const units = getTimeUnitParts(timeUnit).join('-');\n    return `${field} (${units})`;\n  } else if (aggregate) {\n    if (isArgmaxDef(aggregate)) {\n      return `${field} for max ${aggregate.argmax}`;\n    } else if (isArgminDef(aggregate)) {\n      return `${field} for min ${aggregate.argmin}`;\n    } else {\n      return `${titlecase(aggregate)} of ${field}`;\n    }\n  }\n  return field;\n}\n\nexport function functionalTitleFormatter(fieldDef: FieldDefBase<string>) {\n  const {aggregate, bin, timeUnit, field} = fieldDef;\n  if (isArgmaxDef(aggregate)) {\n    return `${field} for argmax(${aggregate.argmax})`;\n  } else if (isArgminDef(aggregate)) {\n    return `${field} for argmin(${aggregate.argmin})`;\n  }\n\n  const fn = aggregate || timeUnit || (isBinning(bin) && 'bin');\n  if (fn) {\n    return fn.toUpperCase() + '(' + field + ')';\n  } else {\n    return field;\n  }\n}\n\nexport const defaultTitleFormatter: FieldTitleFormatter = (fieldDef: FieldDefBase<string>, config: Config) => {\n  switch (config.fieldTitle) {\n    case 'plain':\n      return fieldDef.field;\n    case 'functional':\n      return functionalTitleFormatter(fieldDef);\n    default:\n      return verbalTitleFormatter(fieldDef, config);\n  }\n};\n\nlet titleFormatter = defaultTitleFormatter;\n\nexport function setTitleFormatter(formatter: FieldTitleFormatter) {\n  titleFormatter = formatter;\n}\n\nexport function resetTitleFormatter() {\n  setTitleFormatter(defaultTitleFormatter);\n}\n\nexport function title(\n  fieldDef: TypedFieldDef<string> | SecondaryFieldDef<string>,\n  config: Config,\n  {allowDisabling, includeDefault = true}: {allowDisabling: boolean; includeDefault?: boolean}\n) {\n  const guide = getGuide(fieldDef) || {};\n  const guideTitle = guide.title;\n  const def = includeDefault ? defaultTitle(fieldDef, config) : undefined;\n\n  if (allowDisabling) {\n    return getFirstDefined(guideTitle, fieldDef.title, def);\n  } else {\n    return guideTitle || fieldDef.title || def;\n  }\n}\n\nexport function getGuide(fieldDef: TypedFieldDef<string> | SecondaryFieldDef<string>): Guide {\n  if (isPositionFieldDef(fieldDef) && fieldDef.axis) {\n    return fieldDef.axis;\n  } else if (isMarkPropFieldDef(fieldDef) && fieldDef.legend) {\n    return fieldDef.legend;\n  } else if (isFacetFieldDef(fieldDef) && fieldDef.header) {\n    return fieldDef.header;\n  }\n  return undefined;\n}\n\nexport function defaultTitle(fieldDef: FieldDefBase<string>, config: Config) {\n  return titleFormatter(fieldDef, config);\n}\n\nexport function format(fieldDef: TypedFieldDef<string>) {\n  if (isTextFieldDef(fieldDef) && fieldDef.format) {\n    return fieldDef.format;\n  } else {\n    const guide = getGuide(fieldDef) || {};\n    return guide.format;\n  }\n}\n\nexport function defaultType(fieldDef: TypedFieldDef<Field>, channel: Channel): Type {\n  if (fieldDef.timeUnit) {\n    return 'temporal';\n  }\n  if (isBinning(fieldDef.bin)) {\n    return 'quantitative';\n  }\n  switch (rangeType(channel)) {\n    case 'continuous':\n      return 'quantitative';\n    case 'discrete':\n      return 'nominal';\n    case 'flexible': // color\n      return 'nominal';\n    default:\n      return 'quantitative';\n  }\n}\n\n/**\n * Returns the fieldDef -- either from the outer channelDef or from the condition of channelDef.\n * @param channelDef\n */\n\nexport function getFieldDef<F extends Field>(channelDef: ChannelDef<FieldDef<F>>): FieldDef<F> {\n  if (isFieldDef(channelDef)) {\n    return channelDef;\n  } else if (hasConditionalFieldDef(channelDef)) {\n    return channelDef.condition;\n  }\n  return undefined;\n}\n\nexport function getTypedFieldDef<F extends Field>(channelDef: ChannelDef<TypedFieldDef<F>>): TypedFieldDef<F> {\n  if (isFieldDef(channelDef)) {\n    return channelDef;\n  } else if (hasConditionalFieldDef(channelDef)) {\n    return channelDef.condition;\n  }\n  return undefined;\n}\n\n/**\n * Convert type to full, lowercase type, or augment the fieldDef with a default type if missing.\n */\nexport function normalize(channelDef: ChannelDef, channel: Channel): ChannelDef<any> {\n  if (isString(channelDef) || isNumber(channelDef) || isBoolean(channelDef)) {\n    const primitiveType = isString(channelDef) ? 'string' : isNumber(channelDef) ? 'number' : 'boolean';\n    log.warn(log.message.primitiveChannelDef(channel, primitiveType, channelDef));\n    return {value: channelDef};\n  }\n\n  // If a fieldDef contains a field, we need type.\n  if (isFieldDef(channelDef)) {\n    return normalizeFieldDef(channelDef, channel);\n  } else if (hasConditionalFieldDef(channelDef)) {\n    return {\n      ...channelDef,\n      // Need to cast as normalizeFieldDef normally return FieldDef, but here we know that it is definitely Condition<FieldDef>\n      condition: normalizeFieldDef(channelDef.condition, channel) as Conditional<TypedFieldDef<string>>\n    };\n  }\n  return channelDef;\n}\nexport function normalizeFieldDef(fieldDef: FieldDef<string>, channel: Channel) {\n  const {aggregate, timeUnit, bin} = fieldDef;\n  // Drop invalid aggregate\n  if (aggregate && !isAggregateOp(aggregate) && !isArgmaxDef(aggregate) && !isArgminDef(aggregate)) {\n    const {aggregate: _, ...fieldDefWithoutAggregate} = fieldDef;\n    log.warn(log.message.invalidAggregate(aggregate));\n    fieldDef = fieldDefWithoutAggregate;\n  }\n\n  // Normalize Time Unit\n  if (timeUnit) {\n    fieldDef = {\n      ...fieldDef,\n      timeUnit: normalizeTimeUnit(timeUnit)\n    };\n  }\n\n  // Normalize bin\n  if (isBinning(bin)) {\n    fieldDef = {\n      ...fieldDef,\n      bin: normalizeBin(bin, channel)\n    } as FieldDef<string>;\n  }\n\n  if (isBinned(bin) && !contains(POSITION_SCALE_CHANNELS, channel)) {\n    log.warn(`Channel ${channel} should not be used with \"binned\" bin`);\n  }\n\n  // Normalize Type\n  if (isTypedFieldDef(fieldDef)) {\n    const {type} = fieldDef;\n    const fullType = getFullName(type);\n    if (type !== fullType) {\n      // convert short type to full type\n      fieldDef = {\n        ...fieldDef,\n        type: fullType\n      };\n    }\n    if (type !== 'quantitative') {\n      if (isCountingAggregateOp(aggregate)) {\n        log.warn(log.message.invalidFieldTypeForCountAggregate(type, aggregate));\n        fieldDef = {\n          ...fieldDef,\n          type: 'quantitative'\n        };\n      }\n    }\n  } else if (!isSecondaryRangeChannel(channel)) {\n    // If type is empty / invalid, then augment with default type\n    const newType = defaultType(fieldDef as TypedFieldDef<any>, channel);\n    log.warn(log.message.missingFieldType(channel, newType));\n\n    fieldDef = {\n      ...fieldDef,\n      type: newType\n    };\n  }\n\n  if (isTypedFieldDef(fieldDef)) {\n    const {compatible, warning} = channelCompatibility(fieldDef, channel);\n    if (!compatible) {\n      log.warn(warning);\n    }\n  }\n  return fieldDef;\n}\n\nexport function normalizeBin(bin: BinParams | boolean | 'binned', channel: Channel) {\n  if (isBoolean(bin)) {\n    return {maxbins: autoMaxBins(channel)};\n  } else if (bin === 'binned') {\n    return {\n      binned: true\n    };\n  } else if (!bin.maxbins && !bin.step) {\n    return {...bin, maxbins: autoMaxBins(channel)};\n  } else {\n    return bin;\n  }\n}\n\nconst COMPATIBLE = {compatible: true};\nexport function channelCompatibility(\n  fieldDef: TypedFieldDef<Field>,\n  channel: Channel\n): {compatible: boolean; warning?: string} {\n  const type = fieldDef.type;\n\n  if (type === 'geojson' && channel !== 'shape') {\n    return {\n      compatible: false,\n      warning: `Channel ${channel} should not be used with a geojson data.`\n    };\n  }\n\n  switch (channel) {\n    case 'row':\n    case 'column':\n    case 'facet':\n      if (isContinuous(fieldDef)) {\n        return {\n          compatible: false,\n          warning: log.message.facetChannelShouldBeDiscrete(channel)\n        };\n      }\n      return COMPATIBLE;\n\n    case 'x':\n    case 'y':\n    case 'color':\n    case 'fill':\n    case 'stroke':\n    case 'text':\n    case 'detail':\n    case 'key':\n    case 'tooltip':\n    case 'href':\n      return COMPATIBLE;\n\n    case 'longitude':\n    case 'longitude2':\n    case 'latitude':\n    case 'latitude2':\n      if (type !== QUANTITATIVE) {\n        return {\n          compatible: false,\n          warning: `Channel ${channel} should be used with a quantitative field only, not ${fieldDef.type} field.`\n        };\n      }\n      return COMPATIBLE;\n\n    case 'opacity':\n    case 'fillOpacity':\n    case 'strokeOpacity':\n    case 'strokeWidth':\n    case 'size':\n    case 'x2':\n    case 'y2':\n      if (type === 'nominal' && !fieldDef['sort']) {\n        return {\n          compatible: false,\n          warning: `Channel ${channel} should not be used with an unsorted discrete field.`\n        };\n      }\n      return COMPATIBLE;\n\n    case 'shape':\n      if (!contains(['ordinal', 'nominal', 'geojson'], fieldDef.type)) {\n        return {\n          compatible: false,\n          warning: 'Shape channel should be used with only either discrete or geojson data.'\n        };\n      }\n      return COMPATIBLE;\n\n    case 'order':\n      if (fieldDef.type === 'nominal' && !('sort' in fieldDef)) {\n        return {\n          compatible: false,\n          warning: `Channel order is inappropriate for nominal field, which has no inherent order.`\n        };\n      }\n      return COMPATIBLE;\n  }\n  throw new Error('channelCompatability not implemented for channel ' + channel);\n}\n\nexport function isNumberFieldDef(fieldDef: TypedFieldDef<any>) {\n  return fieldDef.type === 'quantitative' || isBinning(fieldDef.bin);\n}\n\n/**\n * Check if the field def uses a time format or does not use any format but is temporal (this does not cover field defs that are temporal but use a number format).\n */\nexport function isTimeFormatFieldDef(fieldDef: TypedFieldDef<string>): boolean {\n  const formatType =\n    (isPositionFieldDef(fieldDef) && fieldDef.axis && fieldDef.axis.formatType) ||\n    (isMarkPropFieldDef(fieldDef) && fieldDef.legend && fieldDef.legend.formatType) ||\n    (isTextFieldDef(fieldDef) && fieldDef.formatType);\n  return formatType === 'time' || (!formatType && isTimeFieldDef(fieldDef));\n}\n\n/**\n * Check if field def has tye `temporal`. If you want to also cover field defs that use a time format, use `isTimeFormatFieldDef`.\n */\nexport function isTimeFieldDef(fieldDef: TypedFieldDef<any>) {\n  return fieldDef.type === 'temporal' || !!fieldDef.timeUnit;\n}\n\n/**\n * Getting a value associated with a fielddef.\n * Convert the value to Vega expression if applicable (for datetime object, or string if the field def is temporal or has timeUnit)\n */\nexport function valueExpr(\n  v: number | string | boolean | DateTime,\n  {\n    timeUnit,\n    type,\n    time,\n    undefinedIfExprNotRequired\n  }: {\n    timeUnit: TimeUnit;\n    type?: Type;\n    time?: boolean;\n    undefinedIfExprNotRequired?: boolean;\n  }\n): string {\n  let expr;\n  if (isDateTime(v)) {\n    expr = dateTimeExpr(v, true);\n  } else if (isString(v) || isNumber(v)) {\n    if (timeUnit || type === 'temporal') {\n      if (isLocalSingleTimeUnit(timeUnit)) {\n        expr = dateTimeExpr({[timeUnit]: v}, true);\n      } else if (isUtcSingleTimeUnit(timeUnit)) {\n        // FIXME is this really correct?\n        expr = valueExpr(v, {timeUnit: getLocalTimeUnit(timeUnit)});\n      } else {\n        // just pass the string to date function (which will call JS Date.parse())\n        expr = `datetime(${JSON.stringify(v)})`;\n      }\n    }\n  }\n  if (expr) {\n    return time ? `time(${expr})` : expr;\n  }\n  // number or boolean or normal string\n  return undefinedIfExprNotRequired ? undefined : JSON.stringify(v);\n}\n\n/**\n * Standardize value array -- convert each value to Vega expression if applicable\n */\nexport function valueArray(fieldDef: TypedFieldDef<string>, values: (number | string | boolean | DateTime)[]) {\n  const {timeUnit, type} = fieldDef;\n  return values.map(v => {\n    const expr = valueExpr(v, {timeUnit, type, undefinedIfExprNotRequired: true});\n    // return signal for the expression if we need an expression\n    if (expr !== undefined) {\n      return {signal: expr};\n    }\n    // otherwise just return the original value\n    return v;\n  });\n}\n\n/**\n * Checks whether a fieldDef for a particular channel requires a computed bin range.\n */\nexport function binRequiresRange(fieldDef: TypedFieldDef<string>, channel: Channel) {\n  if (!isBinning(fieldDef.bin)) {\n    console.warn('Only use this method with binned field defs');\n    return false;\n  }\n\n  // We need the range only when the user explicitly forces a binned field to be use discrete scale. In this case, bin range is used in axis and legend labels.\n  // We could check whether the axis or legend exists (not disabled) but that seems overkill.\n  return isScaleChannel(channel) && contains(['ordinal', 'nominal'], fieldDef.type);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst spec_1 = require(\"vega-lite/build/src/spec\");\nconst data_1 = require(\"vega-lite/build/src/data\");\nconst concat_1 = require(\"vega-lite/build/src/spec/concat\");\nconst channeldef_1 = require(\"vega-lite/build/src/channeldef\");\nconst InlineDatasetNode_1 = require(\"../DataModel/Datasets/InlineDatasetNode\");\nconst NamedDataSourceNode_1 = require(\"../DataModel/Datasets/NamedDataSourceNode\");\nconst URLDatasetNode_1 = require(\"../DataModel/Datasets/URLDatasetNode\");\nconst TranformNode_1 = require(\"../DataModel/Transforms/TranformNode\");\nconst CompositionTemplate_1 = require(\"./CompositionTemplate\");\nconst ConcatTemplate_1 = require(\"./ConcatTemplate\");\nconst FacetTemplate_1 = require(\"./FacetTemplate\");\nconst LayerTemplate_1 = require(\"./LayerTemplate\");\nconst PlotTemplate_1 = require(\"./PlotTemplate\");\nconst RepeatTemplate_1 = require(\"./RepeatTemplate\");\nconst SpecUtils_1 = require(\"./SpecUtils\");\nconst DataModel_1 = require(\"../DataModel\");\nclass SpecParser {\n    getEncodingsMapFromPlotSchema(schema) {\n        const templateEncodings = new Map();\n        // a mark can also be configured using the \"global\" encoding of layered views, in this case the\n        // mark's encoding can be empty\n        if (schema.encoding === undefined) {\n            return templateEncodings;\n        }\n        const schemaEncodings = Object.keys(schema.encoding);\n        schemaEncodings.forEach((encoding) => {\n            templateEncodings.set(encoding, schema.encoding[encoding]);\n        });\n        return templateEncodings;\n    }\n    setSingleViewProperties(schema, template) {\n        template.description = schema.description;\n        template.bounds = schema.bounds;\n        template.width = schema.width;\n        template.height = schema.height;\n        template.config = schema.config;\n        template.datasets = schema.datasets;\n        if (template instanceof CompositionTemplate_1.CompositionTemplate) {\n            template.spacing = schema.spacing;\n            template.columns = schema.columns;\n        }\n    }\n    getNonRepeatSubtrees(template) {\n        const nonRepeatSubtrees = [];\n        template.visualElements.forEach(t => {\n            if (!(t instanceof RepeatTemplate_1.RepeatTemplate)) {\n                nonRepeatSubtrees.push(t);\n                nonRepeatSubtrees.push(...this.getNonRepeatSubtrees(t));\n            }\n        });\n        return nonRepeatSubtrees;\n    }\n    /**\n     * In a repeat spec, the bindings inside the child templates can reference the repeated fields\n     * instead of fields from the data. In order to render such a template without its parent,\n     * modify this binding to the first entries in the repeated fields of the parent\n     */\n    removeRepeatFromChildTemplates(template) {\n        const nonRepeatSubTemplates = this.getNonRepeatSubtrees(template);\n        nonRepeatSubTemplates.forEach(childTemplate => {\n            const repeatedFields = template.repeat.column.concat(template.repeat.row);\n            childTemplate.encodings.forEach((value, key) => {\n                if (channeldef_1.isFieldDef(value)) {\n                    if (channeldef_1.isRepeatRef(value.field)) {\n                        const index = Math.floor(Math.random() * repeatedFields.length);\n                        const fieldRef = {\n                            field: repeatedFields[index],\n                            type: value.type\n                        };\n                        childTemplate.overwrittenEncodings.set(key, fieldRef);\n                    }\n                }\n            });\n        });\n    }\n    getRepeatTemplate(schema) {\n        const template = new RepeatTemplate_1.RepeatTemplate([]);\n        template.repeat = schema.repeat;\n        const childTemplate = this.parse(schema.spec);\n        template.visualElements = [childTemplate];\n        this.removeRepeatFromChildTemplates(template);\n        return template;\n    }\n    getFacetTemplate(schema) {\n        const template = new FacetTemplate_1.FacetTemplate([]);\n        const visualElements = [];\n        if (schema.facet !== undefined) {\n            template.facet = JSON.parse(JSON.stringify(schema.facet));\n            delete schema.facet;\n            visualElements.push(this.parse(schema.spec));\n        }\n        else if (schema.encoding.facet !== undefined) {\n            template.isInlineFacetted = true;\n            template.facet = JSON.parse(JSON.stringify(schema.encoding.facet));\n            delete schema.encoding.facet;\n            visualElements.push(this.parse(schema));\n        }\n        template.visualElements = visualElements;\n        return template;\n    }\n    getLayerTemplate(schema) {\n        const template = new LayerTemplate_1.LayerTemplate([]);\n        if (schema.encoding !== undefined) {\n            const groupEncodings = Object.keys(schema.encoding);\n            groupEncodings.forEach((encoding) => {\n                template.groupEncodings.set(encoding, schema.encoding[encoding]);\n            });\n        }\n        schema.layer.forEach((layer) => {\n            template.visualElements.push(this.parse(layer));\n        });\n        return template;\n    }\n    getConcatTemplate(schema) {\n        const template = new ConcatTemplate_1.ConcatTemplate([]);\n        if (spec_1.isVConcatSpec(schema)) {\n            template.isVertical = true;\n            template.isWrappable = false;\n            schema.vconcat.forEach((layer) => {\n                template.visualElements.push(this.parse(layer));\n            });\n        }\n        else if (spec_1.isHConcatSpec(schema)) {\n            template.isVertical = false;\n            template.isWrappable = false;\n            schema.hconcat.forEach((layer) => {\n                template.visualElements.push(this.parse(layer));\n            });\n        }\n        else if (concat_1.isConcatSpec(schema)) {\n            template.isVertical = false;\n            template.isWrappable = true;\n            schema.concat.forEach((layer) => {\n                template.visualElements.push(this.parse(layer));\n            });\n        }\n        return template;\n    }\n    getCompositionTemplate(schema) {\n        let template = null;\n        if (SpecUtils_1.isRepeatSchema(schema)) {\n            template = this.getRepeatTemplate(schema);\n        }\n        else if (SpecUtils_1.isOverlaySchema(schema)) {\n            template = this.getLayerTemplate(schema);\n        }\n        else if (SpecUtils_1.isFacetSchema(schema)) {\n            template = this.getFacetTemplate(schema);\n        }\n        else if (SpecUtils_1.isConcatenateSchema(schema)) {\n            template = this.getConcatTemplate(schema);\n        }\n        const encodings = this.getEncodingsMapFromPlotSchema(schema);\n        template.encodings = encodings;\n        template.resolve = schema.resolve;\n        template.visualElements.forEach(t => t.parent = template);\n        template.encodings.forEach((value, key) => {\n            template.visualElements.forEach(t => {\n                t.overwrittenEncodings.set(key, value);\n            });\n        });\n        return template;\n    }\n    getPlotTemplate(schema) {\n        const plotTemplate = new PlotTemplate_1.PlotTemplate(null);\n        plotTemplate.mark = schema.mark;\n        const encodings = this.getEncodingsMapFromPlotSchema(schema);\n        const properties = SpecUtils_1.getMarkPropertiesAsMap(schema.mark);\n        plotTemplate.encodings = encodings;\n        plotTemplate.staticMarkProperties = properties;\n        return plotTemplate;\n    }\n    getRootDatasetNode(schema) {\n        const data = schema.data;\n        if (data === undefined) {\n            return null;\n        }\n        let rootNode = null;\n        if (data_1.isUrlData(data)) {\n            rootNode = new URLDatasetNode_1.URLDatasetNode();\n        }\n        else if (data_1.isNamedData(data)) {\n            rootNode = new NamedDataSourceNode_1.NamedDataSourceNode();\n        }\n        else if (data_1.isInlineData(data)) {\n            rootNode = new InlineDatasetNode_1.InlineDatasetNode();\n        }\n        rootNode.setSchema(data);\n        return rootNode;\n    }\n    getLeafTransformNode(schema, rootNode) {\n        const transforms = schema.transform;\n        let workingNode = rootNode;\n        if (transforms === undefined) {\n            return rootNode;\n        }\n        // create linear transformation list from the spec by creating a new transformation node for\n        // each entry in the spec and linking it to the existin graph\n        if (transforms !== undefined) {\n            transforms.forEach(t => {\n                const transformNode = new TranformNode_1.TransformNode();\n                transformNode.transform = t;\n                DataModel_1.transformNames.forEach(transformName => {\n                    if (transformName in t) {\n                        transformNode.type = transformName;\n                    }\n                });\n                transformNode.parent = workingNode;\n                workingNode.children.push(transformNode);\n                workingNode = transformNode;\n            });\n        }\n        return workingNode;\n    }\n    parseDataTransformation(schema) {\n        const rootDataset = this.getRootDatasetNode(schema);\n        if (rootDataset === null) {\n            return rootDataset;\n        }\n        else {\n            return this.getLeafTransformNode(schema, rootDataset);\n        }\n    }\n    parse(schema) {\n        let template = null;\n        if (SpecUtils_1.isCompositionSchema(schema)) {\n            template = this.getCompositionTemplate(schema);\n        }\n        else if (SpecUtils_1.isPlotSchema(schema)) {\n            template = this.getPlotTemplate(schema);\n        }\n        this.setSingleViewProperties(schema, template);\n        const dataTransformation = this.parseDataTransformation(schema);\n        template.dataTransformationNode = dataTransformation;\n        const datasets = SpecUtils_1.getJoinedDatasetsOfChildNodes(template);\n        if (template instanceof PlotTemplate_1.PlotTemplate) {\n            template.selection = schema.selection;\n        }\n        return template;\n    }\n}\nexports.SpecParser = SpecParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.COMPOSITION_TYPES = ['repeat', 'overlay', 'facet', 'concatenate'];\nexports.PLOT_TYPES = ['node-link', 'bubble chart', 'timeline', 'radius',\n    'angular', 'polar coordinates', 'cartesian', 'histogram', 'parallel plot', 'star plot'];\nexports.layouts = exports.PLOT_TYPES.concat(exports.COMPOSITION_TYPES);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MARK_TYPES = ['area', 'bar', 'circle', 'geoshape', 'line', 'point', 'rect', 'rule', 'square', 'text', 'tick', 'trail'];\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template_1 = require(\"./Template\");\nexports.Template = Template_1.Template;\nvar PlotTemplate_1 = require(\"./PlotTemplate\");\nexports.PlotTemplate = PlotTemplate_1.PlotTemplate;\nvar CompositionTemplate_1 = require(\"./CompositionTemplate\");\nexports.CompositionTemplate = CompositionTemplate_1.CompositionTemplate;\nvar ConcatTemplate_1 = require(\"./ConcatTemplate\");\nexports.ConcatTemplate = ConcatTemplate_1.ConcatTemplate;\nvar FacetTemplate_1 = require(\"./FacetTemplate\");\nexports.FacetTemplate = FacetTemplate_1.FacetTemplate;\nvar LayerTemplate_1 = require(\"./LayerTemplate\");\nexports.LayerTemplate = LayerTemplate_1.LayerTemplate;\nvar RepeatTemplate_1 = require(\"./RepeatTemplate\");\nexports.RepeatTemplate = RepeatTemplate_1.RepeatTemplate;\nvar SpecCompiler_1 = require(\"./SpecCompiler\");\nexports.SpecCompiler = SpecCompiler_1.SpecCompiler;\nvar SpecParser_1 = require(\"./SpecParser\");\nexports.SpecParser = SpecParser_1.SpecParser;\nvar LayoutType_1 = require(\"./LayoutType\");\nexports.COMPOSITION_TYPES = LayoutType_1.COMPOSITION_TYPES;\nexports.PLOT_TYPES = LayoutType_1.PLOT_TYPES;\nexports.layouts = LayoutType_1.layouts;\nvar MarkEncoding_1 = require(\"./MarkEncoding\");\nexports.positionEncodings = MarkEncoding_1.positionEncodings;\nexports.geographicPositionEncodings = MarkEncoding_1.geographicPositionEncodings;\nexports.facetChannelEncodings = MarkEncoding_1.facetChannelEncodings;\nexports.hyperLinkChannelEncodings = MarkEncoding_1.hyperLinkChannelEncodings;\nexports.keyChannelEncodings = MarkEncoding_1.keyChannelEncodings;\nexports.loDChannelEncodings = MarkEncoding_1.loDChannelEncodings;\nexports.markEncodingGroups = MarkEncoding_1.markEncodingGroups;\nexports.markEncodings = MarkEncoding_1.markEncodings;\nexports.markPropertiesChannelEncodings = MarkEncoding_1.markPropertiesChannelEncodings;\nexports.orderChannelEncodings = MarkEncoding_1.orderChannelEncodings;\nexports.textTooltipChannelEncodings = MarkEncoding_1.textTooltipChannelEncodings;\nvar MarkType_1 = require(\"./MarkType\");\nexports.MARK_TYPES = MarkType_1.MARK_TYPES;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TemplateModel/\"));\n__export(require(\"./DataModel/\"));\n"],"names":["stringValue","Error","clone_","stableStringify","mark_1","spec_1","concat_1","MarkEncoding_1","d3_dsv_1","TranformNode_1","TransformTypes_1","DataModel_1","SpecUtils_1","data_1","TEXT","log.warn","log.message","channeldef_1","data","LayoutType_1","MarkType_1","require$$0","require$$1"],"mappings":"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"}